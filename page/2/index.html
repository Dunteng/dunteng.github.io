<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="éƒ½ä¼šå¥½çš„  æ€»ä¼šæœ‰çš„">
<meta property="og:type" content="website">
<meta property="og:title" content="Dunteng&#39;s Blog">
<meta property="og:url" content="https://dunteng.github.io/page/2/index.html">
<meta property="og:site_name" content="Dunteng&#39;s Blog">
<meta property="og:description" content="éƒ½ä¼šå¥½çš„  æ€»ä¼šæœ‰çš„">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dunteng&#39;s Blog">
<meta name="twitter:description" content="éƒ½ä¼šå¥½çš„  æ€»ä¼šæœ‰çš„">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: 'GX48388M0Z',
      apiKey: '24910416df90ea04217402b818109cef',
      indexName: 'index',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://dunteng.github.io/page/2/">





  <title>Dunteng's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6ffc4435fb9941ca00fb4c7e08d8fca2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Dunteng's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/10/02/expressæ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/10/02/expressæ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨.html" itemprop="url">ä½¿ç”¨expressæ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-02T00:00:00+08:00">
                2019-10-02
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/10/02/expressæ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/10/02/expressæ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨"><a href="#æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨" class="headerlink" title="æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨"></a>æ­å»ºé™æ€æ–‡ä»¶æœåŠ¡å™¨</h2><p>ä¹‹å‰ç”¨è¿‡åŸç”Ÿçš„node.jsæ¥å†™æœåŠ¡å™¨ğŸ‘‰ï¼ˆ<a href="https://dunteng.github.io/[object%20Object]2019/09/30/net%E6%A8%A1%E5%9D%97%E5%86%99%E5%BE%AE%E5%9E%8Bnode%E6%9C%8D%E5%8A%A1%E5%99%A8.html">netæœåŠ¡å™¨</a>ï¼Œ<a href="https://dunteng.github.io/[object%20Object]2019/10/01/%E4%BD%BF%E7%94%A8http%E6%A8%A1%E5%9D%97%E9%87%8D%E6%9E%84%E5%BE%AE%E5%9E%8B%E6%9C%8D%E5%8A%A1%E5%99%A8.html">httpæœåŠ¡å™¨</a>ï¼‰</p>
<p>ä»Šå¤©ç”¨expressï¼Œæ¯”èµ·<strong>åŸç”Ÿnode.js</strong>æ¥å¤ªç®€å•äº†ï¼</p>
<p>å…ˆ<code>npm init</code>åˆå§‹åŒ–é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œè¿è¡Œ<code>npm install express --save</code>å®‰è£…express.</p>
<p>index.jsæœåŠ¡å™¨å¯åŠ¨æ–‡ä»¶ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> express();<span class="comment">//åˆ›å»ºexpresså®ä¾‹</span></span><br><span class="line"></span><br><span class="line">app.use(express.static(<span class="string">"page"</span>));</span><br><span class="line">app.listen(<span class="number">12306</span>);</span><br></pre></td></tr></table></figure>
<p>é¡¹ç›®æ¶æ„å¦‚ä¸‹ğŸ‘‡</p>
<p><img src="https://pic2.zhimg.com/v2-30bad54d291afaa93d00b03e257fb535_r.jpg" alt=""></p>
<p>è¿è¡Œ<code>node index.js</code>ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—®<a href="http://127.0.0.1:12306/index.html" target="_blank" rel="noopener">http://127.0.0.1:12306/index.html</a>å’Œ<a href="http://127.0.0.1:12306/test.html" target="_blank" rel="noopener">http://127.0.0.1:12306/test.html</a>å°±ç›´æ¥æ˜¾ç¤ºå‡ºç›¸åº”çš„é¡µé¢äº†ã€‚<strong>å¤ªä»–å¦ˆæ–¹ä¾¿äº†ï¼</strong></p>
<p><br></p>
<p>å†™ä¸€ä¸‹é…ç½®æ–‡ä»¶å’Œå¯¹åº”çš„å¤„ç†æ–‡ä»¶ç¨å¾®è§„èŒƒåŒ–ä¸€ç‚¹ğŸ‘‡</p>
<p><img src="https://pic3.zhimg.com/v2-6380ca214c7bf0c61be476f8cc1fbf0a_r.jpg" alt=""></p>
<p>ğŸ“Œ<strong>config.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> globalConfig = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> conf = fs.readFileSync(<span class="string">'./server.conf'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> configArr = conf.toString().split(<span class="string">"\r\n"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; configArr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> itemArr = configArr[i].replace(<span class="regexp">/\s+/g</span>, <span class="string">""</span>).split(<span class="string">'='</span>);</span><br><span class="line">    globalConfig[itemArr[<span class="number">0</span>]] = itemArr[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(globalConfig);</span><br><span class="line"><span class="built_in">module</span>.exports = globalConfig;</span><br></pre></td></tr></table></figure>
<p><br><br></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/10/01/ä½¿ç”¨httpæ¨¡å—é‡æ„å¾®å‹æœåŠ¡å™¨.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/10/01/ä½¿ç”¨httpæ¨¡å—é‡æ„å¾®å‹æœåŠ¡å™¨.html" itemprop="url">ä½¿ç”¨httpæ¨¡å—é‡æ„å¾®å‹æœåŠ¡å™¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-01T00:00:00+08:00">
                2019-10-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/10/01/ä½¿ç”¨httpæ¨¡å—é‡æ„å¾®å‹æœåŠ¡å™¨.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/10/01/ä½¿ç”¨httpæ¨¡å—é‡æ„å¾®å‹æœåŠ¡å™¨.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¹‹å‰å†™è¿‡ä¸€ä¸ªç”¨netæ¨¡å—æ„å»ºçš„å¾®å‹æœåŠ¡å™¨ï¼ŒğŸ‘‰<a href="https://dunteng.github.io/[object%20Object]2019/09/30/%E5%86%99%E4%B8%80%E4%B8%AA%E5%BE%AE%E5%9E%8Bnode%E6%9C%8D%E5%8A%A1%E5%99%A8.html">é“¾æ¥</a></p>
<p>ç°åœ¨ç”¨httpæ¨¡å—æ¥é‡æ„ä¸€ä¸‹ã€‚ğŸ‘‰<a href="https://github.com/Dunteng/node.js/tree/master/http%E9%87%8D%E6%9E%84%E5%BE%AE%E5%9E%8B%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener">GitHubä»“åº“</a></p>
<h2 id="httpæ¨¡å—çš„åˆæ­¥ä½¿ç”¨"><a href="#httpæ¨¡å—çš„åˆæ­¥ä½¿ç”¨" class="headerlink" title="httpæ¨¡å—çš„åˆæ­¥ä½¿ç”¨"></a>httpæ¨¡å—çš„åˆæ­¥ä½¿ç”¨</h2><p><strong>é…ç½®æ–‡ä»¶server.confï¼Œç”¨ä»¥é…ç½®æœåŠ¡å™¨ä¿¡æ¯</strong>ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">port=<span class="number">12306</span></span><br><span class="line">page_path=page</span><br><span class="line">static_file_type=.html|.js|.css|.jpg|.png|.gif|.ico|.json</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„é™æ€èµ„æºä¿¡æ¯ç”¨ä»¥åé¢åˆ¤æ–­è¯·æ±‚æ˜¯é™æ€èµ„æºè¿˜æ˜¯åŠ¨æ€èµ„æºã€‚</p>
<p>é™æ€èµ„æºä¸»è¦å°±æ˜¯ä¸€äº›å†™å¥½å›ºå®šçš„æ–‡ä»¶ï¼Œæ¯”å¦‚å†™å¥½çš„htmlæ–‡ä»¶ã€å›¾ç‰‡ã€cssã€jsç­‰ï¼Œ</p>
<p>åŠ¨æ€èµ„æºå°±æ¶‰åŠåˆ°äº†å¯èƒ½ä¼šä¸ä¸šåŠ¡é€»è¾‘å¤„ç†æœ‰å…³ï¼Œéœ€è¦ajaxå¤„ç†æˆ–è€…æ¶‰åŠæ•°æ®åº“ï¼ŒåŠ¨æ€ç”Ÿæˆçš„æ•°æ®ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬æš‚ä¸”ç®€åŒ–æ¦‚å¿µï¼ŒæŠŠåç¼€åä¸º<code>.html|.js|.css|.jpg|.png|.gif|.ico|.json</code>çš„è·¯å¾„è¯·æ±‚è§†ä¸ºé™æ€æ•°æ®ï¼Œå…¶ä½™çš„è§†ä¸ºåŠ¨æ€ã€‚å…·ä½“ç”±ä¸åŒçš„æ“ä½œï¼Œä¸‹æ–‡ä¼šå¤„ç†ã€‚</p>
<p><br></p>
<p><strong>é…ç½®æ–‡ä»¶å¤„ç†config.jsï¼Œç”¨ä»¥å¤„ç†é…ç½®æ–‡ä»¶ä¿¡æ¯</strong>ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> conf = fs.readFileSync(<span class="string">'./server.conf'</span>);</span><br><span class="line"><span class="comment">// console.log(typeof conf);//è¿™å“¥ä»¬æ˜¯ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> confArr = conf.toString().split(<span class="string">'\n'</span>);<span class="comment">//å°†confå­—ç¬¦ä¸²åŒ–åæ ¹æ®æ¢è¡Œç¬¦åˆ†å‰²æˆæ•°ç»„</span></span><br><span class="line"><span class="comment">// console.log(confArr);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> globalConfig = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">in</span> confArr) &#123;</span><br><span class="line">    <span class="keyword">var</span> itemArr = confArr[i].replace(<span class="regexp">/\s+/g</span>, <span class="string">""</span>).split(<span class="string">'='</span>);<span class="comment">//å»æ‰æ‰€æœ‰ç©ºæ ¼å¹¶ç”¨'='æ‹†åˆ†</span></span><br><span class="line">    <span class="comment">// console.log(itemArr);</span></span><br><span class="line">    globalConfig[itemArr[<span class="number">0</span>]] = itemArr[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (globalConfig.static_file_type) &#123;</span><br><span class="line">    globalConfig.static_file_type = globalConfig.static_file_type.split(<span class="string">"|"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"é…ç½®æ–‡ä»¶å¼‚å¸¸ï¼Œç¼ºå°‘:static_file_type"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.log(globalConfig);</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = globalConfig;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†å®Œé…ç½®æ–‡ä»¶åå¯¼å‡ºï¼Œé•¿è¿™ä¸ªæ ·å­ğŸ‘‡</p>
<p><img src="https://pic4.zhimg.com/v2-87d153cd7dc81bf29e2c1ccc5145f72b_r.jpg" alt=""></p>
<p><br></p>
<p><strong>duntengServer.js æœåŠ¡å™¨ç«¯æ–‡ä»¶</strong>ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> globalConfig = <span class="built_in">require</span>(<span class="string">'./config'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ–°çš„è¿æ¥å·²å»ºç«‹'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(request.url);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> urlObj = url.parse(request.url);</span><br><span class="line">    <span class="keyword">var</span> pathName = url.parse(request.url).pathname;</span><br><span class="line">    <span class="keyword">var</span> params = url.parse(request.url).query;</span><br><span class="line">    <span class="keyword">var</span> paramsObj = url.parse(request.url, <span class="literal">true</span>).query;</span><br><span class="line">    <span class="built_in">console</span>.log(urlObj);</span><br><span class="line">    <span class="built_in">console</span>.log(pathName);</span><br><span class="line">    <span class="built_in">console</span>.log(params);</span><br><span class="line">    <span class="built_in">console</span>.log(paramsObj);</span><br><span class="line">&#125;).listen(globalConfig.port);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(globalConfig);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯é™æ€æ•°æ®è¯·æ±‚è¿˜æ˜¯åŠ¨æ€æ•°æ®è¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStaticsRequest</span>(<span class="params">pathName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; globalConfig.static_file_type.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> temp = globalConfig.static_file_type[i];</span><br><span class="line">        <span class="keyword">if</span> (pathName.indexOf(temp) == pathName.length - temp.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°è¯•å¯åŠ¨å®ƒï¼Œæµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:12306/index.html?a=1&amp;b=3" target="_blank" rel="noopener">http://127.0.0.1:12306/index.html?a=1&amp;b=3</a></p>
<p>ç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ğŸ‘‡</p>
<p><img src="https://pic1.zhimg.com/v2-bccefe3e22d1c4410b99c644ccf30b68_r.jpg" alt=""></p>
<p><br></p>
<h2 id="å¤„ç†é™æ€æ•°æ®è¯·æ±‚"><a href="#å¤„ç†é™æ€æ•°æ®è¯·æ±‚" class="headerlink" title="å¤„ç†é™æ€æ•°æ®è¯·æ±‚"></a>å¤„ç†é™æ€æ•°æ®è¯·æ±‚</h2><p>ä»ä¸Šä¸€æ­¥å¯ä»¥å¾—åˆ°æµè§ˆå™¨çš„è¯·æ±‚å¤´ä¿¡æ¯ï¼Œæœ€ä¸»è¦çš„å°±æ˜¯æˆ‘ä»¬æœåŠ¡ç«¯çŸ¥é“äº†æµè§ˆå™¨æƒ³è¦å¾—åˆ°<code>index.html</code>çš„å†…å®¹ï¼Œå¹¶å¯ä»¥åˆ¤æ–­å‡ºæ˜¯é™æ€æ•°æ®è¯·æ±‚è¿˜æ˜¯åŠ¨æ€æ•°æ®è¯·æ±‚ï¼š</p>
<p><br></p>
<p>å†™ä¸ªhtmlæ–‡ä»¶<code>/page/login.html</code>ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>script&gt;</span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">    &lt;h1&gt;hello manï¼&lt;/</span>h1&gt;</span><br><span class="line">    &lt;img src=<span class="string">"./cheng.png"</span> alt=<span class="string">""</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>duntengServer.js</strong>ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> globalConfig = <span class="built_in">require</span>(<span class="string">'./config'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ–°çš„è¿æ¥å·²å»ºç«‹'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(request.url);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> urlObj = url.parse(request.url);</span><br><span class="line">    <span class="keyword">var</span> pathName = url.parse(request.url).pathname;</span><br><span class="line">    <span class="keyword">var</span> params = url.parse(request.url).query;</span><br><span class="line">    <span class="keyword">var</span> paramsObj = url.parse(request.url, <span class="literal">true</span>).query;</span><br><span class="line">    <span class="built_in">console</span>.log(urlObj);</span><br><span class="line">    <span class="built_in">console</span>.log(pathName);</span><br><span class="line">    <span class="built_in">console</span>.log(params);</span><br><span class="line">    <span class="built_in">console</span>.log(paramsObj);</span><br><span class="line">    <span class="built_in">console</span>.log(isStaticsRequest(pathName));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isStaticsRequest(pathName)) &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†é™æ€æ•°æ®è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> dataFile = fs.readFileSync(globalConfig.page_path + pathName);</span><br><span class="line">            response.writeHead(<span class="number">200</span>);</span><br><span class="line">            response.write(dataFile)</span><br><span class="line">            response.end();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            response.writeHead(<span class="number">404</span>);</span><br><span class="line">            response.write(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;404 NotFound&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">            response.end();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†åŠ¨æ€æ•°æ®è¯·æ±‚</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åŠ¨æ€è¯·æ±‚'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;).listen(globalConfig.port);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯é™æ€æ•°æ®è¯·æ±‚è¿˜æ˜¯åŠ¨æ€æ•°æ®è¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStaticsRequest</span>(<span class="params">pathName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; globalConfig.static_file_type.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> temp = globalConfig.static_file_type[i];</span><br><span class="line">        <span class="keyword">if</span> (pathName.indexOf(temp) == pathName.length - temp.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨duntengServer.jsï¼Œæµè§ˆå™¨è®¿é—®&lt;<a href="http://127.0.0.1:12306/login.html" target="_blank" rel="noopener">http://127.0.0.1:12306/login.html</a></p>
<p>æµè§ˆå™¨å¦‚ä¸‹ğŸ‘‡</p>
<p><img src="https://pic1.zhimg.com/v2-e26b850a27f3c42c88b6b5f91dd87c40_r.jpg" alt=""></p>
<p>åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰“å°å‡ºä»¥ä¸‹ä¿¡æ¯ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> node duntengServer.js</span><br><span class="line">æ–°çš„è¿æ¥å·²å»ºç«‹</span><br><span class="line">/login.html</span><br><span class="line">Url &#123;</span><br><span class="line">  protocol: <span class="literal">null</span>,</span><br><span class="line">  slashes: <span class="literal">null</span>,</span><br><span class="line">  auth: <span class="literal">null</span>,</span><br><span class="line">  host: <span class="literal">null</span>,</span><br><span class="line">  port: <span class="literal">null</span>,</span><br><span class="line">  hostname: <span class="literal">null</span>,</span><br><span class="line">  hash: <span class="literal">null</span>,</span><br><span class="line">  search: <span class="literal">null</span>,</span><br><span class="line">  query: <span class="literal">null</span>,</span><br><span class="line">  pathname: <span class="string">'/login.html'</span>,</span><br><span class="line">  path: <span class="string">'/login.html'</span>,</span><br><span class="line">  href: <span class="string">'/login.html'</span> &#125;</span><br><span class="line">/login.html</span><br><span class="line"><span class="literal">null</span></span><br><span class="line">[<span class="built_in">Object</span>: <span class="literal">null</span> prototype] &#123;&#125;</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">é™æ€è¯·æ±‚</span><br><span class="line">/login.html</span><br><span class="line">æ–°çš„è¿æ¥å·²å»ºç«‹</span><br><span class="line">/cheng.png</span><br><span class="line">Url &#123;</span><br><span class="line">  protocol: <span class="literal">null</span>,</span><br><span class="line">  slashes: <span class="literal">null</span>,</span><br><span class="line">  auth: <span class="literal">null</span>,</span><br><span class="line">  host: <span class="literal">null</span>,</span><br><span class="line">  port: <span class="literal">null</span>,</span><br><span class="line">  hostname: <span class="literal">null</span>,</span><br><span class="line">  hash: <span class="literal">null</span>,</span><br><span class="line">  search: <span class="literal">null</span>,</span><br><span class="line">  query: <span class="literal">null</span>,</span><br><span class="line">  pathname: <span class="string">'/cheng.png'</span>,</span><br><span class="line">  path: <span class="string">'/cheng.png'</span>,</span><br><span class="line">  href: <span class="string">'/cheng.png'</span> &#125;</span><br><span class="line">/cheng.png</span><br><span class="line"><span class="literal">null</span></span><br><span class="line">[<span class="built_in">Object</span>: <span class="literal">null</span> prototype] &#123;&#125;</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">é™æ€è¯·æ±‚</span><br><span class="line">/cheng.png</span><br></pre></td></tr></table></figure>
<p>å¯è§ï¼Œæ¯è¯·æ±‚ä¸€æ¬¡é™æ€æ•°æ®å°±ä¼šåˆ›å»ºå¯¹åº”çš„httpé“¾æ¥ï¼Œè¿™é‡Œä¸€å…±å»ºç«‹äº†ä¸¤ä¸ªhttpè¯·æ±‚é“¾æ¥ï¼Œåˆ†åˆ«æ˜¯å¯¹<code>login.html</code>å’Œ<code>cheng.png</code>çš„</p>
<p><br></p>
<h2 id="å¤„ç†åŠ¨æ€æ•°æ®è¯·æ±‚"><a href="#å¤„ç†åŠ¨æ€æ•°æ®è¯·æ±‚" class="headerlink" title="å¤„ç†åŠ¨æ€æ•°æ®è¯·æ±‚"></a>å¤„ç†åŠ¨æ€æ•°æ®è¯·æ±‚</h2><p>åˆ°è¿™ä¸€æ­¥ä¸ºæ­¢ï¼Œå°±å®Œæˆäº†å¯¹å®¢æˆ·ç«¯è¯·æ±‚é™æ€æ•°æ®çš„å“åº”å¤„ç†ï¼Œæ¥ä¸‹æ¥æä¸€ä¸‹åŠ¨æ€çš„æ•°æ®è¯·æ±‚å¤„ç†ã€‚</p>
<p>è¿™é‡Œä»¥ä¸€ä¸ªajaxè¯·æ±‚ä¸ºä¾‹å­ã€‚</p>
<p><strong>page/login.js</strong>ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    xmlHttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xmlHttp.open(<span class="string">"GET"</span>, <span class="string">"/getData"</span>, <span class="literal">true</span>);</span><br><span class="line">    xmlHttp.send(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    xmlHttp.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (xmlHttp.readyState == <span class="number">4</span> &amp;&amp; xmlHttp.status == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(xmlHttp.responseText);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">typeof</span> xmlHttp.responseText);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·<code>login.js</code>å°±è§¦å‘äº†å¯¹<a href="http://127.0.0.1:12306/getData" target="_blank" rel="noopener">http://127.0.0.1:12306/getData</a>çš„è¯·æ±‚ï¼Œè¿™ä¸ªè·¯å¾„éƒ½ä¸ç¬¦åˆ<code>server.conf</code>ä¸­å¯¹é™æ€æ•°æ®çš„é™å®šï¼Œæ‰€ä»¥è§†ä¸ºåŠ¨æ€è¯·æ±‚ã€‚</p>
<p>åœ¨<code>login.html</code>ä¸­å¼•å…¥<code>login.js</code>ğŸ‘‡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./login.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello manï¼<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./cheng.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p><code>duntengServer.js</code>ä¸­å¤„ç†åŠ¨æ€æ•°æ®è¯·æ±‚ï¼Œå°†å…¶è·¯å¾„åç§°æ‰“å°å‡ºæ¥ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> globalConfig = <span class="built_in">require</span>(<span class="string">'./config'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ–°çš„è¿æ¥å·²å»ºç«‹'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(request.url);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> urlObj = url.parse(request.url);</span><br><span class="line">    <span class="keyword">var</span> pathName = url.parse(request.url).pathname;</span><br><span class="line">    <span class="keyword">var</span> params = url.parse(request.url).query;</span><br><span class="line">    <span class="keyword">var</span> paramsObj = url.parse(request.url, <span class="literal">true</span>).query;</span><br><span class="line">    <span class="built_in">console</span>.log(urlObj);</span><br><span class="line">    <span class="built_in">console</span>.log(pathName);</span><br><span class="line">    <span class="built_in">console</span>.log(params);</span><br><span class="line">    <span class="built_in">console</span>.log(paramsObj);</span><br><span class="line">    <span class="built_in">console</span>.log(isStaticsRequest(pathName));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isStaticsRequest(pathName)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"é™æ€è¯·æ±‚"</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(pathName);</span><br><span class="line">        <span class="comment">// å¤„ç†é™æ€æ•°æ®è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> dataFile = fs.readFileSync(globalConfig.page_path + pathName);</span><br><span class="line">            response.writeHead(<span class="number">200</span>);</span><br><span class="line">            response.write(dataFile)</span><br><span class="line">            response.end();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            response.writeHead(<span class="number">404</span>);</span><br><span class="line">            response.write(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;404 NotFound&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">            response.end();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†åŠ¨æ€æ•°æ®è¯·æ±‚</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åŠ¨æ€è¯·æ±‚'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(pathName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;).listen(globalConfig.port);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯é™æ€æ•°æ®è¯·æ±‚è¿˜æ˜¯åŠ¨æ€æ•°æ®è¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStaticsRequest</span>(<span class="params">pathName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; globalConfig.static_file_type.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> temp = globalConfig.static_file_type[i];</span><br><span class="line">        <span class="keyword">if</span> (pathName.indexOf(temp) == pathName.length - temp.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ä¹‹ï¼Œæµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:12306/login.html" target="_blank" rel="noopener">http://127.0.0.1:12306/login.html</a>ï¼Œå¯ä»¥çœ‹åˆ°ğŸ‘‡</p>
<p><img src="https://pic3.zhimg.com/v2-aaec8ec3106268c5e11d8e16f8c1a4aa_r.jpg" alt=""></p>
<p><img src="https://pic2.zhimg.com/v2-a123410cd6c292df40378871820c474d_r.jpg" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°å¯¹åŠ¨æ€è¯·æ±‚çš„ç›‘æµ‹å’Œå¤„ç†æ˜¯æˆåŠŸäº†ã€‚</p>
<h2 id="ä»duntengServer-jsä¸­æŠ½ç¦»å‡ºä¸šåŠ¡å¤„ç†ä»£ç "><a href="#ä»duntengServer-jsä¸­æŠ½ç¦»å‡ºä¸šåŠ¡å¤„ç†ä»£ç " class="headerlink" title="ä»duntengServer.jsä¸­æŠ½ç¦»å‡ºä¸šåŠ¡å¤„ç†ä»£ç "></a>ä»duntengServer.jsä¸­æŠ½ç¦»å‡ºä¸šåŠ¡å¤„ç†ä»£ç </h2><p>ä¸Šæ–‡ä¸­å®¢æˆ·ç«¯å‘èµ·äº†æ•°æ®è¯·æ±‚ï¼Œæ¯”å¦‚<code>login.html--&gt;login.js--&gt;ajax</code>æˆ‘ä»¬ç›´æ¥åœ¨<code>duntengServer.js</code>ä¸­å¤„ç†äº†é’ˆå¯¹å®ƒçš„ä¸šåŠ¡å¤„ç†ï¼ˆæ‰“å°å‡ºäº†/getDataçš„è·¯å¾„ï¼‰ï¼Œ<strong>ä½†æ˜¯</strong>è¿™æ˜¯ä¸åˆé€‚çš„ï¼Œå¯¹äºè¿™ç§ä¸šåŠ¡å¤„ç†çš„ä»£ç åº”è¯¥äº¤ç”±<code>/web/loginController.js</code>æ¥å¤„ç†ã€‚æ‰€ä»¥åº”è¯¥åœ¨<code>/web/loginController.js</code>ä¸­å†™é’ˆå¯¹<code>loginè¿™ä¸€åŠŸèƒ½</code>çš„ä¸šåŠ¡å¤„ç†ä»£ç ï¼Œç„¶ååœ¨<code>duntengServer.js</code>ä¸­requireè¿™ä¸ª<code>/web/loginController.js</code>ã€‚å¦‚ä¸‹ğŸ‘‡</p>
<p>ğŸ“Œ<strong>/web/loginController.js</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"666~"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="comment">// æˆ–è€…æ˜¯å­˜å‚¨æ•°æ®ç­‰å…¶ä»–ä»€ä¹ˆæ“ä½œï¼Œè¿™é‡Œåªä»¥æ‰“å°æ“ä½œä¸ºä¾‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = getData;</span><br></pre></td></tr></table></figure>
<p>ğŸ“Œ<strong>duntengServer.js</strong>ï¼š</p>
<p><img src="https://pic1.zhimg.com/v2-e2604cb1b573b9f6bbbb5baa6a011f7c_r.jpg" alt=""></p>
<p><img src="https://pic4.zhimg.com/v2-aec6bf41f5d6f24a4aa56b4734056c5f_r.jpg" alt=""></p>
<p><br></p>
<p>ä½†æ˜¯å¦‚æœä¸€ä¸ªé¡¹ç›®é‡Œé¢é™¤äº†loginï¼Œè¿˜æœ‰å…¶ä»–å¾ˆå¤šçš„ä¸šåŠ¡æ“ä½œï¼Œåƒä¸Šé¢è¿™æ ·å­ä¸€ä¸ªä¸€ä¸ªåœ°å¾€<code>duntengServer.js</code>é‡Œæ‰‹åŠ¨å¼•å…¥ä¼šå¾ˆç¹çï¼Œæ‰€ä»¥è¦æƒ³åŠæ³•è‡ªåŠ¨å¼•å…¥ğŸ‘‡</p>
<p><br></p>
<h2 id="è¿›ä¸€æ­¥ä¼˜åŒ–å®ç°è‡ªåŠ¨è¯†åˆ«è·¯å¾„å’Œå¤„ç†æ–¹æ³•çš„æ˜ å°„"><a href="#è¿›ä¸€æ­¥ä¼˜åŒ–å®ç°è‡ªåŠ¨è¯†åˆ«è·¯å¾„å’Œå¤„ç†æ–¹æ³•çš„æ˜ å°„" class="headerlink" title="è¿›ä¸€æ­¥ä¼˜åŒ–å®ç°è‡ªåŠ¨è¯†åˆ«è·¯å¾„å’Œå¤„ç†æ–¹æ³•çš„æ˜ å°„"></a>è¿›ä¸€æ­¥ä¼˜åŒ–å®ç°è‡ªåŠ¨è¯†åˆ«è·¯å¾„å’Œå¤„ç†æ–¹æ³•çš„æ˜ å°„</h2><p>é¡¹ç›®åˆ†å±‚æ¶æ„</p>
<p><img src="https://pic3.zhimg.com/80/v2-c12a1ed050c3cb1a76ee6a9d67ff4a3a_hd.jpg" alt=""></p>
<p>ğŸ“Œåˆ›å»ºä¸€ä¸ª<code>/loader.js</code>ï¼Œå®ƒè´Ÿè´£å°†<code>/web</code>ä¸‹æ‰€æœ‰ä¸šåŠ¡å¤„ç† js æ–‡ä»¶ä¸­çš„è·¯å¾„ä¸æ–¹æ³•å‡½æ•°ä¹‹é—´çš„æ˜ å°„å­˜è¿›ä¸€ä¸ªMapä¸­ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> globalConfig = <span class="built_in">require</span>(<span class="string">"./config"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pathMap = <span class="keyword">new</span> <span class="built_in">Map</span>();<span class="comment">//ç”¨äºç®¡ç†å…¨å±€çš„è·¯å¾„è¯·æ±‚å’Œå¯¹åº”æ–¹æ³•(æ“ä½œ)çš„æ˜ å°„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> files = fs.readdirSync(globalConfig[<span class="string">'web_path'</span>]); <span class="comment">//è¯»å–å‡ºäº†webè·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">// console.log(files);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> temp = <span class="built_in">require</span>(<span class="string">'./'</span> + globalConfig[<span class="string">'web_path'</span>] + <span class="string">'/'</span> + files[i]);</span><br><span class="line">    <span class="keyword">if</span> (temp.path) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> [key, value] <span class="keyword">of</span> temp.path) &#123;</span><br><span class="line">            <span class="comment">// console.log("keyä¸º " + key);</span></span><br><span class="line">            <span class="comment">// console.log("valueä¸º " + value);</span></span><br><span class="line">            <span class="keyword">if</span> (pathMap.get(key) == <span class="literal">null</span>) &#123;</span><br><span class="line">                pathMap.set(key, value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"é‡å¤è®¾ç½®äº†pathMapï¼Œkeyä¸º"</span> + key + <span class="string">"çš„è·¯å¾„å’Œæ–¹æ³•çš„æ˜ å°„å·²å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ä½ çš„ä»£ç æ˜¯å¦é’ˆå¯¹"</span> + key + <span class="string">"è·¯å¾„è®¾ç½®äº†å¤šä¸ªå¤„ç†æ–¹æ³•"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.log(pathMap);</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = pathMap;</span><br></pre></td></tr></table></figure>
<p>ğŸ“Œ<strong>web/loginController.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    response.writeHead(<span class="number">200</span>);</span><br><span class="line">    response.write(<span class="string">"hey kong, can u hear me?"</span>);</span><br><span class="line">    response.end();</span><br><span class="line">&#125;</span><br><span class="line">path.set(<span class="string">"/getData"</span>, getData);</span><br><span class="line"><span class="built_in">module</span>.exports.path = path;</span><br></pre></td></tr></table></figure>
<p>ğŸ“Œ<strong>web/test.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> path = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    response.writeHead(<span class="number">200</span>);</span><br><span class="line">    response.write(<span class="string">"This is testA"</span>);</span><br><span class="line">    response.end();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testB</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    response.writeHead(<span class="number">200</span>);</span><br><span class="line">    response.write(<span class="string">"This is testB"</span>);</span><br><span class="line">    response.end();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">path.set(<span class="string">"/testA"</span>, testA);</span><br><span class="line">path.set(<span class="string">"/testB"</span>, testB);</span><br><span class="line"><span class="built_in">module</span>.exports.path = path;</span><br></pre></td></tr></table></figure>
<p>ğŸ“Œ<strong>duntengServer.js</strong></p>
<p><img src="https://pic4.zhimg.com/v2-dce9c3e212881c762a5138e7b071ab5f_r.jpg" alt=""></p>
<p><img src="https://pic1.zhimg.com/v2-1ac404b18f188fb7a4aeb3278872e8f8_r.jpg" alt=""></p>
<p>å¯åŠ¨æœåŠ¡å™¨duntengServer.jsï¼Œæµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:12306/login.html" target="_blank" rel="noopener">http://127.0.0.1:12306/login.html</a>ğŸ‘‡</p>
<p><img src="https://pic3.zhimg.com/v2-0271a7f2b65255a6271bd897ccc6e056_r.jpg" alt=""></p>
<p><img src="https://pic4.zhimg.com/v2-a9cc15570463bcd4f0990170e0e7dd2b_r.jpg" alt=""></p>
<p><img src="https://pic2.zhimg.com/v2-096a3a28f5252ad840ea67cf43d99ae9_r.jpg" alt=""></p>
<p><br>æµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:12306/testA" target="_blank" rel="noopener">http://127.0.0.1:12306/testA</a>å’Œ&lt;<a href="http://127.0.0.1:12306/testB" target="_blank" rel="noopener">http://127.0.0.1:12306/testB</a>  ğŸ‘‡</p>
<p><img src="https://pic1.zhimg.com/v2-f2b1bfe8ff194a6a0529face2f7dc03c_r.jpg" alt=""></p>
<p><img src="https://pic4.zhimg.com/v2-e733e42fed98df821d04c6ecc97ee5a3_r.jpg" alt=""></p>
<p><br><br></p>
<h2 id="ç”Ÿæˆè¿è¡Œæ—¥å¿—"><a href="#ç”Ÿæˆè¿è¡Œæ—¥å¿—" class="headerlink" title="ç”Ÿæˆè¿è¡Œæ—¥å¿—"></a>ç”Ÿæˆè¿è¡Œæ—¥å¿—</h2><p>ğŸ“Œ <strong>log.js</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">var</span> globalConfig = <span class="built_in">require</span>(<span class="string">"./config"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fileName = globalConfig.log_path + globalConfig.log_name;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleString();</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    fs.appendFile(fileName, time + <span class="string">"  "</span> + data + <span class="string">"\n"</span>, &#123; <span class="attr">flag</span>: <span class="string">"a"</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = log;</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>duntengServer.js</code>ä¸­å¼•ç”¨<code>log.js</code>ï¼Œåœ¨æœåŠ¡å¯åŠ¨çš„æ—¶å€™è°ƒç”¨logå‡½æ•°è¿›è¡Œæ—¥å¿—çš„æ›´æ–°å†™å…¥ã€‚</p>
<p><br><br></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/10/01/MySQLåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œ.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/10/01/MySQLåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œ.html" itemprop="url">MySQLåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-10-01T00:00:00+08:00">
                2019-10-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/10/01/MySQLåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œ.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/10/01/MySQLåŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œ.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://pic1.zhimg.com/v2-8dc902e921dfc2f2d189f2940dbbc3a7_1200x500.jpg" alt=""></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢</span></span><br><span class="line">insert into student(name, age, stu_num, <span class="class"><span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">value</span> ('å¡å¡è¥¿',28,6600,1)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¹</span></span><br><span class="line">update student set name=<span class="string">'é¸£äºº'</span> where id = <span class="number">1</span>;</span><br><span class="line">update student set name = <span class="string">'ä½åŠ©'</span>, age=<span class="number">18</span>, stu_num=<span class="number">6631</span>, <span class="class"><span class="keyword">class</span></span>=<span class="number">1</span> where id = <span class="number">2</span>;</span><br><span class="line">update student</span><br><span class="line">set  id = <span class="number">3</span>, age=<span class="number">18</span>, stu_num=<span class="number">6632</span>, <span class="class"><span class="keyword">class</span></span>=<span class="number">1</span></span><br><span class="line">where name=<span class="string">'å°æ¨±'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥</span></span><br><span class="line">select * <span class="keyword">from</span> student;  <span class="comment">/*æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰äºº*/</span></span><br><span class="line"></span><br><span class="line">select  name,age <span class="keyword">from</span> student;  <span class="comment">/*æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰äººçš„åå­—å’Œå¹´é¾„*/</span></span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> student where age = <span class="number">18</span>; <span class="comment">/*æŸ¥è¯¢å¹´é¾„ä¸º18çš„æ‰€æœ‰äºº*/</span></span><br><span class="line"></span><br><span class="line">select count(<span class="number">1</span>) <span class="keyword">from</span> student; <span class="comment">/*æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰è®°å½•æ¡æ•°ï¼ˆåœ¨è¿™é‡Œå°±æ˜¯è¡¨ä¸­æ‰€æœ‰äººæ€»æ•°ï¼‰*/</span></span><br><span class="line"></span><br><span class="line">select count(<span class="number">1</span>) <span class="keyword">from</span> student where age=<span class="number">18</span>; <span class="comment">/*æŸ¥è¯¢è¡¨ä¸­å¹´é¾„ä¸º18çš„äººæ•°*/</span></span><br><span class="line"></span><br><span class="line">select sum(age) <span class="keyword">from</span> student; <span class="comment">/* æ‰€æœ‰äººçš„å¹´é¾„åŠ èµ·æ¥çš„æ€»æ•°*/</span></span><br><span class="line"></span><br><span class="line">select avg(age) <span class="keyword">from</span> student;<span class="comment">/*æ±‚æ‰€æœ‰äººçš„å¹³å‡å¹´é¾„*/</span></span><br><span class="line"></span><br><span class="line">select  avg(age) <span class="keyword">as</span> avg_age <span class="keyword">from</span> student; <span class="comment">/*ç»™å¹³å‡æ•°è®¾ç½®åˆ«å*/</span></span><br><span class="line"></span><br><span class="line">select <span class="class"><span class="keyword">class</span>, <span class="title">count</span>(1) <span class="title">from</span> <span class="title">student</span> <span class="title">group</span> <span class="title">by</span> <span class="title">class</span></span>; <span class="comment">/*æŸ¥è¯¢æ¯ç­å„æœ‰å¤šå°‘äººï¼Œä½¿ç”¨äº†group byè¿›è¡Œåˆ†ç»„*/</span></span><br><span class="line"></span><br><span class="line">select name, <span class="class"><span class="keyword">class</span> <span class="title">from</span> <span class="title">student</span> <span class="title">where</span> <span class="title">age</span>!</span>=<span class="number">18</span> and <span class="class"><span class="keyword">class</span></span>=<span class="number">3</span>; <span class="comment">/* å¤šä¸ªæ¡ä»¶ä½¿ç”¨and */</span></span><br><span class="line">select name, <span class="class"><span class="keyword">class</span> <span class="title">from</span> <span class="title">student</span> <span class="title">where</span> <span class="title">age</span></span>=<span class="number">18</span> or stu_num&gt;<span class="number">6640</span>; <span class="comment">/* æˆ–æ“ä½œä½¿ç”¨or */</span></span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> student limit <span class="number">2</span>; <span class="comment">/* åªå–å‰ä¸¤æ¡è®°å½•*/</span></span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> student limit <span class="number">5</span>,<span class="number">3</span>; <span class="comment">/* å‰5æ¡è®°å½•ä¸çœ‹ï¼Œä»ç¬¬6æ¡è®°å½•çœ‹èµ·ï¼Œå–å‡º3æ¡è®°å½•*/</span></span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> student order by id; <span class="comment">/* ä»¥idè¿›è¡Œæ­£åºæ’åˆ— */</span></span><br><span class="line">select * <span class="keyword">from</span> student order by id desc ; <span class="comment">/* å€’åºæ’åˆ— */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ </span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student;  <span class="comment">/*åˆ é™¤æ•´ä¸ªè¡¨ã€‚å±é™©ï¼ï¼ï¼*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student where name=<span class="string">'å¡å¡è¥¿'</span>;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/09/30/netæ¨¡å—å†™å¾®å‹nodeæœåŠ¡å™¨.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/09/30/netæ¨¡å—å†™å¾®å‹nodeæœåŠ¡å™¨.html" itemprop="url">å†™ä¸€ä¸ªå¾®å‹nodeæœåŠ¡å™¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-09-30T00:00:00+08:00">
                2019-09-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/09/30/netæ¨¡å—å†™å¾®å‹nodeæœåŠ¡å™¨.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/09/30/netæ¨¡å—å†™å¾®å‹nodeæœåŠ¡å™¨.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p><a href="https://github.com/Dunteng/node.js/tree/master/net%E5%BE%AE%E5%9E%8B%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener">https://github.com/Dunteng/node.js/tree/master/net%E5%BE%AE%E5%9E%8B%E6%9C%8D%E5%8A%A1%E5%99%A8</a></p>
<p><br><br></p>
<h2 id="åŸºç¡€demo"><a href="#åŸºç¡€demo" class="headerlink" title="åŸºç¡€demo"></a>åŸºç¡€demo</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ¥å¯¹Serverå»ºç«‹è¿æ¥å¹¶å‘é€è¯·æ±‚ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//server.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">"net"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = net.createServer();</span><br><span class="line">server.listen(<span class="number">12306</span>, <span class="string">"127.0.0.1"</span>);</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">"listening"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æœåŠ¡å·²å¯åŠ¨"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">"connection"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">socket</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æœ‰æ–°çš„è¿æ¥"</span>);</span><br><span class="line">    socket.on(<span class="string">"data"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><br>å¼€å¯serveræœåŠ¡ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®<code>127.0.0.0:12306</code>ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°å‡ºäº†dataï¼Œè€Œè¿™ä¸ªdataå°±æ˜¯è¯·æ±‚å¤´ğŸ‘‡</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1571650335272.png" alt="1571650335272"></p>
<p><br></p>
<p>æ¨¡æ‹Ÿè·å–è¯·æ±‚å¤´æ•°æ®å’Œè®¾ç½®å“åº”å¤´ğŸ‘‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">"net"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = net.createServer();</span><br><span class="line">server.listen(<span class="number">12306</span>, <span class="string">"127.0.0.1"</span>);</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">"listening"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æœåŠ¡å·²å¯åŠ¨"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">"connection"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">socket</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æœ‰æ–°çš„è¿æ¥"</span>);</span><br><span class="line">    socket.on(<span class="string">"data"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">        <span class="keyword">var</span> request = data.toString().split(<span class="string">"\r\n"</span>);</span><br><span class="line">        <span class="keyword">var</span> url = request[<span class="number">0</span>].split(<span class="string">" "</span>)[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">console</span>.log(url);</span><br><span class="line">        socket.write(<span class="string">"HTTP 200OK\r\nContent-type:text/html\r\nServer:DWS/1.1\r\n\r\n&lt;html&gt;&lt;body&gt;hello browser&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1571651223434.png" alt="1571651223434"></p>
<p><br></p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1571651233360.png" alt="1571651233360"></p>
<p><br></p>
<p>ğŸ’¡åˆ°äº†è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å®ç°å¹³æ—¶çœ‹åˆ°çš„ç½‘ç«™å“åº”çš„æ•ˆæœï¼š</p>
<p>â€‹    æ–°å»ºä¸€ä¸ª<code>index.html</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡æµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:12306/index" target="_blank" rel="noopener">http://127.0.0.1:12306/index</a>ï¼Œç„¶åæœåŠ¡ç«¯è§£æè¯·æ±‚å¤´æˆªå–åˆ°<code>index</code>å­—æ®µï¼Œé€šè¿‡è¿™ä¸ªå­—æ®µçŸ¥é“æœåŠ¡ç«¯è¦å“åº”å‡º<code>index.html</code>çš„æ•°æ®ã€‚æ€ä¹ˆè·å–åˆ°ç›®æ ‡æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†è¯»å†™æ–‡ä»¶çš„æ“ä½œäº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">"net"</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = net.createServer();</span><br><span class="line">server.listen(<span class="number">12306</span>, <span class="string">"127.0.0.1"</span>);</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">'listening'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æœåŠ¡å¯åŠ¨äº†'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">socket</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æœ‰æ–°çš„è¿æ¥å»ºç«‹äº†'</span>);</span><br><span class="line"></span><br><span class="line">    socket.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">        <span class="keyword">var</span> request = data.toString().split(<span class="string">'\r\n'</span>);</span><br><span class="line">        <span class="keyword">var</span> url = request[<span class="number">0</span>].split(<span class="string">" "</span>)[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">console</span>.log(url);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> dataFile = fs.readFileSync(__dirname + url);</span><br><span class="line">            <span class="comment">// console.log(dataFile.toString());</span></span><br><span class="line">            socket.write(<span class="string">"HTTP 200OK\r\nContent-type:text/html\r\nServer:DWS/1.1\r\n\r\n"</span>);</span><br><span class="line">            socket.write(dataFile)  <span class="comment">//socketåˆ†æˆä¸¤éƒ¨å†™ï¼Œé¿å…dataFileè¢«å­—ç¬¦ä¸²åŒ–</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            socket.write(<span class="string">"HTTP 404NotFound\r\nContent-type:text/html\r\nServer:DWS/1.1\r\n\r\n&lt;html&gt;&lt;body&gt;&lt;h1&gt;&lt;/h1&gt;404 Not Found&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        socket.end();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br>è¿è¡Œ<code>node server.js</code>ï¼Œåœ¨æµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:12306/index.htmlå°±å¯ä»¥æ˜¾ç¤ºå‡º`index.html`ä¸­çš„é¡µé¢ï¼Œå¦‚æœè®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ä¼šæ˜¾ç¤º404é¡µé¢ã€‚" target="_blank" rel="noopener">http://127.0.0.1:12306/index.htmlå°±å¯ä»¥æ˜¾ç¤ºå‡º`index.html`ä¸­çš„é¡µé¢ï¼Œå¦‚æœè®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ä¼šæ˜¾ç¤º404é¡µé¢ã€‚</a></p>
<p><br><br></p>
<h2 id="å¾®å‹æœåŠ¡å™¨çš„ç¼–å†™"><a href="#å¾®å‹æœåŠ¡å™¨çš„ç¼–å†™" class="headerlink" title="å¾®å‹æœåŠ¡å™¨çš„ç¼–å†™"></a>å¾®å‹æœåŠ¡å™¨çš„ç¼–å†™</h2><p>åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œé…ç½®æ–‡ä»¶çš„ç¼–å†™ï¼Œä»è€Œæ„å»ºä¸€ä¸ªnode.jså¾®å‹æœåŠ¡å™¨ğŸ‘‡</p>
<ul>
<li>server.conf   é…ç½®æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™å…¥è¦æ‰“å¼€çš„æ–‡ä»¶çš„è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½å¯ã€‚</li>
<li>conf.js   å¤„ç†é…ç½®ä¿¡æ¯ï¼Œæš´éœ²å‡ºä¸€ä¸ªå…¨å±€çš„é…ç½®</li>
<li>newserver.js  æœåŠ¡ç«¯ä»£ç </li>
</ul>
<p>è¿è¡Œ<code>node newserver.js</code>æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€<a href="http://127.0.0.1:12306/index.html" target="_blank" rel="noopener">http://127.0.0.1:12306/index.html</a>å³å¯æˆåŠŸè®¿é—®ã€‚</p>
<p>ä»£ç å®ç°è§æ–‡é¦–GitHubé“¾æ¥ã€‚</p>
<p><br><br></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/09/25/æ–°linuxå­¦ä¹ .html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/09/25/æ–°linuxå­¦ä¹ .html" itemprop="url">è™šæ‹Ÿæœºå®‰è£…centos7å’Œnode</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-09-25T00:00:00+08:00">
                2019-09-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/09/25/æ–°linuxå­¦ä¹ .html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/09/25/æ–°linuxå­¦ä¹ .html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ã€å¤–éƒ¨æ–‡ç« ã€‘ï¼š</p>
<ul>
<li>æˆ‘çš„LinuxåŸºç¡€æ•´ç†ç½‘ç«™ğŸ‘‰<a href="https://rockdunteng.github.io/LinuxStudy/index.html" target="_blank" rel="noopener">rockdunteng</a></li>
</ul>
<h2 id="è™šæ‹Ÿæœºå®‰è£…centos7"><a href="#è™šæ‹Ÿæœºå®‰è£…centos7" class="headerlink" title="è™šæ‹Ÿæœºå®‰è£…centos7"></a>è™šæ‹Ÿæœºå®‰è£…centos7</h2><ul>
<li><p><a href="https://www.cnblogs.com/lynn-li/p/6077944.html" target="_blank" rel="noopener">å‚è€ƒæ–‡ç« </a></p>
</li>
<li><p>æˆ‘å®‰è£…çš„æ˜¯è¿·ä½ ç‰ˆï¼Œæ²¡æœ‰æ¡Œé¢ç³»ç»Ÿï¼Œçº¯å‘½ä»¤æ¨¡å¼ã€‚</p>
</li>
<li><p>ä¹‹åæˆ‘ä»¬ä¼šæ­å»ºå°å‹çš„é›†ç¾¤</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1560265774418.png" alt="1560265774418"></p>
<p><br>ç°å®é¡¹ç›®ä¸­çš„å…¨æ ˆè¿‡ç¨‹ğŸ‘‡</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1571589448636.png" alt="1571589448636"></p>
<p><br>æ¨èçš„è™šæ‹Ÿæœºå†…å­˜é…ç½®ï¼š</p>
<ul>
<li>æœ€å¥½å°±æ˜¯16Gå†…å­˜ï¼Œéšä¾¿é…ï¼›ä½†æ˜¯è€å­æ˜¯8Gï¼Œå¾€ä¸‹çœ‹</li>
<li>proxyä»£ç†æœåŠ¡å™¨ï¼š512</li>
<li>ServiceæœåŠ¡å™¨ï¼š 1024</li>
<li>Cacheç¼“å­˜æœåŠ¡å™¨ï¼š 1024</li>
<li>DatabaseæœåŠ¡å™¨ï¼š 1024</li>
<li>ReleaseæœåŠ¡å™¨ï¼š 1024/512</li>
</ul>
</li>
</ul>
<p><br><br></p>
<h2 id="æ¡¥æ¥ç½‘ç»œè®¾ç½®"><a href="#æ¡¥æ¥ç½‘ç»œè®¾ç½®" class="headerlink" title="æ¡¥æ¥ç½‘ç»œè®¾ç½®"></a>æ¡¥æ¥ç½‘ç»œè®¾ç½®</h2><ul>
<li><p>è®¾ç½®çš„æ˜¯æ¡¥æ¥ç½‘ç»œï¼Œä¸ºäº†æ˜¯ä¸ä¸å®¿ä¸»æœºå…±äº«åŒä¸€ç½‘ç»œã€‚è¿™æ—¶æ˜¯æ— æ³•ä¸Šç½‘çš„ï¼Œéœ€è¦è¿›è¡Œä¸‹é¢çš„é…ç½®ï¼š</p>
<ul>
<li><p>è¿›å…¥è·¯å¾„<code>/etc/sysconfig/network-scripts</code>ï¼Œä¿®æ”¹<code>ifcfg-ens33</code>æ–‡ä»¶ï¼Œå°†æœ«è¡Œçš„<code>ONBOOT=no</code>æ”¹ä¸º<code>yes</code>ã€‚</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1571577252621.png" alt="1571577252621"></p>
</li>
<li><p>é‡å¯ç³»ç»Ÿ<code>reboot</code>ã€‚ç„¶åå°è¯•<code>ping</code>åŠŸèƒ½ï¼Œå‘ç°å¯ä»¥<code>ping</code>é€šå³å¯ã€‚</p>
</li>
<li><p>å¦‚æœè¿˜æ˜¯pingä¸é€šï¼Œè§è¿™ä¸¤ç¯‡æ–‡ç« ğŸ‘‰   <a href="https://blog.csdn.net/bob_666/article/details/81412242" target="_blank" rel="noopener">ä¸€</a>   <a href="https://jingyan.baidu.com/article/f7ff0bfc7859502e26bb1328.html" target="_blank" rel="noopener">äºŒ</a></p>
</li>
<li><p>è¿™é‡Œæˆ‘å¹³æ—¶ç”¨çš„æ˜¯æ ¡å›­ç½‘ï¼Œæ˜¯æ— æ³•æ¡¥æ¥æˆåŠŸçš„ã€‚æ‰€ä»¥æˆ‘æ”¹ç”¨æ‰‹æœºçƒ­ç‚¹wifiï¼Œå¹¶æŠŠç½‘å¡æ¢æˆç›¸åº”çš„æ— çº¿ç½‘å¡ã€‚</p>
</li>
<li><p>æ³¨æ„ï¼Œæˆ‘ç”¨çƒ­ç‚¹çš„æ—¶å€™ç½‘é€Ÿå¾ˆæ…¢ï¼Œå½“è¦ä¸‹è½½ä¸œè¥¿çš„æ—¶å€™æœ€å¥½åˆ‡æ¢å›natæ¨¡å¼è¿æ¥ç½‘ç»œã€‚</p>
</li>
</ul>
</li>
</ul>
<p><br><br></p>
<h2 id="å®‰è£…wgetå’Œnode"><a href="#å®‰è£…wgetå’Œnode" class="headerlink" title="å®‰è£…wgetå’Œnode"></a>å®‰è£…wgetå’Œnode</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum install wget		//ç”¨äºç½‘ç»œè¯·æ±‚</span><br><span class="line"></span><br><span class="line">wget https://nodejs.org/dist/v10.16.0/node-v10.16.0-linux-x64.tar.xz    //å®‰è£…nodeå‹ç¼©åŒ…</span><br><span class="line"></span><br><span class="line">xz -d node-v10.16.0-linux-x64.tar.xz      //è§£å‹æˆnode-v10.16.0-linux-x64.tar</span><br><span class="line"></span><br><span class="line">tar -xf node-v10.16.0-linux-x64.tar      //è§£å‹æˆnode-v10.16.0-linux-x64æ–‡ä»¶å¤¹</span><br></pre></td></tr></table></figure>
<p><br>å®‰è£…æˆåŠŸä¹‹ååœ¨æœ¬è·¯å¾„ä¸‹æŸ¥çœ‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1560361705831.png" alt="1560361705831"></p>
<p><br>é€šè¿‡<code>ll</code>æŒ‡ä»¤å¯ä»¥çœ‹åˆ°å¤šäº†nodeçš„å®‰è£…åŒ…ï¼Œä¹‹åé€šè¿‡<code>xz -d</code>æŒ‡ä»¤è§£å‹å¾—åˆ°.tar<br>çš„å‹ç¼©åŒ…ï¼Œå†é€šè¿‡<code>tar -xf</code>æŒ‡ä»¤è§£å‹å¾—åˆ°node-v10.16.0-linux-x64çš„æ–‡ä»¶å¤¹ã€‚</p>
<p><br><br></p>
<h2 id="åˆ›å»ºnodeè½¯è¿æ¥ï¼ˆå¿«æ·æ–¹å¼ï¼‰"><a href="#åˆ›å»ºnodeè½¯è¿æ¥ï¼ˆå¿«æ·æ–¹å¼ï¼‰" class="headerlink" title="åˆ›å»ºnodeè½¯è¿æ¥ï¼ˆå¿«æ·æ–¹å¼ï¼‰"></a>åˆ›å»ºnodeè½¯è¿æ¥ï¼ˆå¿«æ·æ–¹å¼ï¼‰</h2><p>ç›®å‰nodeå®‰è£…åœ¨äº†rootçš„ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæ²¡æœ‰æ”¾åœ¨<code>/usr/bin</code>ä¸‹ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥åˆ°<code>/usr/bin</code>ä¸‹ã€‚</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1560527054649.png" alt="1560527054649"></p>
<p><br>å®šä½åˆ°/usr/binè·¯å¾„ä¸‹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æœ‰å¾ˆå¤šå¯æ‰§è¡Œçš„ç¨‹åºã€‚ä¸Šé¢ç»¿è‰²çš„å°±æ˜¯ä»£è¡¨å¯æ‰§è¡Œç¨‹åºï¼Œæµ…è“è‰²çš„æ˜¯é“¾æ¥ï¼Œè¿æ¥åˆ°æŒ‡å®šçš„ç¨‹åºï¼Œæœ‰ç‚¹ç±»ä¼¼winä¸‹çš„å¿«æ·æ–¹å¼ã€‚</p>
<p>æˆ‘ä»¬è¿›å…¥node/binæ–‡ä»¶å¤¹é‡Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æœ‰<code>node</code>ï¼Œ<code>npm</code>ï¼Œ<code>npx</code>ç­‰å¯æ‰§è¡Œç¨‹åºï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰å¸¸ç”¨åˆ°çš„nodeå‘½ä»¤ã€‚</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1560527879178.png" alt="1560527879178"></p>
<p>ä¸ºäº†ä½¿å¾—nodeæŒ‡ä»¤åœ¨å…¨å±€èŒƒå›´ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸Šè¿°çš„nodeå¯æ‰§è¡Œç¨‹åºæ”¾åˆ°/usr/bin/æ–‡ä»¶å¤¹ä¸­ã€‚æ€ä¹ˆå®ç°å‘¢ï¼Ÿæˆ‘ä»¬åšä¸ª<strong>è½¯è¿æ¥</strong>è€Œä¸æ˜¯çœŸçš„æŠŠæ–‡ä»¶æ”¾åˆ°é‚£é‡Œé¢å»ã€‚</p>
<p><br></p>
<ul>
<li><p>node</p>
<p>ä½¿ç”¨æŒ‡ä»¤<code>ln -s ~/node-v10.16.0-linux-x64/bin/node /usr/bin/node</code>å°†åŸæœ¬node-xxx/bin/æ–‡ä»¶å¤¹ä¸­çš„nodeå¯æ‰§è¡Œç¨‹åºè½¯è¿æ¥åˆ°äº†/usr/bin/nodeæ–‡ä»¶å¤¹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ç”¨æˆ·æ ¹ç›®å½•è·¯å¾„ä¸‹å°±å¯ä»¥ä½¿ç”¨nodeæŒ‡ä»¤äº†</p>
<p> <img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1560528488411.png" alt="1560528488411"><br></p>
</li>
<li><p>npmå’Œnpx</p>
<p>åŒæ ·åœ°æä¸€ä¸‹npmå’Œnpx</p>
<p>é€šè¿‡æ£€æŸ¥ç‰ˆæœ¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ—¶å·²ç»å¯ä»¥åœ¨å…¨å±€ä¸‹ä½¿ç”¨nodeã€npmã€npxäº†ï¼š</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1571587193826.png" alt="1571587193826"></p>
</li>
</ul>
<p>  <br>è¿™æ—¶å†åˆ°/usr/bin/è·¯å¾„ä¸‹è¾“å…¥<code>ls</code>æŒ‡ä»¤å°±èƒ½çœ‹åˆ°æˆ‘ä»¬é“¾æ¥çš„ä¸‰ä¸ªç¨‹åºï¼Œä½¿ç”¨<code>shift+PgUp</code> å‘å‰ç¿»çœ‹,ä¸€èˆ¬ç¿»13é¡µå·¦å³ã€‚<code>shift+PgDown</code>å‘åç¿»çœ‹,ä¸€èˆ¬ç¿»13é¡µå·¦å³ã€‚</p>
<p>  <img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/blog/1560529922036.png" alt="1560529922036"></p>
<p>  <br></p>
<p><br></p>
<h2 id="FHS-æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡åŒ–æ ‡å‡†"><a href="#FHS-æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡åŒ–æ ‡å‡†" class="headerlink" title="FHS(æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡åŒ–æ ‡å‡†)"></a>FHS(æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡åŒ–æ ‡å‡†)</h2><p><img src="https://oscimg.oschina.net/oscnet/719336e7cbb111e832a03c95075d32701fa.jpg" alt=""></p>
<p><br></p>
<p>/homeå’Œ/rootçš„åŒºåˆ«ï¼šå®é™…ä¸Šï¼Œlinuxä¸windowsçš„åˆ†åŒºéƒ½æœ‰ä¸»åˆ†åŒºï¼Œæ‰©å±•åˆ†åŒºï¼Œé€»è¾‘åˆ†åŒºï¼Œåªæ˜¯ä»–ä»¬çš„ç›®å½•ç»“æ„ä¸ä¸€æ ·ï¼Œwindowsä¸ºæ£®æ—å‹ç›®å½•ç»“æ„ï¼Œä»–å¯ä»¥æœ‰å¾ˆå¤šçš„è·Ÿï¼Œå¦‚Cï¼ŒDï¼ŒEï¼ŒFéƒ½æ˜¯ä»–çš„æ ¹ç›®å½•ï¼Œè€Œlinuxä¸­æ˜¯ä¸€ä¸ªæ ‘å½¢æœºæ„ï¼Œä»–åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•é‚£å°±æ˜¯ / ,ç„¶ååœ¨ä»–ä¸‹é¢æœ‰å­ç›®å½•/root  /home  /etc /bin ç­‰ï¼Œä½ å¯ä»¥å°†å„ä¸ªå­ç›®å½•å•ç‹¬æŒ‚è½½åˆ°ä¸€ä¸ªåˆ†åŒºï¼Œè€Œå…¶ä¸­çš„/root ç›¸å½“äºæ˜¯linuxè¶…çº§æƒé™ç”¨æˆ·rootçš„å®¶ç›®å½•ï¼Œè€Œ/home/XXX(ç”¨æˆ·å)è¿™æ˜¯æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•ï¼Œå½“æ–°å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·æ—¶å€™ï¼Œé‚£ä¹ˆåœ¨/home ç›®å½•ä¸‹å°±æœ‰ä¸€ä¸ªå¯¹åº”çš„/home/XX è·¯å¾„ï¼Œç”¨æ¥å­˜æ”¾ç”¨æˆ·çš„ä¸»ç›®å½•</p>
<p><br><br></p>
<h2 id="ä½¿ç”¨xshell"><a href="#ä½¿ç”¨xshell" class="headerlink" title="ä½¿ç”¨xshell"></a>ä½¿ç”¨xshell</h2><p>è™šæ‹Ÿæœºçš„ç»ˆç«¯ä¸æ”¯æŒå¤åˆ¶ç²˜è´´ï¼Œä¸å¤ªæ–¹ä¾¿ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨xshellè¿œç¨‹è¿æ¥ä¸Šè™šæ‹Ÿæœºï¼Œé€šè¿‡xshellæ¥æ‰§è¡Œæ“ä½œã€‚</p>
<p><br><br></p>
<h2 id="nodeæœåŠ¡å™¨åˆè¯•"><a href="#nodeæœåŠ¡å™¨åˆè¯•" class="headerlink" title="nodeæœåŠ¡å™¨åˆè¯•"></a>nodeæœåŠ¡å™¨åˆè¯•</h2><p>æ‰¾ä¸ªç›®å½•ï¼Œæˆ‘éšä¾¿åœ¨<code>/home/test</code>ä¸‹æ–°å»ºäº†ä¸€ä¸ª<code>test.js</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	res.writeHead(<span class="number">200</span>,&#123;<span class="string">"Content-Type"</span>:<span class="string">"text/plain"</span>&#125;);</span><br><span class="line">	res.end(<span class="string">"hello world"</span>);</span><br><span class="line">&#125;</span><br><span class="line">http.createServer(hello).listen(<span class="number">12306</span>,<span class="string">"192.168.171.134"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"hello world"</span>);</span><br></pre></td></tr></table></figure>
<p>ã€æ³¨æ„ã€‘ï¼š</p>
<ul>
<li>é€šè¿‡<code>ip addr</code>æŸ¥çœ‹IPåœ°å€ï¼Œç„¶åç”¨xshellè¿œç¨‹è¿æ¥ä¹‹ã€‚</li>
<li>ä»£ç ä¸­çš„IPåœ°å€å³ä¸ºcentosçš„IPåœ°å€ï¼Œå¼€å¯ç«¯å£ä¸º12306</li>
<li>åœ¨<code>/home/test</code>ä¸‹æ‰§è¡Œ<code>node test.js</code>æŒ‡ä»¤å°±å¼€å¯äº†nodeæœåŠ¡å™¨ã€‚</li>
<li>ç„¶åè¦<strong>å…³é—­centosçš„é˜²ç«å¢™</strong>ã€‚<code>systemctl disable firewalld</code>ï¼Œç„¶å<code>reboot</code>é‡å¯ä¹‹ã€‚</li>
<li>è¿™ä¸‹å­å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®åˆ°<code>http://192.168.171.134:12306/</code>äº†ï¼Œé¡µé¢æ˜¾ç¤º<code>res.end</code>ä¸­çš„å†…å®¹ã€‚</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/09/01/LinuxåŸºç¡€å…¥é—¨.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/09/01/LinuxåŸºç¡€å…¥é—¨.html" itemprop="url">LinuxåŸºç¡€å…¥é—¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-09-01T00:00:00+08:00">
                2019-09-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/09/01/LinuxåŸºç¡€å…¥é—¨.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/09/01/LinuxåŸºç¡€å…¥é—¨.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><br><br><br></p>
<p>ç‚¹å‡»æ­¤å¤„è·³è½¬ğŸ‘‰  <a href="https://rockdunteng.github.io/LinuxStudy/index.html" target="_blank" rel="noopener">Linuxç¬”è®°</a></p>
<p><br><br><br></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/08/09/vueçŸ¥è¯†ç‚¹.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/08/09/vueçŸ¥è¯†ç‚¹.html" itemprop="url">VueåŸºç¡€ç¬”è®°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-09T13:27:31+08:00">
                2019-08-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/08/09/vueçŸ¥è¯†ç‚¹.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/08/09/vueçŸ¥è¯†ç‚¹.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><p style="color:red">ã€å¤ä¹ æœ¬ç¯‡ç¬”è®°æ—¶ä¸€è¾¹çœ‹æºç ã€‘</p>

<p><a href="https://github.com/rockdunteng/rockdunteng.github.io/tree/master/note/vue/%E6%B8%A1%E4%B8%80%E6%96%B0Vue%E6%BA%90%E7%A0%81" target="_blank" rel="noopener">https://github.com/rockdunteng/rockdunteng.github.io/tree/master/note/vue/%E6%B8%A1%E4%B8%80%E6%96%B0Vue%E6%BA%90%E7%A0%81</a><br><br><br></p>
<h1 id="ä¸€ã€Vueå‰å¯¼"><a href="#ä¸€ã€Vueå‰å¯¼" class="headerlink" title="ä¸€ã€Vueå‰å¯¼"></a>ä¸€ã€Vueå‰å¯¼</h1><p>Vueçš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å‡å°‘domæ“ä½œï¼Œæ€§èƒ½æ›´å¥½</li>
<li>è§†å›¾ã€æ•°æ®åˆ†ç¦»</li>
<li>ç»´æŠ¤æˆæœ¬ä½</li>
</ol>
<p>ç‚¹å‡»è¯¥<a href="https://rockdunteng.github.io/note/vue/vue%E7%9A%84%E4%BC%98%E7%82%B9.pdf" target="_blank" rel="noopener">pdf</a>æŸ¥çœ‹è¯¦æƒ…</p>
<p><br><br><br></p>
<h1 id="äºŒã€æ•°æ®ç»‘å®šä¸è§†å›¾æ¸²æŸ“"><a href="#äºŒã€æ•°æ®ç»‘å®šä¸è§†å›¾æ¸²æŸ“" class="headerlink" title="äºŒã€æ•°æ®ç»‘å®šä¸è§†å›¾æ¸²æŸ“"></a>äºŒã€æ•°æ®ç»‘å®šä¸è§†å›¾æ¸²æŸ“</h1><p>ä½¿ç”¨â€œMustacheâ€è¯­æ³• (åŒèŠ±æ‹¬å·)æ’å€¼è¡¨è¾¾å¼æ¸²æŸ“è§†å›¾ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564215958637.png" alt="1564215958637"></p>
<p><br><br></p>
<h2 id="æ•°æ®è¦å…ˆå­˜åœ¨ï¼Œæ‰èƒ½å®ç°æ•°æ®ç»‘å®š"><a href="#æ•°æ®è¦å…ˆå­˜åœ¨ï¼Œæ‰èƒ½å®ç°æ•°æ®ç»‘å®š" class="headerlink" title="æ•°æ®è¦å…ˆå­˜åœ¨ï¼Œæ‰èƒ½å®ç°æ•°æ®ç»‘å®š"></a><strong>æ•°æ®è¦å…ˆå­˜åœ¨ï¼Œæ‰èƒ½å®ç°æ•°æ®ç»‘å®š</strong></h2><p>åœ¨ä¸‹å›¾æ‰€ç¤ºä¸­ï¼Œå¯ä»¥é€šè¿‡<code>vm.name</code>çš„æ–¹å¼è¿›è¡Œæ•°æ®çš„è·å–å’Œä¿®æ”¹ï¼Œæ•°æ®ä¿®æ”¹çš„åŒæ—¶ï¼Œè§†å›¾ä¹Ÿéšä¹‹æ”¹å˜ï¼Œå¦‚æœ¬ä¾‹ä¸­çš„<code>name</code>çš„å€¼ç”±jimmyå˜æˆäº†tonyï¼Œè§†å›¾ç«‹å³éšä¹‹æ”¹å˜ã€‚ä½†æ˜¯å½“<code>vm.obj.xx=12</code>æ—¶ï¼Œè™½ç„¶<code>vm.obj.xx</code>æˆåŠŸåˆ›å»ºäº†ï¼Œä½†æ˜¯è§†å›¾æ²¡æœ‰éšä¹‹æ¸²æŸ“ã€‚</p>
<p>å› ä¸ºåœ¨ Vue ä¸­ï¼Œ<strong>æ•°æ®è¦å…ˆå­˜åœ¨ï¼Œæ‰èƒ½å®ç°æ•°æ®ç»‘å®šï¼Œä»è€Œæ¸²æŸ“è§†å›¾</strong></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564212932741.png" alt="1564212932741"></p>
<p><br><br></p>
<h2 id="é€šè¿‡ç´¢å¼•çš„æ–¹å¼ä¿®æ”¹æ•°ç»„ï¼Œæˆ–é€šè¿‡ä¿®æ”¹æ•°ç»„é•¿åº¦çš„æ–¹å¼ä¿®æ”¹æ•°ç»„ï¼Œéƒ½æ— æ³•é‡æ–°æ¸²æŸ“è§†å›¾"><a href="#é€šè¿‡ç´¢å¼•çš„æ–¹å¼ä¿®æ”¹æ•°ç»„ï¼Œæˆ–é€šè¿‡ä¿®æ”¹æ•°ç»„é•¿åº¦çš„æ–¹å¼ä¿®æ”¹æ•°ç»„ï¼Œéƒ½æ— æ³•é‡æ–°æ¸²æŸ“è§†å›¾" class="headerlink" title="é€šè¿‡ç´¢å¼•çš„æ–¹å¼ä¿®æ”¹æ•°ç»„ï¼Œæˆ–é€šè¿‡ä¿®æ”¹æ•°ç»„é•¿åº¦çš„æ–¹å¼ä¿®æ”¹æ•°ç»„ï¼Œéƒ½æ— æ³•é‡æ–°æ¸²æŸ“è§†å›¾"></a>é€šè¿‡<strong>ç´¢å¼•çš„æ–¹å¼</strong>ä¿®æ”¹æ•°ç»„ï¼Œæˆ–é€šè¿‡<strong>ä¿®æ”¹æ•°ç»„é•¿åº¦çš„æ–¹å¼</strong>ä¿®æ”¹æ•°ç»„ï¼Œéƒ½æ— æ³•é‡æ–°æ¸²æŸ“è§†å›¾</h2><p> <img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564213382860.png" alt="1564213382860"></p>
<p><br><br></p>
<h2 id="æ•°ç»„å˜å¼‚æ–¹æ³•"><a href="#æ•°ç»„å˜å¼‚æ–¹æ³•" class="headerlink" title="æ•°ç»„å˜å¼‚æ–¹æ³•"></a>æ•°ç»„å˜å¼‚æ–¹æ³•</h2><p>å‘ç°ä½¿ç”¨æ•°ç»„æ–¹æ³•æ—¶ï¼Œå°±ä¼šè§¦å‘è§†å›¾é‡æ–°æ¸²æŸ“ã€‚</p>
<p>Vueçš„æ•°æ®ç»‘å®šæ˜¯é€šè¿‡<strong>æ•°æ®åŠ«æŒ</strong>æ¥å®ç°çš„ï¼Œåœ¨æ•°æ®åŠ«æŒçš„æ—¶å€™é€šè¿‡<strong>ç´¢å¼•ä¿®æ”¹æ•°ç»„</strong>æˆ–è€…<strong>é€šè¿‡ä¿®æ”¹æ•°ç»„é•¿åº¦æ¥ä¿®æ”¹æ•°ç»„</strong>æ˜¯æ— æ³•è¢«æ„ŸçŸ¥çš„ï¼ŒVueåœ¨è®¾è®¡çš„æ—¶å€™é€šè¿‡<strong>ä¿®æ”¹æ•°ç»„çš„ä¸€äº›æ–¹æ³•</strong>ï¼Œåœ¨è¿™äº›æ–¹æ³•é‡Œé¢æ·»åŠ äº†ä¸€ä¸ª<strong>æ›´æ–°è§†å›¾çš„æ–¹æ³•çš„æ‰§è¡Œ</strong>ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è°ƒç”¨è¿™äº›æ•°ç»„çš„æ–¹æ³•çš„æ—¶å€™å¯ä»¥è§¦å‘æ›´æ–°è§†å›¾æ–¹æ³•ï¼Œä»è€Œæ›´æ–°è§†å›¾ã€‚è¿™äº›æ•°ç»„çš„æ–¹æ³•åœ¨vueä¸­è¢«ç§°ä¸º<strong>æ•°ç»„å˜å¼‚æ–¹æ³•</strong>ã€‚è¿™äº›æ–¹æ³•å·²ç»ä¸æ˜¯åŸç”Ÿçš„ js æ–¹æ³•äº†ï¼Œæ˜¯è¢« Vue æ”¹å†™äº†ï¼Œè®©å®ƒèƒ½æœ‰ä¸€ä¸ªé‡æ–°æ¸²æŸ“è§†å›¾çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564214165792.png" alt="1564214165792"></p>
<p><br><br></p>
<p>Vue æœ‰ä»¥ä¸‹7ä¸­å˜å¼‚æ–¹æ³•</p>
<ul>
<li><code>push()</code>        å¾€æ•°ç»„æœ€åé¢æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ŒæˆåŠŸè¿”å›å½“å‰æ•°ç»„çš„é•¿åº¦ </li>
<li><code>pop()</code>             åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ŒæˆåŠŸè¿”å›åˆ é™¤å…ƒç´ çš„å€¼ </li>
<li><code>shift()</code>          åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒæˆåŠŸè¿”å›åˆ é™¤å…ƒç´ çš„å€¼ </li>
<li><code>unshift()</code>      å¾€æ•°ç»„æœ€å‰é¢æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ŒæˆåŠŸè¿”å›å½“å‰æ•°ç»„çš„é•¿åº¦ </li>
<li><code>splice()</code>        æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æƒ³è¦åˆ é™¤çš„å…ƒç´ çš„ä¸‹æ ‡ï¼ˆå¿…é€‰ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯æƒ³è¦åˆ é™¤çš„ä¸ªæ•°ï¼ˆå¿…é€‰ï¼‰ï¼Œ                     ç¬¬ä¸‰ä¸ªæ˜¯åˆ é™¤åæƒ³è¦åœ¨åŸä½ç½®æ›¿æ¢çš„å€¼ï¼ˆå¯é€‰ï¼‰ </li>
<li><code>sort()</code>             ä½¿æ•°ç»„æŒ‰ç…§å­—ç¬¦ç¼–ç é»˜è®¤ä»å°åˆ°å¤§æ’åº,æˆåŠŸè¿”å›æ’åºåçš„æ•°ç»„ </li>
<li><code>reverse()</code>           å°†æ•°ç»„å€’åºï¼ŒæˆåŠŸè¿”å›å€’åºåçš„æ•°ç»„ </li>
</ul>
<p><br><br></p>
<h2 id="setæ–¹æ³•"><a href="#setæ–¹æ³•" class="headerlink" title="$setæ–¹æ³•"></a>$setæ–¹æ³•</h2><p>$setæ–¹æ³•å¯ä»¥<strong>è§£å†³å¯¹è±¡ä¸­æœªå­˜åœ¨æ•°æ®çš„æ•°æ®ç»‘å®šé—®é¢˜</strong>ã€‚</p>
<p>å¯ä»¥å®ç°è§†å›¾çš„å®æ—¶æ›´æ–°ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564216195094.png" alt="1564216195094"></p>
<p><br><br></p>
<h2 id="el"><a href="#el" class="headerlink" title="$el"></a>$el</h2><p>Vueå®ä¾‹vmä¸­æœ‰ä¸€ä¸ª $el å±æ€§ï¼Œå®ƒèƒ½æŒ‡å‘æŒ‚è½½ Vue çš„Domç»“æ„ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564217181273.png" alt="1564217181273"><br></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564217272687.png" alt="1564217272687"></p>
<p><br>ä¸Šå›¾ä¸€å…±ä¿®æ”¹äº† name ä¸‰æ¬¡ï¼Œä¿®æ”¹äº† age ä¸¤æ¬¡ï¼Œæœ€åä¸€è¡Œä»£ç æ˜¯æ‰“å° <code>$el.innerText</code>ï¼Œä½†æ˜¯è¿™äº”æ¬¡çš„æ•°æ®ä¿®æ”¹æ˜¯<strong>å¼‚æ­¥</strong>çš„ï¼Œç»“æœå°±æ˜¯æ˜¯å…ˆæ‰“å°äº†ä¸€å¼€å§‹çš„ <code>$el.innerText</code>:</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564217455589.png" alt="1564217455589"></p>
<p><br>è¿™æ ·å¯¼è‡´æˆ‘ä»¬æ— æ³•æ‰“å°è·å–åˆ°æ•°æ®æ›´æ”¹åçš„<code>$el.innerText</code>ï¼Œå¦‚ä½•è§£å†³ï¼Œçœ‹ä¸‹é¢çš„ <code>$nextTick</code></p>
<p><br><br></p>
<h2 id="nextTick"><a href="#nextTick" class="headerlink" title="$nextTick"></a>$nextTick</h2><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564217936576.png" alt="1564217936576"></p>
<p>å®ƒä¼šåœ¨æ•°æ®éƒ½ä¿®æ”¹å®Œæˆå¹¶ä¸”é‡æ–°æ¸²æŸ“åˆ°é¡µé¢ä¸Šä¹‹åæ‰æ‰§è¡Œé‡Œé¢çš„å‡½æ•°ã€‚è¿™æ ·å°±èƒ½è·å–åˆ°æ•°æ®æ›´æ”¹åçš„domã€‚</p>
<p><br><br></p>
<h2 id="mount"><a href="#mount" class="headerlink" title="$mount"></a>$mount</h2><p>åˆ›å»º Vue å®ä¾‹çš„æ—¶å€™å¯ä»¥ä¸å†™ <code>el: &#39;#app&#39;</code>, ä½¿ç”¨ <code>$mount</code>ä¹Ÿèƒ½å®ç°åŒæ ·çš„æ•ˆæœã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564218209720.png" alt="1564218209720"></p>
<p><br><br></p>
<h2 id="refs"><a href="#refs" class="headerlink" title="$refs"></a>$refs</h2><p>åœ¨å…ƒç´ æ ‡ç­¾ä¸Šä½¿ç”¨<code>ref</code>æ¥æ ‡è®°ï¼Œç„¶åé€šè¿‡<code>$refs</code>æ¥è·å–åˆ°æ ‡è®°çš„å¼•ç”¨ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567579888756.png" alt="1567579888756"></p>
<p><br>æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½é‡å¤æ ‡è®°ç›¸åŒåç§°ï¼Œç›¸åŒåç§°çš„ ref åªä¼šè¦†ç›–ä¸ºæœ€åä¸€ä¸ªï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567580190773.png" alt="1567580190773"></p>
<p><br>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯ç”¨ v-for çš„æ–¹å¼æ¥å¾ªç¯æ ‡è®°ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿè¦†ç›–ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567580308732.png" alt="1567580308732"></p>
<p>ref é™¤äº†å¯ä»¥æ ‡è®° dom å…ƒç´ ï¼Œè¿˜å¯ä»¥æ ‡è®°ç»„ä»¶ã€‚å¦‚æœåœ¨æ™®é€šçš„ DOM å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ DOM å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹ã€‚ä¸‹æ–‡è®²ç»„ä»¶ä¼ å€¼æ—¶ä¼šè®²åˆ°ã€‚</p>
<p> <br><br><br></p>
<h1 id="ä¸‰ã€Vue-æŒ‡ä»¤"><a href="#ä¸‰ã€Vue-æŒ‡ä»¤" class="headerlink" title="ä¸‰ã€Vue æŒ‡ä»¤"></a>ä¸‰ã€Vue æŒ‡ä»¤</h1><h2 id="v-preã€v-cloakå’Œv-onceæŒ‡ä»¤"><a href="#v-preã€v-cloakå’Œv-onceæŒ‡ä»¤" class="headerlink" title="v-preã€v-cloakå’Œv-onceæŒ‡ä»¤"></a>v-preã€v-cloakå’Œv-onceæŒ‡ä»¤</h2><h3 id="v-preæŒ‡ä»¤"><a href="#v-preæŒ‡ä»¤" class="headerlink" title="v-preæŒ‡ä»¤"></a>v-preæŒ‡ä»¤</h3><p>åœ¨æ¨¡æ¿ä¸­è·³è¿‡vueçš„ç¼–è¯‘ï¼Œç›´æ¥è¾“å‡ºåŸå§‹å€¼ã€‚å°±æ˜¯åœ¨æ ‡ç­¾ä¸­åŠ å…¥v-preå°±ä¸ä¼šè¾“å‡ºvueä¸­çš„dataå€¼äº†ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-pre</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å¹¶ä¸ä¼šè¾“å‡ºæˆ‘ä»¬çš„messageå€¼ï¼Œè€Œæ˜¯ç›´æ¥åœ¨ç½‘é¡µä¸­æ˜¾ç¤º<code></code><br></p>
<h3 id="v-cloakæŒ‡ä»¤"><a href="#v-cloakæŒ‡ä»¤" class="headerlink" title="v-cloakæŒ‡ä»¤"></a>v-cloakæŒ‡ä»¤</h3><p>åœ¨vueæ¸²æŸ“å®ŒæŒ‡å®šçš„æ•´ä¸ªDOMåæ‰è¿›è¡Œæ˜¾ç¤ºã€‚å®ƒå¿…é¡»å’ŒCSSæ ·å¼ä¸€èµ·ä½¿ç”¨ï¼Œ</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[v-cloak]</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="selector-tag">div</span> <span class="selector-tag">v-cloak</span>&gt;</span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="v-onceæŒ‡ä»¤"><a href="#v-onceæŒ‡ä»¤" class="headerlink" title="v-onceæŒ‡ä»¤"></a>v-onceæŒ‡ä»¤</h3><p>åœ¨ç¬¬ä¸€æ¬¡DOMæ—¶è¿›è¡Œæ¸²æŸ“ï¼Œæ¸²æŸ“å®Œæˆåè§†ä¸ºé™æ€å†…å®¹ï¼Œè·³å‡ºä»¥åçš„æ¸²æŸ“è¿‡ç¨‹ã€‚</p>
<p><br></p>
<h2 id="å…¶ä»–å¸¸ç”¨æŒ‡ä»¤"><a href="#å…¶ä»–å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å…¶ä»–å¸¸ç”¨æŒ‡ä»¤"></a>å…¶ä»–å¸¸ç”¨æŒ‡ä»¤</h2><p>è¿˜æœ‰ v-htmlã€v-textã€v-ifã€v-else-ifã€v-elseã€v-showç­‰ï¼Œå…·ä½“è§æ—§ç‰ˆç¬”è®°ã€‚</p>
<p><br><br></p>
<h2 id="xssæ”»å‡»"><a href="#xssæ”»å‡»" class="headerlink" title="xssæ”»å‡»"></a>xssæ”»å‡»</h2><p>è®²åˆ° v-html çš„æ—¶å€™ï¼Œæåˆ°äº†<strong>XSSæ”»å‡»</strong>ï¼Œäº†è§£ä¸€ä¸‹ã€‚</p>
<p><a href="https://github.com/lynnic26/LynnNote/issues/1" target="_blank" rel="noopener">https://github.com/lynnic26/LynnNote/issues/1</a></p>
<p><br><br></p>
<h2 id="v-bindå’Œv-on"><a href="#v-bindå’Œv-on" class="headerlink" title="v-bindå’Œv-on"></a>v-bindå’Œv-on</h2><p><code>&lt;img v-bind:src=&quot;imgUrl&quot; alt=&quot;&quot;&gt;</code>ä¸­çš„<code>v-bind</code>å¯ä»¥ç®€å†™ä¸º<code>&lt;img :src=&quot;imgUrl&quot; alt=&quot;&quot;&gt;</code></p>
<p><br><br></p>
<h3 id="ç»‘å®šclass"><a href="#ç»‘å®šclass" class="headerlink" title="ç»‘å®šclass"></a>ç»‘å®šclass</h3><ol>
<li><p>ä½¿ç”¨ <strong>:class</strong> æ¥ç»‘å®šç±»åï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">    <span class="selector-class">.red</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: red</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;p :class=&apos;redClass&apos;&gt;peace!&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">   </span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        data: &#123;</span><br><span class="line">            redClass: &apos;red&apos;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">   </span><br><span class="line">    vm.$mount(&apos;#app&apos;)</span><br><span class="line">   </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ · p æ ‡ç­¾å°±æ·»åŠ ä¸Šäº†ä¸€ä¸ªåä¸º red çš„ç±»äº†ã€‚<br><br></p>
</li>
</ol>
<ol start="2">
<li><p>ç»“åˆ<strong>æ•°ç»„</strong>æ–¹å¼ç»‘å®šç±»åï¼š</p>
<p>å¦‚æœæƒ³è¦ç»™ä¸€ä¸ªæ ‡ç­¾ç»‘å®šå¤šä¸ªç±»åï¼Œ</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564384342505.png" alt="1564384342505"></p>
<p>æ­£ç¡®æ–¹å¼æ˜¯ä½¿ç”¨ã€æ•°ç»„ã€‘ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">"[redClass, bigClass]"</span>&gt;</span>peace!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>â€‹    è¿˜å¯ä»¥åœ¨æ•°ç»„ä¸­è¿›è¡Œåˆ¤æ–­è¿ç®—ï¼š</p>
<p>â€‹    <img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564385335421.png" alt="1564385335421"></p>
<p><br></p>
<ol start="3">
<li><p>ç»“åˆ<strong>å¯¹è±¡</strong>ç»‘å®šclassï¼š    </p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564386032576.png" alt="1564386032576"></p>
<p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564386210997.png" alt="1564386210997"></p>
</li>
</ol>
<p><br><br></p>
<h3 id="ç»‘å®šstyle"><a href="#ç»‘å®šstyle" class="headerlink" title="ç»‘å®šstyle"></a>ç»‘å®šstyle</h3><p>å°†æ ·å¼å†™è¿›ä¸€ä¸ªå¯¹è±¡èŠ±æ‹¬å·é‡Œé¢ï¼Œæ³¨æ„é”®å€¼å¯¹ä¸­çš„å€¼è¦ç”¨å¼•å·åŒ…èµ·æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p :style=&quot;&#123;width:&apos;100px&apos;,height:&apos;200px&apos;,backgroundColor:&apos;red&apos;&#125;&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥åœ¨dataä¸­å†™æ ·å¼å¯¹è±¡ï¼Œç„¶åç”¨<code>:style</code>ç»‘å®šï¼Œè¿™æ ·æ¯”è¾ƒæ¸…æ™°ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564386818920.png" alt="1564386818920"></p>
<p>å¦‚æœæƒ³è¦ç»™ä¸€ä¸ªæ ‡ç­¾ç»‘å®šä¸Šå¤šä¸ªæ ·å¼å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨æ•°ç»„ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564387087174.png" alt="1564387087174"></p>
<p>æ³¨æ„ä¸€ç‚¹æ˜¯åœ¨ä¸€ä¸ªæ ‡ç­¾å†…éƒ¨ï¼Œ<code>style</code>çš„æƒé‡ä½äº<code>:style</code>çš„æƒé‡ï¼Œå…ˆæ‰§è¡Œstyleçš„æ ·å¼ï¼Œç„¶åå†æ‰§è¡Œ<code>:style</code>çš„æ ·å¼ï¼Œé‡åˆ°ç›¸åŒçš„backgroundColor<code>:style</code>çš„æ ·å¼ä¼šè¦†ç›–<code>style</code>çš„ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1564387434614.png" alt="1564387434614"></p>
<p>p çš„èƒŒæ™¯é¢œè‰²ä¸ºred</p>
<p><br><br></p>
<h2 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h2><p><br><br></p>
<h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><p>å®ç°åŒå‘æ•°æ®ç»‘å®š</p>
<p>å¯ä»¥å®ç° v-model çš„è¡¨å•å…ƒç´ ï¼š</p>
<ul>
<li>input text</li>
<li>input checkbox</li>
<li>input radio</li>
<li>textarea</li>
<li>select</li>
</ul>
<p>ã€è¿™éƒ¨åˆ†çœ‹ä¸€ä¸‹æºç ã€‘</p>
<p><br><br><br></p>
<h1 id="å››ã€è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"><a href="#å››ã€è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦" class="headerlink" title="å››ã€è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"></a>å››ã€è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦</h1><h3 id="2-xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"><a href="#2-xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦" class="headerlink" title="2.xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"></a><a href="https://cn.vuejs.org/v2/guide/events.html#é”®å€¼ä¿®é¥°ç¬¦" target="_blank" rel="noopener">2.xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦</a></h3><ol>
<li>é€šè¿‡<code>Vue.config.keyCodes.åç§° = æŒ‰é”®å€¼</code>æ¥è‡ªå®šä¹‰æ¡ˆä»¶ä¿®é¥°ç¬¦çš„åˆ«åï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.config.keyCodes.f2 = 113;</span><br></pre></td></tr></table></figure>
<ol>
<li>ä½¿ç”¨è‡ªå®šä¹‰çš„æŒ‰é”®ä¿®é¥°ç¬¦ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;name&quot; @keyup.f2=&quot;add&quot;&gt;</span><br></pre></td></tr></table></figure>
<p><br><br><br></p>
<h1 id="äº”ã€directiveè‡ªå®šä¹‰æŒ‡ä»¤"><a href="#äº”ã€directiveè‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="äº”ã€directiveè‡ªå®šä¹‰æŒ‡ä»¤"></a><a href="https://cn.vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener">äº”ã€directiveè‡ªå®šä¹‰æŒ‡ä»¤</a></h1><ol>
<li>è‡ªå®šä¹‰å…¨å±€å’Œå±€éƒ¨çš„ è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤ v-focusï¼Œä¸ºç»‘å®šçš„å…ƒç´ è‡ªåŠ¨è·å–ç„¦ç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">Vue.directive(&apos;focus&apos;, &#123;</span><br><span class="line"></span><br><span class="line">  inserted: function (el) &#123; // inserted è¡¨ç¤ºè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨</span><br><span class="line"></span><br><span class="line">    el.focus();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰å±€éƒ¨æŒ‡ä»¤ v-color å’Œ v-font-weightï¼Œä¸ºç»‘å®šçš„å…ƒç´ è®¾ç½®æŒ‡å®šçš„å­—ä½“é¢œè‰² å’Œ å­—ä½“ç²—ç»†ï¼š</span><br><span class="line"></span><br><span class="line">  directives: &#123;</span><br><span class="line"></span><br><span class="line">    color: &#123; // ä¸ºå…ƒç´ è®¾ç½®æŒ‡å®šçš„å­—ä½“é¢œè‰²</span><br><span class="line"></span><br><span class="line">      bind(el, binding) &#123;</span><br><span class="line"></span><br><span class="line">        el.style.color = binding.value;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &apos;font-weight&apos;: function (el, binding2) &#123; // è‡ªå®šä¹‰æŒ‡ä»¤çš„ç®€å†™å½¢å¼ï¼Œç­‰åŒäºå®šä¹‰äº† bind å’Œ update ä¸¤ä¸ªé’©å­å‡½æ•°</span><br><span class="line"></span><br><span class="line">      el.style.fontWeight = binding2.value;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>è‡ªå®šä¹‰æŒ‡ä»¤çš„ä½¿ç”¨æ–¹å¼ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;searchName&quot; v-focus v-color=&quot;&apos;red&apos;&quot; v-font-weight=&quot;900&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>ã€æ¸¡ä¸€æ¡ˆä¾‹è§æºç å’Œè§†é¢‘ã€‘</p>
<p>F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\9. directive\vue.html</p>
<p><br><br><br></p>
<h1 id="å…­ã€filterè¿‡æ»¤å™¨"><a href="#å…­ã€filterè¿‡æ»¤å™¨" class="headerlink" title="å…­ã€filterè¿‡æ»¤å™¨"></a>å…­ã€filterè¿‡æ»¤å™¨</h1><p>æ¦‚å¿µï¼šVue.js å…è®¸ä½ è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œ<strong>å¯è¢«ç”¨ä½œä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–</strong>ã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š<strong>mustache æ’å€¼å’Œ v-bind è¡¨è¾¾å¼</strong>ã€‚è¿‡æ»¤å™¨åº”è¯¥è¢«æ·»åŠ åœ¨ JavaScript è¡¨è¾¾å¼çš„å°¾éƒ¨ï¼Œç”±â€œç®¡é“â€ç¬¦æŒ‡ç¤ºï¼›<br><br></p>
<h3 id="ç§æœ‰è¿‡æ»¤å™¨"><a href="#ç§æœ‰è¿‡æ»¤å™¨" class="headerlink" title="ç§æœ‰è¿‡æ»¤å™¨"></a>ç§æœ‰è¿‡æ»¤å™¨</h3><ol>
<li>HTMLå…ƒç´ ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;&#123;&#123;item.ctime | dataFormat(&apos;yyyy-mm-dd&apos;)&#125;&#125;&lt;/td&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>ç§æœ‰ <code>filters</code> å®šä¹‰æ–¹å¼ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">filters: &#123; // ç§æœ‰å±€éƒ¨è¿‡æ»¤å™¨ï¼Œåªèƒ½åœ¨ å½“å‰ VM å¯¹è±¡æ‰€æ§åˆ¶çš„ View åŒºåŸŸè¿›è¡Œä½¿ç”¨</span><br><span class="line"></span><br><span class="line">    dataFormat(input, pattern = &quot;&quot;) &#123; // åœ¨å‚æ•°åˆ—è¡¨ä¸­ é€šè¿‡ pattern=&quot;&quot; æ¥æŒ‡å®šå½¢å‚é»˜è®¤å€¼ï¼Œé˜²æ­¢æŠ¥é”™</span><br><span class="line"></span><br><span class="line">      var dt = new Date(input);</span><br><span class="line"></span><br><span class="line">      // è·å–å¹´æœˆæ—¥</span><br><span class="line"></span><br><span class="line">      var y = dt.getFullYear();</span><br><span class="line"></span><br><span class="line">      var m = (dt.getMonth() + 1).toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line">      var d = dt.getDate().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      // å¦‚æœ ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè½¬ä¸ºå°å†™ä¹‹åï¼Œç­‰äº yyyy-mm-ddï¼Œé‚£ä¹ˆå°±è¿”å› å¹´-æœˆ-æ—¥</span><br><span class="line"></span><br><span class="line">      // å¦åˆ™ï¼Œå°±è¿”å›  å¹´-æœˆ-æ—¥ æ—¶ï¼šåˆ†ï¼šç§’</span><br><span class="line"></span><br><span class="line">      if (pattern.toLowerCase() === &apos;yyyy-mm-dd&apos;) &#123;</span><br><span class="line"></span><br><span class="line">        return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125;`;</span><br><span class="line"></span><br><span class="line">      &#125; else &#123;</span><br><span class="line"></span><br><span class="line">        // è·å–æ—¶åˆ†ç§’</span><br><span class="line"></span><br><span class="line">        var hh = dt.getHours().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line">        var mm = dt.getMinutes().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line">        var ss = dt.getSeconds().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125; $&#123;hh&#125;:$&#123;mm&#125;:$&#123;ss&#125;`;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨ES6ä¸­çš„å­—ç¬¦ä¸²æ–°æ–¹æ³• String.prototype.padStart(maxLength, fillString=â€™â€™) æˆ– String.prototype.padEnd(maxLength, fillString=â€™â€™)æ¥å¡«å……å­—ç¬¦ä¸²ï¼›</p>
</blockquote>
<p><br><br></p>
<h3 id="å…¨å±€è¿‡æ»¤å™¨"><a href="#å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="å…¨å±€è¿‡æ»¤å™¨"></a>å…¨å±€è¿‡æ»¤å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">// å®šä¹‰ä¸€ä¸ªå…¨å±€è¿‡æ»¤å™¨</span><br><span class="line"></span><br><span class="line">Vue.filter(&apos;dataFormat&apos;, function (input, pattern = &apos;&apos;) &#123;</span><br><span class="line"></span><br><span class="line">  var dt = new Date(input);</span><br><span class="line"></span><br><span class="line">  // è·å–å¹´æœˆæ—¥</span><br><span class="line"></span><br><span class="line">  var y = dt.getFullYear();</span><br><span class="line"></span><br><span class="line">  var m = (dt.getMonth() + 1).toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line">  var d = dt.getDate().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // å¦‚æœ ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè½¬ä¸ºå°å†™ä¹‹åï¼Œç­‰äº yyyy-mm-ddï¼Œé‚£ä¹ˆå°±è¿”å› å¹´-æœˆ-æ—¥</span><br><span class="line"></span><br><span class="line">  // å¦åˆ™ï¼Œå°±è¿”å›  å¹´-æœˆ-æ—¥ æ—¶ï¼šåˆ†ï¼šç§’</span><br><span class="line"></span><br><span class="line">  if (pattern.toLowerCase() === &apos;yyyy-mm-dd&apos;) &#123;</span><br><span class="line"></span><br><span class="line">    return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125;`;</span><br><span class="line"></span><br><span class="line">  &#125; else &#123;</span><br><span class="line"></span><br><span class="line">    // è·å–æ—¶åˆ†ç§’</span><br><span class="line"></span><br><span class="line">    var hh = dt.getHours().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line">    var mm = dt.getMinutes().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line">    var ss = dt.getSeconds().toString().padStart(2, &apos;0&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125; $&#123;hh&#125;:$&#123;mm&#125;:$&#123;ss&#125;`;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šå½“æœ‰å±€éƒ¨å’Œå…¨å±€ä¸¤ä¸ªåç§°ç›¸åŒçš„è¿‡æ»¤å™¨æ—¶å€™ï¼Œä¼šä»¥å°±è¿‘åŸåˆ™è¿›è¡Œè°ƒç”¨ï¼Œå³ï¼šå±€éƒ¨è¿‡æ»¤å™¨ä¼˜å…ˆäºå…¨å±€è¿‡æ»¤å™¨è¢«è°ƒç”¨ï¼</p>
</blockquote>
<p>ã€æ¸¡ä¸€æ¡ˆä¾‹è§æºç å’Œè§†é¢‘ã€‘</p>
<p>F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\10. filter\vue.html</p>
<p><br><br><br></p>
<h1 id="ä¸ƒã€elã€-templateã€render"><a href="#ä¸ƒã€elã€-templateã€render" class="headerlink" title="ä¸ƒã€elã€ templateã€render"></a>ä¸ƒã€elã€ templateã€render</h1><p>æŒ‚è½½è¿‡ç¨‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/æŒ‚è½½æµç¨‹.jpg" alt=""></p>
<p>ã€æ¸¡ä¸€æ¡ˆä¾‹è§æºç å’Œè§†é¢‘ã€‘</p>
<p>F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\11. elã€templateã€render\vue.html</p>
<p><br><br><br></p>
<h1 id="å…«ã€vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#å…«ã€vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="å…«ã€vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ"></a><a href="https://cn.vuejs.org/v2/guide/instance.html#å®ä¾‹ç”Ÿå‘½å‘¨æœŸ" target="_blank" rel="noopener">å…«ã€vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ</a></h1><p><a href="https://ws1.sinaimg.cn/large/006ttwEMly1g2hbe8i32jj31xe25qtku.jpg" target="_blank" rel="noopener">[æŸ¥çœ‹å¤§å›¾]</a><img src="https://ws1.sinaimg.cn/large/006ttwEMly1g2hbe8i32jj31xe25qtku.jpg" alt=""></p>
<ul>
<li>ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼šä»Vueå®ä¾‹åˆ›å»ºã€è¿è¡Œã€åˆ°é”€æ¯æœŸé—´ï¼Œæ€»æ˜¯ä¼´éšç€å„ç§å„æ ·çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ï¼Œç»Ÿç§°ä¸ºç”Ÿå‘½å‘¨æœŸï¼</li>
<li><a href="https://cn.vuejs.org/v2/api/#é€‰é¡¹-ç”Ÿå‘½å‘¨æœŸé’©å­" target="_blank" rel="noopener">ç”Ÿå‘½å‘¨æœŸé’©å­</a>ï¼šå°±æ˜¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„åˆ«åè€Œå·²ï¼›</li>
<li>ç”Ÿå‘½å‘¨æœŸé’©å­ = ç”Ÿå‘½å‘¨æœŸå‡½æ•° = ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li>
<li><p>ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ†ç±»ï¼š</p>
</li>
<li><p>åˆ›å»ºæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p>
</li>
<li><p>beforeCreateï¼šå®ä¾‹åˆšåœ¨å†…å­˜ä¸­è¢«åˆ›å»ºå‡ºæ¥ï¼Œæ­¤æ—¶ï¼Œè¿˜æ²¡æœ‰åˆå§‹åŒ–å¥½ data å’Œ methods å±æ€§</p>
</li>
<li>createdï¼šå®ä¾‹å·²ç»åœ¨å†…å­˜ä¸­åˆ›å»ºOKï¼Œæ­¤æ—¶ data å’Œ methods å·²ç»åˆ›å»ºOKï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹ ç¼–è¯‘æ¨¡æ¿</li>
<li>beforeMountï¼šæ­¤æ—¶å·²ç»å®Œæˆäº†æ¨¡æ¿çš„ç¼–è¯‘ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æŒ‚è½½åˆ°é¡µé¢ä¸­</li>
<li><p>mountedï¼šæ­¤æ—¶ï¼Œå·²ç»å°†ç¼–è¯‘å¥½çš„æ¨¡æ¿ï¼ŒæŒ‚è½½åˆ°äº†é¡µé¢æŒ‡å®šçš„å®¹å™¨ä¸­æ˜¾ç¤º</p>
</li>
<li><p>è¿è¡ŒæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p>
</li>
<li><p>beforeUpdateï¼šçŠ¶æ€æ›´æ–°ä¹‹å‰æ‰§è¡Œæ­¤å‡½æ•°ï¼Œ æ­¤æ—¶ data ä¸­çš„çŠ¶æ€å€¼æ˜¯æœ€æ–°çš„ï¼Œä½†æ˜¯ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œå› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹é‡æ–°æ¸²æŸ“DOMèŠ‚ç‚¹</p>
</li>
<li><p>updatedï¼šå®ä¾‹æ›´æ–°å®Œæ¯•ä¹‹åè°ƒç”¨æ­¤å‡½æ•°ï¼Œæ­¤æ—¶ data ä¸­çš„çŠ¶æ€å€¼ å’Œ ç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ•°æ®ï¼Œéƒ½å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œç•Œé¢å·²ç»è¢«é‡æ–°æ¸²æŸ“å¥½äº†ï¼</p>
</li>
<li><p>é”€æ¯æœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p>
</li>
<li><p>beforeDestroyï¼šå®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚</p>
</li>
<li>destroyedï¼šVue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚</li>
</ul>
<p><br><br><br></p>
<h1 id="ä¹ã€è®¡ç®—å±æ€§computedå’Œç›‘å¬å™¨watch"><a href="#ä¹ã€è®¡ç®—å±æ€§computedå’Œç›‘å¬å™¨watch" class="headerlink" title="ä¹ã€è®¡ç®—å±æ€§computedå’Œç›‘å¬å™¨watch"></a>ä¹ã€è®¡ç®—å±æ€§computedå’Œç›‘å¬å™¨watch</h1><p>æ¨¡æ¿å†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯è®¾è®¡å®ƒä»¬çš„åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ä¼šè®©æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ </p>
<p>å½“æˆ‘æƒ³è¦æ‹¼æ¥nameï¼Œlooksï¼Œå’Œageæ—¶ï¼Œä½¿ç”¨æ¨¡æ¿è¡¨è¾¾å¼å¾ˆéº»çƒ¦ã€‚ç›´æ¥å†™å…¥describeå±æ€§ä¸­æœ‰æ˜¾å¾—ä»£ç äº¢ä½™ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv1"</span>&gt;</span>&#123;&#123;name&#125;&#125; &#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv2"</span>&gt;</span>&#123;&#123;name+' '+age&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv3"</span>&gt;</span>&#123;&#123;describe&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#dv"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            name: <span class="string">"dunteng"</span>,</span><br><span class="line">            age: <span class="string">"18"</span>,</span><br><span class="line">            describe: <span class="string">"dunteng 18"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š<img src="https://ws1.sinaimg.cn/large/006ttwEMgy1g2czp6tk1ej303o02dmwx.jpg" alt=""></p>
<p>ä»¥ä¸Šä¸‰ç§æ–¹æ³•éƒ½å¯ä»¥ï¼Œä½†æ˜¯å¹¶ä¸çµæ´»ã€‚</p>
<p>åº”è¯¥ç”¨methodsä¸­çš„æ–¹æ³•æ¥å®ç°ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv1"</span>&gt;</span>&#123;&#123;name&#125;&#125; &#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv2"</span>&gt;</span>&#123;&#123;name+' '+age&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv3"</span>&gt;</span>&#123;&#123;describe()&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>   //æ‹¬å·ä¸å¯ä¸¢1</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#dv"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            name: <span class="string">"dunteng"</span>,</span><br><span class="line">            age: <span class="string">"18"</span>,</span><br><span class="line">            height: <span class="number">180</span>,</span><br><span class="line">            <span class="comment">// describe: "dunteng 18"  dataä¸­çš„å˜é‡å‘½åå’Œmethodsä¸­çš„æ–¹æ³•ä¸å¯åŒå</span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            describe()&#123;</span><br><span class="line">            	<span class="built_in">console</span>.log(<span class="string">"æ–¹æ³•describeè¢«æ‰§è¡Œäº†"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.name+<span class="string">" "</span>+<span class="keyword">this</span>.age;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°è¿”å›äº† nameå’Œageè¿™ä¸¤ä¸ªå±æ€§ï¼Œå¹¶ä¸”æ¸²æŸ“åˆ°é¡µé¢ </p>
<p>å¦‚æ­¤ç›¸æ¯”ç›´æ¥ç”¨æ¨¡æ¿è¯­æ³•æ¥æ‹¼æ¥ç¡®å®ç®€æ´å¾ˆå¤šã€‚</p>
<p><br><br></p>
<p>ã€è¿™é‡Œéœ€è¦çŸ¥é“ã€‘</p>
<p>åœ¨æ§åˆ¶å°ä¸Šä¿®æ”¹äº†è¿™ä¸¤ä¸ªå±æ€§çš„å…¶ä¸­ä¸€ä¸ªä¹‹åï¼Œå‡½æ•°ä¼šè¢«å†æ‰§è¡Œä¸€æ¬¡ï¼Œæ¯”å¦‚æˆ‘åœ¨æ§åˆ¶å°è¾“å…¥<code>vm.name = &quot;hh&quot;</code>åï¼Œ é¡µé¢ä¸Šçš„<code>dunteng 18</code>ä¼šç«‹å³å˜æˆ<code>hh 18</code>å¹¶å†æ‰“å°ä¸€æ¬¡consoleè¯­å¥ã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼Œ<strong>å½“è§†å›¾é‡æ–°æ¸²æŸ“äº†å°±ä¼šå†æ‰§è¡Œä¸€æ¬¡è¯¥å‡½æ•°ã€‚</strong>å¦å¤–å½“æˆ‘ä»¬ä¿®æ”¹ä¸describeæ–¹æ³•æ— å…³çš„å˜é‡ä¸”è¯¥å˜é‡æ²¡æœ‰è¢«æ¸²æŸ“åˆ°è¯•å›¾ä¸Šå¦‚heightæ—¶ï¼Œä¸ä¼šè§¦å‘describeæ–¹æ³•ï¼Œä½†æ˜¯ä¸€æ—¦è¿™ä¸ªä¸describeæ–¹æ³•æ— å…³çš„å˜é‡æ˜¯æœ‰æ¸²æŸ“åˆ°è§†å›¾é‡Œçš„ï¼Œåˆ™ç…§æ ·è§¦å‘describeæ–¹æ³•ã€‚</p>
<p><strong>å› æ­¤æˆ‘ä»¬ä¿®æ”¹å±æ€§å½±å“è§†å›¾æ¸²æŸ“çš„åŒæ—¶ï¼Œä¼šæ¶‰åŠåˆ°é‡æ–°åŠ è½½æ— å…³çš„å‡½æ•°çš„é—®é¢˜ï¼Œå¦‚æ­¤å¯¹æ€§èƒ½ååˆ†ä¸å‹å¥½ã€‚</strong></p>
<p><br></p>
<p><strong>è§£å†³æ–¹æ³•ä¸€ï¼šwatch</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv3"</span>&gt;</span>&#123;&#123;describe&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#dv"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            name: <span class="string">"dunteng"</span>,</span><br><span class="line">            age: <span class="string">"18"</span>,</span><br><span class="line">            height: <span class="number">180</span>,</span><br><span class="line">            describe: <span class="string">"dunteng 18"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        watch: &#123;</span><br><span class="line">            <span class="comment">// ç›‘å¬nameçš„å˜åŒ–</span></span><br><span class="line">            name()&#123;</span><br><span class="line">                <span class="keyword">this</span>.describe = <span class="keyword">this</span>.name + <span class="string">" "</span> +<span class="keyword">this</span>.age;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// ç›‘å¬ageçš„å˜åŒ–</span></span><br><span class="line">            age()&#123;</span><br><span class="line">                <span class="keyword">this</span>.describe = <span class="keyword">this</span>.name + <span class="string">" "</span> +<span class="keyword">this</span>.age;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹å¼è™½ç„¶è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸æ–¹ä¾¿ï¼Œä»£ç å†—ä½™ã€‚</p>
<p><br></p>
<p><strong>è§£å†³æ–¹æ³•äºŒï¼š computed</strong></p>
<p>è¿™æ˜¯æœ€ä¼˜çš„è§£å†³æ–¹æ³•ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv3"</span>&gt;</span>&#123;&#123;describe&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#dv"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            name: <span class="string">"dunteng"</span>,</span><br><span class="line">            age: <span class="string">"18"</span>,</span><br><span class="line">            height: <span class="number">180</span></span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">               describe()&#123;</span><br><span class="line">                   <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">" "</span> + <span class="keyword">this</span>.age;</span><br><span class="line">               &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>computedé‡Œé¢é™¤äº†å¯ä»¥åƒä¸Šé¢é‚£æ ·å†™æˆæ–¹æ³•ï¼ˆå®é™…ä¸Šå¹¶ä¸æ˜¯æ–¹æ³•ï¼‰çš„æ ·å­ï¼Œè¿˜å¯ä»¥å†™æˆå¯¹è±¡ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv3"</span>&gt;</span>&#123;&#123;describe&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#dv"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            name: <span class="string">"dunteng"</span>,</span><br><span class="line">            age: <span class="string">"18"</span>,</span><br><span class="line">            height: <span class="number">180</span></span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            <span class="comment">//    describe()&#123;</span></span><br><span class="line">            <span class="comment">//        return this.name + " " + this.age;</span></span><br><span class="line">            <span class="comment">//    &#125;</span></span><br><span class="line">            describe: &#123;</span><br><span class="line">            <span class="comment">//å½“æˆ‘ä»¬è·å¾—è¿™ä¸ªdescribeçš„æ—¶å€™ï¼ˆæ¸²æŸ“çš„æ—¶å€™ï¼‰ä¼šæ‰§è¡Œgetæ–¹æ³•</span></span><br><span class="line">                get()&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">" "</span> + <span class="keyword">this</span>.age;</span><br><span class="line">                &#125;,</span><br><span class="line">                set()&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"describeè¢«ä¿®æ”¹äº†"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><br><br></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/006ttwEMgy1g2d14c4gstj308c076jrd.jpg" alt=""></p>
<p><br><br>ã€æ³¨æ„ã€‘ï¼šä¸Šè¿°ä¾‹å­ä¸­ï¼Œå½“<code>vm.name</code>  å’Œ<code>vm.age</code>ä¿®æ”¹äº†çš„æ—¶å€™ï¼Œå› ä¸ºæœ‰computedç›‘å¬ï¼Œæ‰€ä»¥åœ¨ä¿®æ”¹çš„åŒæ—¶é¡µé¢çš„å†…å®¹ä¹Ÿç›¸åº”åœ°ä¿®æ”¹äº†ã€‚ä½†æ˜¯å½“<code>vm.describe</code>æ•´ä¸ªè¢«ä¿®æ”¹çš„æ—¶å€™ï¼Œé¡µé¢æ—¶æ²¡æœ‰åŒæ­¥æ¸²æŸ“æ›´æ–°çš„ï¼Œæ‰€ä»¥è¿˜è¦å¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv3"</span>&gt;</span>&#123;&#123;describe&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dv4"</span>&gt;</span>&#123;&#123;height&#125;&#125;cm<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#dv"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            name: <span class="string">"dunteng"</span>,</span><br><span class="line">            age: <span class="string">"18"</span>,</span><br><span class="line">            height: <span class="number">180</span></span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            <span class="comment">//    describe()&#123;</span></span><br><span class="line">            <span class="comment">//        return this.name + " " + this.age;</span></span><br><span class="line">            <span class="comment">//    &#125;</span></span><br><span class="line">            describe: &#123;</span><br><span class="line">                get()&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">" "</span> + <span class="keyword">this</span>.age;</span><br><span class="line">                &#125;,</span><br><span class="line">                set(value)&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"describeè¢«ä¿®æ”¹äº†"</span>);</span><br><span class="line">                    <span class="keyword">const</span> arr = value.split(<span class="string">" "</span>);</span><br><span class="line">                    <span class="built_in">console</span>.log(arr[<span class="number">0</span>]);</span><br><span class="line">                    <span class="built_in">console</span>.log(arr[<span class="number">1</span>]);</span><br><span class="line">                    <span class="keyword">this</span>.name = arr[<span class="number">0</span>];</span><br><span class="line">                    <span class="keyword">this</span>.age = arr[<span class="number">1</span>]; </span><br><span class="line">                    <span class="keyword">if</span>(arr[<span class="number">0</span>]==<span class="string">"å¤§å¸…å“¥"</span>)&#123;</span><br><span class="line">                        <span class="keyword">this</span>.height = <span class="number">200</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ–°ç‰ˆæ¸¡ä¸€ä»£ç </strong>ï¼šF:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\13. è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨\vue.html</p>
<p><strong>æ€å¦æ–‡ç« </strong>ï¼š<a href="https://segmentfault.com/a/1190000012948175" target="_blank" rel="noopener">https://segmentfault.com/a/1190000012948175</a></p>
<p><br><br><br></p>
<h1 id="åã€ç»„ä»¶"><a href="#åã€ç»„ä»¶" class="headerlink" title="åã€ç»„ä»¶"></a>åã€ç»„ä»¶</h1><h2 id="å…¨å±€ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶" class="headerlink" title="å…¨å±€ç»„ä»¶"></a>å…¨å±€ç»„ä»¶</h2><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567510618984.png" alt="1567510618984"></p>
<p>è¿™æ ·æ³¨å†Œäº†ä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼Œåä¸ºlin-duntengï¼Œä½¿ç”¨æ—¶ç›´æ¥æ ‡ç­¾åŒ–ã€‚</p>
<p>ä¹Ÿå¯ä»¥å†™æˆå°é©¼å³°å¼ï¼šlinDuntengï¼Œæ ‡ç­¾åŒ–ä¸º<code>&lt;lin-Dunteng&gt;&lt;lin-Dunteng&gt;</code>æˆ–è€…<code>&lt;lin-dunteng&gt;&lt;/lin-dunteng&gt;</code>ï¼Œä½†æ˜¯ä¸èƒ½å†™æˆ<code>&lt;linDunteng&gt;&lt;/linDunteng&gt;</code></p>
<p>ä¹Ÿå¯ä»¥å†™æˆå¤§é©¼å³°å¼ï¼šLinDuntengï¼Œæ ‡ç­¾åŒ–ä¸º<code>&lt;lin-Dunteng&gt;&lt;lin-Dunteng&gt;</code>æˆ–è€…<code>&lt;lin-dunteng&gt;&lt;/lin-dunteng&gt;</code>æˆ–è€…<code>&lt;Lin-dunteng&gt;&lt;/Lin-dunteng&gt;</code>æˆ–è€…<code>&lt;Lin-Dunteng&gt;&lt;/Lin-Dunteng&gt;</code>, ä½†æ˜¯ä¸èƒ½å†™æˆ<code>&lt;LinDunteng&gt;&lt;/LinDunteng&gt;</code></p>
<p>ã€æé†’ã€‘ä¸è¿‡ä»¥ä¸Šæƒ…å†µæ˜¯é’ˆå¯¹.htmlæ–‡ä»¶è€Œè¨€çš„ï¼Œä¹‹ååœ¨.vueæ–‡ä»¶ä¸­å°±æ²¡è¿™ä¹ˆå¤šç¦å¿Œï¼Œç›¸å¯¹æ¯”è¾ƒè‡ªç”±å®½æ³›ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯åœ¨.htmlæ–‡ä»¶ä¸­æœ€å¥½ä½¿ç”¨åŒæ ‡ç­¾ï¼Œä½¿ç”¨å•æ ‡ç­¾å¯èƒ½ä¼šæœ‰äº›bugï¼Œä½†æ˜¯åœ¨.vueæ–‡ä»¶ä¸­å°±æ²¡äº‹</p>
<p>ã€é—®é¢˜ã€‘ï¼šä¸ºä»€ä¹ˆç»„ä»¶ä¸­çš„dataè¦é€šè¿‡å‡½æ•°è¿”å›å¯¹è±¡ï¼Ÿ</p>
<p>ç­”ï¼šå½“ä¸€ä¸ªç»„ä»¶è¢«å®šä¹‰ï¼Œ data å¿…é¡»å£°æ˜ä¸ºè¿”å›ä¸€ä¸ªåˆå§‹æ•°æ®å¯¹è±¡çš„å‡½æ•°ï¼Œå› ä¸ºç»„ä»¶å¯èƒ½è¢«ç”¨æ¥åˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚å¦‚æœ data ä»ç„¶æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å¯¹è±¡ï¼Œåˆ™æ‰€æœ‰çš„å®ä¾‹å°†å…±äº«å¼•ç”¨åŒä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼é€šè¿‡æä¾› data å‡½æ•°ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹åï¼Œæˆ‘ä»¬èƒ½å¤Ÿè°ƒç”¨ data å‡½æ•°ï¼Œä»è€Œè¿”å›åˆå§‹æ•°æ®çš„ä¸€ä¸ªå…¨æ–°å‰¯æœ¬æ•°æ®å¯¹è±¡ã€‚</p>
<p>å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯ï¼š</p>
<p>ç±»æ¯”ä¸å¼•ç”¨æ•°æ®ç±»å‹ã€‚å¦‚æœä¸ç”¨function return æ¯ä¸ªç»„ä»¶çš„dataéƒ½æ˜¯å†…å­˜çš„åŒä¸€ä¸ªåœ°å€ï¼Œé‚£ä¸€ä¸ªæ•°æ®æ”¹å˜å…¶ä»–ä¹Ÿæ”¹å˜äº†ï¼Œè¿™å½“ç„¶å°±ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ç”¨function return å…¶å®å°±ç›¸å½“äºç”³æ˜äº†æ–°çš„å˜é‡ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œè‡ªç„¶å°±ä¸ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼›jsåœ¨èµ‹å€¼objectå¯¹è±¡æ—¶ï¼Œæ˜¯ç›´æ¥ä¸€ä¸ªç›¸åŒçš„å†…å­˜åœ°å€ã€‚æ‰€ä»¥ä¸ºäº†æ¯ä¸ªç»„ä»¶çš„dataç‹¬ç«‹ï¼Œé‡‡ç”¨äº†è¿™ç§æ–¹å¼ã€‚<br>å¦‚æœä¸æ˜¯ç»„ä»¶çš„è¯ï¼Œæ­£å¸¸dataçš„å†™æ³•å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚dataï¼š{ msg ï¼š â€˜ ä¸‹è½½ â€˜ }ï¼Œä½†ç”±äºç»„ä»¶æ˜¯ä¼šåœ¨å¤šä¸ªåœ°æ–¹å¼•ç”¨<br>çš„ï¼ŒJSä¸­ç›´æ¥å…±äº«å¯¹è±¡ä¼šé€ æˆå¼•ç”¨ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯è¯´ä¿®æ”¹äº†msgåæ‰€æœ‰æŒ‰é’®çš„msgéƒ½ä¼šè·Ÿç€ä¿®æ”¹ï¼Œæ‰€ä»¥è¿™é‡Œç”¨functionæ¥æ¯æ¬¡è¿”å›ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚</p>
<p><br><br></p>
<h2 id="å±€éƒ¨ç»„ä»¶"><a href="#å±€éƒ¨ç»„ä»¶" class="headerlink" title="å±€éƒ¨ç»„ä»¶"></a>å±€éƒ¨ç»„ä»¶</h2><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567511594805.png" alt="1567511594805"></p>
<p>è¯¥å±€éƒ¨ç»„ä»¶åªèƒ½åœ¨ç›¸åº”çš„elä¸­ä½¿ç”¨</p>
<p><br><br></p>
<h2 id="åŠ¨æ€ç»„ä»¶å’Œæ’æ§½-v-slot"><a href="#åŠ¨æ€ç»„ä»¶å’Œæ’æ§½-v-slot" class="headerlink" title="åŠ¨æ€ç»„ä»¶å’Œæ’æ§½ v-slot"></a>åŠ¨æ€ç»„ä»¶å’Œæ’æ§½ v-slot</h2><h3 id="åŠ¨æ€ç»„ä»¶"><a href="#åŠ¨æ€ç»„ä»¶" class="headerlink" title="åŠ¨æ€ç»„ä»¶"></a>åŠ¨æ€ç»„ä»¶</h3><p>å…³é”®ä¸º<code>&lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;</code>å’Œ<code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567668494678.png" alt="1567668494678"></p>
<p><br><br></p>
<h3 id="æ’æ§½"><a href="#æ’æ§½" class="headerlink" title="æ’æ§½"></a>æ’æ§½</h3><p><strong>ã€åŒ¿åæ’æ§½ã€‘</strong></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567668892295.png" alt="1567668892295"></p>
<p><br><br></p>
<p><strong>ã€å…·åæ’æ§½ã€‘</strong></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567669076852.png" alt="1567669076852"></p>
<p><br><br><strong>ã€ä½œç”¨åŸŸæ’æ§½ã€‘</strong></p>
<p>è¯¦è§F:\æ¸¡ä¸€å‰ç«¯è¯¾\0æˆ‘çš„å­¦ä¹ \VUE\ä¸Šè¯¾å­¦ä¹ ä»£ç \Vueå…¨å®¶æ¡¶ä¸€\09åŠ¨æ€ç»„ä»¶ä¸æ’æ§½\ä½œç”¨åŸŸæ’æ§½01.html</p>
<p>å’ŒF:\æ¸¡ä¸€å‰ç«¯è¯¾\0æˆ‘çš„å­¦ä¹ \VUE\ä¸Šè¯¾å­¦ä¹ ä»£ç \Vueå…¨å®¶æ¡¶ä¸€\09åŠ¨æ€ç»„ä»¶ä¸æ’æ§½\ä½œç”¨åŸŸæ’æ§½02.html</p>
<p>å’Œ<a href="https://ke.qq.com/webcourse/index.html#cid=288781&amp;term_id=100342071&amp;taid=2943852189345805&amp;type=1024&amp;vid=l14309p5itq" target="_blank" rel="noopener">https://ke.qq.com/webcourse/index.html#cid=288781&amp;term_id=100342071&amp;taid=2943852189345805&amp;type=1024&amp;vid=l14309p5itq</a></p>
<p><br><br></p>
<h2 id="ç»„ä»¶ä¼ å€¼"><a href="#ç»„ä»¶ä¼ å€¼" class="headerlink" title="ç»„ä»¶ä¼ å€¼"></a>ç»„ä»¶ä¼ å€¼</h2><p>åˆ©ç”¨å±æ€§çš„æ–¹å¼ä¼ å€¼</p>
<h3 id="ç»„ä»¶ä¼ é€’æ™®é€šçš„å€¼"><a href="#ç»„ä»¶ä¼ é€’æ™®é€šçš„å€¼" class="headerlink" title="ç»„ä»¶ä¼ é€’æ™®é€šçš„å€¼"></a>ç»„ä»¶ä¼ é€’æ™®é€šçš„å€¼</h3><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567512737130.png" alt="1567512737130"></p>
<p><br><br></p>
<h3 id="ç»„ä»¶ä¼ é€’dataä¸­çš„å€¼ï¼Œçˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶"><a href="#ç»„ä»¶ä¼ é€’dataä¸­çš„å€¼ï¼Œçˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶" class="headerlink" title="ç»„ä»¶ä¼ é€’dataä¸­çš„å€¼ï¼Œçˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶"></a>ç»„ä»¶ä¼ é€’dataä¸­çš„å€¼ï¼Œçˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶</h3><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567513134224.png" alt="1567513134224"></p>
<p>ä»¥ä¸Šçš„<code>props</code>éƒ½æ˜¯ä¸€ä¸ªæ•°ç»„çš„å½¢å¼ï¼Œå®ƒè¿˜å¯ä»¥å†™æˆä¸€ä¸ªå¯¹è±¡çš„å½¢å¼ï¼Œè€Œä¸”æœ‰å¤šä¸ªå±æ€§ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567514346664.png" alt="1567514346664"></p>
<p>æ•°ç»„å’Œå¯¹è±¡è¿™ä¸¤ä¸ªå¼•ç”¨ç±»å‹ï¼Œdefaultéœ€è¦å†™æˆä¸€ä¸ªå‡½æ•°çš„å½¢å¼ã€‚</p>
<p>ã€ä¸€ä¸ªå°ç»ƒä¹ ã€‘ï¼š</p>
<p>F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\15. ç»„ä»¶æ•°æ®ä¼ é€’&amp;å±æ€§æ ¡éªŒ</p>
<p><br><br></p>
<h3 id="å¤šå±‚çˆ¶ä¼ å­é€šä¿¡"><a href="#å¤šå±‚çˆ¶ä¼ å­é€šä¿¡" class="headerlink" title="å¤šå±‚çˆ¶ä¼ å­é€šä¿¡"></a>å¤šå±‚çˆ¶ä¼ å­é€šä¿¡</h3><p>ã€åœºæ™¯ã€‘ï¼š çˆ¶ç»„ä»¶è¦ä¼ å€¼ç»™å­ç»„ä»¶å’Œå­™å­ç»„ä»¶ï¼ˆå­ç»„ä»¶çš„å­ç»„ä»¶ï¼‰</p>
<p>####ã€æ–¹æ¡ˆä¸€ã€‘ä¸¤å±‚çš„çˆ¶ä¼ å­é€šä¿¡ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567519232543.png" alt="1567519232543"></p>
<p><br><br></p>
<h4 id="ã€æ–¹æ¡ˆäºŒã€‘åˆ©ç”¨-attrs-æ¥ä¼ å€¼"><a href="#ã€æ–¹æ¡ˆäºŒã€‘åˆ©ç”¨-attrs-æ¥ä¼ å€¼" class="headerlink" title="ã€æ–¹æ¡ˆäºŒã€‘åˆ©ç”¨ $attrs æ¥ä¼ å€¼"></a>ã€æ–¹æ¡ˆäºŒã€‘åˆ©ç”¨ $attrs æ¥ä¼ å€¼</h4><p>vm.$attrs åŒ…å«æ˜¯ç»„ä»¶ä¸­æœªè¢«propsæ³¨å†Œçš„å±æ€§</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567573718978.png" alt="1567573718978"></p>
<p>$attrsâ€“ç»§æ‰¿æ‰€æœ‰çš„çˆ¶ç»„ä»¶å±æ€§ï¼ˆé™¤äº†propæ³¨å†Œä¼ é€’çš„å±æ€§ã€class å’Œ style ï¼‰ï¼Œä¸€èˆ¬ç”¨åœ¨å­ç»„ä»¶çš„å­å…ƒç´ ä¸Šã€‚</p>
<p>åœ¨æœ¬ä¾‹ä¸­ <code>&lt;my-p :content=&#39;$attrs.content&#39;&gt;&lt;/my-p&gt;</code>å¾—åˆ°åº”ç”¨ã€‚</p>
<p>ã€æ³¨æ„ã€‘å¦‚æœ$attrsç»§æ‰¿äº†å¾ˆå¤šçš„å±æ€§ï¼Œé‚£ä¹ˆåƒä¸Šæ —è¿™æ ·å­ä¸€ä¸ªä¸€ä¸ªåœ¨å­ç»„ä»¶æ ‡ç­¾ä¸­åˆ—å‡ºæ¥å¾ˆéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<p><code>v-bind=&#39;$attrs&#39;</code>æ¥ä¸€æ¬¡æ€§å…¨éƒ¨æ‹¿åˆ°$attrsä¸­çš„å…¨éƒ¨å±æ€§ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567574861249.png" alt="1567574861249"></p>
<p>ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œåœ¨htmlç»“æ„ä¸­ï¼Œè¢«propsæ³¨å†Œä¼ é€’çš„å±æ€§ä¸ä¼šå‡ºç°ï¼Œè€Œæœªè¢«propsæ³¨å†Œä¼ é€’çš„å±æ€§ä¼šå‡ºç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567574935531.png" alt="1567574935531"></p>
<p>å¦‚ä½•å»é™¤å‘¢ï¼Ÿ</p>
<p>ä½¿ç”¨<code>inheritAttrsï¼šfalse</code>!</p>
<p>inheritAttrsï¼šé»˜è®¤å€¼true,ç»§æ‰¿æ‰€æœ‰çš„çˆ¶ç»„ä»¶å±æ€§ï¼ˆé™¤propsçš„ç‰¹å®šç»‘å®šï¼‰ä½œä¸ºæ™®é€šçš„HTMLç‰¹æ€§åº”ç”¨åœ¨å­ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šï¼Œå¦‚æœä½ ä¸å¸Œæœ›ç»„ä»¶çš„æ ¹å…ƒç´ ç»§æ‰¿ç‰¹æ€§è®¾ç½®inheritAttrs: false,ä½†æ˜¯classå±æ€§ä¼šç»§æ‰¿ï¼ˆ<strong>ç®€å•çš„è¯´ï¼ŒinheritAttrsï¼štrue ç»§æ‰¿é™¤propsä¹‹å¤–çš„æ‰€æœ‰å±æ€§ï¼›inheritAttrsï¼šfalse åªç»§æ‰¿classå±æ€§</strong>ï¼‰</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567575042562.png" alt="1567575042562"></p>
<p>åƒè¿™æ ·å­å†™ä¹‹åï¼Œå°±å¤§åŠŸå‘Šæˆäº†ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567575099573.png" alt="1567575099573"></p>
<p><br><br></p>
<h4 id="ã€æ–¹æ¡ˆä¸‰ã€‘åˆ©ç”¨-parent"><a href="#ã€æ–¹æ¡ˆä¸‰ã€‘åˆ©ç”¨-parent" class="headerlink" title="ã€æ–¹æ¡ˆä¸‰ã€‘åˆ©ç”¨ $parent"></a>ã€æ–¹æ¡ˆä¸‰ã€‘åˆ©ç”¨ $parent</h4><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567576385970.png" alt="1567576385970"></p>
<p>å¯¹äº$childrenï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºå¯ä»¥æœ‰å¤šä¸ªå­ç»„ä»¶ã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ–¹æ³•å®˜æ–¹ä¸æ¨èä½¿ç”¨ï¼Œåƒå­™å­ç»„ä»¶myPä¸­è¿™æ ·å¤šä¸ª$parentå†™èµ·æ¥å¾ˆä¸å‹å¥½ã€‚</p>
<p><br><br></p>
<h4 id="ã€æ–¹æ¡ˆå››ã€‘åˆ©ç”¨provideå’Œinject"><a href="#ã€æ–¹æ¡ˆå››ã€‘åˆ©ç”¨provideå’Œinject" class="headerlink" title="ã€æ–¹æ¡ˆå››ã€‘åˆ©ç”¨provideå’Œinject"></a>ã€æ–¹æ¡ˆå››ã€‘åˆ©ç”¨provideå’Œinject</h4><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567576901607.png" alt="1567576901607"></p>
<p>åœ¨ç»„ä»¶ä¸­injectæ‹¿åˆ°çš„å±æ€§å’Œæ•°æ®æ˜¯æ¥è‡ªprovideçš„ï¼Œè€Œédataä¸­çš„ã€‚</p>
<p>è™½ç„¶å¾ˆæ–¹ä¾¿å´ä¹Ÿæ˜¯ä¸å¤ªæ¨èä½¿ç”¨çš„ï¼Œ å®¹æ˜“ä½¿å¾—ä»£ç æ··ä¹±ï¼Œä¸çŸ¥é“å±æ€§æ˜¯ä»ä½•è€Œæ¥çš„ã€‚ä½†æ˜¯å¿…é¡»çŸ¥é“ï¼Œé¢è¯•çš„æ—¶å€™å¯ä»¥è£…é€¼ã€‚</p>
<p><br><br></p>
<h3 id="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼"><a href="#å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼" class="headerlink" title="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼"></a>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼</h3><h4 id="ã€æ–¹æ¡ˆä¸€ã€‘åˆ©ç”¨-children"><a href="#ã€æ–¹æ¡ˆä¸€ã€‘åˆ©ç”¨-children" class="headerlink" title="ã€æ–¹æ¡ˆä¸€ã€‘åˆ©ç”¨ $children"></a>ã€æ–¹æ¡ˆä¸€ã€‘åˆ©ç”¨ $children</h4><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567579334058.png" alt="1567579334058"></p>
<p>ä½†æ˜¯è¿™ç§æ–¹æ³•å®˜æ–¹ä¸æ¨èä½¿ç”¨ã€‚</p>
<p><br><br></p>
<h4 id="ã€æ–¹æ¡ˆäºŒã€‘-åˆ©ç”¨-refs"><a href="#ã€æ–¹æ¡ˆäºŒã€‘-åˆ©ç”¨-refs" class="headerlink" title="ã€æ–¹æ¡ˆäºŒã€‘ åˆ©ç”¨ $refs"></a>ã€æ–¹æ¡ˆäºŒã€‘ åˆ©ç”¨ $refs</h4><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567581936328.png" alt="1567581936328"></p>
<p>é€šè¿‡ $refs è·å–åˆ°äº†å­ç»„ä»¶çš„æ•°æ®å’Œæ–¹æ³•ã€‚</p>
<p><br><br></p>
<p>####ã€æ–¹æ¡ˆä¸‰ã€‘$emit</p>
<p>è¿™æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567585452418.png" alt="1567585452418"></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567585482438.png" alt="1567585482438"></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567585581527.png" alt="1567585581527"></p>
<p><br><br></p>
<h3 id="å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼"><a href="#å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼" class="headerlink" title="å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼"></a>å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼</h3><h4 id="åˆ©ç”¨äº‹ä»¶æ€»çº¿EventBus"><a href="#åˆ©ç”¨äº‹ä»¶æ€»çº¿EventBus" class="headerlink" title="åˆ©ç”¨äº‹ä»¶æ€»çº¿EventBus"></a>åˆ©ç”¨äº‹ä»¶æ€»çº¿EventBus</h4><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567588110311.png" alt="1567588110311"></p>
<p>ã€å…·ä½“å®ç°æ–¹å¼ã€‘ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Eventbus=<span class="keyword">new</span> Vue();    </span><br><span class="line">Eventbus.$emit(äº‹ä»¶å,æ•°æ®);    </span><br><span class="line">Eventbus.$on(äº‹ä»¶å,data =&gt; &#123;&#125;);</span><br></pre></td></tr></table></figure>
<p><br><br></p>
<h3 id="ç»„ä»¶åŒå‘æ•°æ®é€šä¿¡"><a href="#ç»„ä»¶åŒå‘æ•°æ®é€šä¿¡" class="headerlink" title="ç»„ä»¶åŒå‘æ•°æ®é€šä¿¡"></a>ç»„ä»¶åŒå‘æ•°æ®é€šä¿¡</h3><p>æš‚æœªæ•´ç†</p>
<p><br><br><br></p>
<h1 id="åä¸€ã€Vue-cli-è„šæ‰‹æ¶"><a href="#åä¸€ã€Vue-cli-è„šæ‰‹æ¶" class="headerlink" title="åä¸€ã€Vue-cli è„šæ‰‹æ¶"></a>åä¸€ã€Vue-cli è„šæ‰‹æ¶</h1><h2 id="å®‰è£…åˆè¯•"><a href="#å®‰è£…åˆè¯•" class="headerlink" title="å®‰è£…åˆè¯•"></a>å®‰è£…åˆè¯•</h2><p>npm install -g @vue/cli     å®‰è£…è„šæ‰‹æ¶ï¼Œç”¨äºç”Ÿæˆé¡¹ç›®ï¼Œä½¿ç”¨æŒ‡ä»¤<code>vue --version</code>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ<br>npm install -g @vue/cli-service-global   å¿«é€ŸåŸå‹å¼€å‘ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡<code>vue serve xxx.vue</code>çš„æŒ‡ä»¤æ¥ç¼–è¯‘.vueæ–‡ä»¶</p>
<p>å¦‚æœä¹‹å‰å·²ç»å®‰è£…è¿‡æ—§ç‰ˆæœ¬ï¼ˆé3.xï¼‰è„šæ‰‹æ¶ï¼Œéœ€å…ˆå¸è½½æ—§ç‰ˆæœ¬ï¼š<br>npm uninstall vue-cli -g</p>
<p>å¦‚æœä»ç„¶éœ€è¦ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ vue init åŠŸèƒ½ï¼Œå¯ä»¥å…¨å±€å®‰è£…ä¸€ä¸ªæ¡¥æ¥å·¥å…·ï¼š<br>npm install -g @vue/cli-init    æ‹‰å–æ—§ç‰ˆæœ¬</p>
<p>æ’ä»¶åå­—ï¼šVeturï¼ˆç”±äºvscodeå¹¶ä¸è®¤è¯†.vueæ–‡ä»¶ï¼Œæ‰€ä»¥æ²¡æœ‰ä»£ç é«˜äº®ï¼Œéœ€è¦å®‰è£…Veturè¿™ä¸ªæ’ä»¶æ¥å¼¥è¡¥</p>
<p><code>vue create vue-app</code>åˆ›å»ºä¸€ä¸ªvueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå«åšvue-appï¼Œã€æ³¨æ„è¿™é‡Œçš„å‘½ä»¤æ“ä½œæœ€å¥½ç”¨cmdæ‰§è¡Œï¼Œgit bashæœ‰äº›æ“ä½œå®Œæˆä¸äº†ã€‘ã€‚ä¼šæç¤ºé€‰æ‹©ä¸€ä¸ªé¢„è®¾çš„æ–¹æ¡ˆï¼Œæœ‰defaultå’Œmanually selectfeatureï¼Œé€‰æ‹©åè€…ã€‚ç„¶åä¼šæœ‰ä¸€äº›é…ç½®éœ€è¦ä½ é€‰æ‹©ï¼ŒæŒ‰ç©ºæ ¼é”®è¿›è¡Œé€‰æ‹©å’Œå–æ¶ˆé€‰æ‹©ï¼Œè¿™é‡Œåªé€‰æ‹©Babelã€‚å†ç„¶åé€‰æ‹©<code>In package.json</code>é€‰é¡¹ï¼Œé€‰<img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567834770585.png" alt="1567834770585"></p>
<ul>
<li>â˜… åŒæ—¶æ³¨æ„ä½¿ç”¨<code>redirect</code>æ¥é‡å®šå‘åˆ°å…·ä½“çš„ä¸€ä¸ªå­è·¯ç”±è·¯å¾„ä¸Šï¼Œå¦åˆ™ä¸€æ‰“å¼€â€œcommunityâ€è·¯ç”±çš„æ—¶å€™æ²¡æœ‰é»˜è®¤çš„é€‰ä¸­å­è·¯ç”±ï¼Œåªä¼šæ˜¾ç¤ºç©ºç™½ä¸ä¼šæ˜¾ç¤ºå‡ºå…·ä½“çš„å­è·¯ç”±é¡µé¢ã€‚</li>
</ul>
<ul>
<li><p>åœ¨ä¸€çº§è·¯ç”±.vueæ–‡ä»¶ä¸­ç»§ç»­ä½¿ç”¨<code>&lt;router-link&gt;</code>å’Œ<code>&lt;router-view&gt;</code></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567834990024.png" alt="1567834990024"></p>
</li>
</ul>
<ul>
<li><p>å…³äºé¦–é¡µè·¯å¾„å’Œ<code>router-link-active</code>çš„ä¼˜åŒ–</p>
<p>åœ¨æœ¬ä¾‹å­ä¸­è·¯ç”±communityçš„æ ·å¼æ˜¯åŠ åœ¨<code>router-link-extra-active</code>ä¸Šçš„ï¼Œä¸”åŒ¹é…çš„æ˜¯è·¯å¾„<code>/community</code>ï¼Œå› æ­¤è·¯ç”±communityçš„å­è·¯ç”±è¢«ç‚¹å‡»æ—¶communityçš„æ ·å¼æ²¡æœ‰æ˜¾ç°ï¼Œå› ä¸ºæ­¤æ—¶çš„è·¯å¾„å˜æˆäº†<code>/community/xxx</code>æ²¡æœ‰å®Œå…¨åŒ¹é…<code>/community</code>ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567836335642.png" alt="1567836335642">å› æ­¤è¦æŠŠæ ·å¼åŠ åˆ°<code>router-link-active</code>ä¸Šã€‚ä½†æ˜¯é—®é¢˜åˆæ¥äº†ï¼Œ<code>router-link-active</code>åŒ¹é…äº†ä¸¤ä¸ªè·¯å¾„<code>/</code>å’Œ<code>/community</code></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567836265612.png" alt="1567836265612"></p>
<p>è¿™æ ·å°±åº”è¯¥æŠŠåŸæœ¬é¦–é¡µåŒ¹é…çš„è·¯å¾„ç”±æ ¹è·¯å¾„<code>/</code>æ¢æˆ<code>/home</code>ã€‚ç„¶ååˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬è®¿é—®<code>http://localhost:8080</code>çš„æ—¶å€™æ— æ³•è‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µã€‚æ‰€ä»¥è¿˜éœ€è¦è¿›è¡Œä¸€æ­¥é‡å®šå‘ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567836714591.png" alt="1567836714591"></p>
<p>æˆ–è€…è¿˜å¯ä»¥è¿™æ ·å­ä½¿ç”¨redirect ( )é‡å®šå‘ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567836792711.png" alt="1567836792711"></p>
</li>
<li><p>ä¸å­˜åœ¨çš„è·¯å¾„å’Œä¼˜åŒ–</p>
<p>æ¯”å¦‚ä¸å­˜åœ¨è¯¥è·¯å¾„<code>http://localhost:8080/gjalhj</code>ï¼Œå¯¹æ­¤è¦å°†è¿™ä¸€åˆ‡ä¸å­˜åœ¨è·¯å¾„åŒæ„è·³è½¬åˆ°æŸä¸€æŒ‡å®šé¡µé¢</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567837033399.png" alt="1567837033399"></p>
<p>è¿™é‡Œçš„<code>path: *</code>è¡¨ç¤ºå½“ä»¥ä¸Šçš„æ‰€æœ‰è·¯å¾„éƒ½æ²¡æœ‰åŒ¹é…çš„æ—¶å€™ï¼Œåˆ¤æ–­è·¯å¾„æ˜¯å¦ä¸º<code>/</code>ï¼Œæ˜¯åˆ™é‡å®šå‘åˆ°<code>/home</code>ï¼Œå¦åˆ™é‡å®šå‘åˆ°ç»Ÿä¸€çš„æŒ‡å®šé¡µé¢ã€‚</p>
</li>
</ul>
<p><br><br></p>
<h2 id="routerçš„pushã€replaceå’Œgo"><a href="#routerçš„pushã€replaceå’Œgo" class="headerlink" title="$routerçš„pushã€replaceå’Œgo"></a>$routerçš„pushã€replaceå’Œgo</h2><ul>
<li><p>this.$router.push()</p>
<p>æè¿°ï¼šè·³è½¬åˆ°ä¸åŒçš„urlï¼Œä½†è¿™ä¸ªæ–¹æ³•å›å‘historyæ ˆæ·»åŠ ä¸€ä¸ªè®°å½•ï¼Œç‚¹å‡»åé€€ä¼šè¿”å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢ã€‚</p>
<p>ç”¨æ³•ï¼š<img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1568037236fa.jpg" alt=""></p>
</li>
</ul>
<ul>
<li><p>this.$router.replace()</p>
<p>æè¿°ï¼šåŒæ ·æ˜¯è·³è½¬åˆ°æŒ‡å®šçš„urlï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸ä¼šå‘historyé‡Œé¢æ·»åŠ æ–°çš„è®°å½•ï¼Œç‚¹å‡»è¿”å›ï¼Œä¼šè·³è½¬åˆ°ä¸Šä¸Šä¸€ä¸ªé¡µé¢ã€‚ä¸Šä¸€ä¸ªè®°å½•æ˜¯ä¸å­˜åœ¨çš„ã€‚</p>
</li>
<li><p>this.$router.go(n)</p>
<p>ç›¸å¯¹äºå½“å‰é¡µé¢å‘å‰æˆ–å‘åè·³è½¬å¤šå°‘ä¸ªé¡µé¢,ç±»ä¼¼ window.history.go(n)ã€‚nå¯ä¸ºæ­£æ•°å¯ä¸ºè´Ÿæ•°ã€‚æ­£æ•°è¿”å›ä¸Šä¸€ä¸ªé¡µé¢</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/20180315110305411.png" alt=""></p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567838042925.png" alt="1567838042925"></p>
<p>-</p>
<p><br><br></p>
<h2 id="å¯¼èˆªå®ˆå«å’ŒåŠ¨æ€è·¯ç”±"><a href="#å¯¼èˆªå®ˆå«å’ŒåŠ¨æ€è·¯ç”±" class="headerlink" title="å¯¼èˆªå®ˆå«å’ŒåŠ¨æ€è·¯ç”±"></a><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB" target="_blank" rel="noopener">å¯¼èˆªå®ˆå«</a>å’ŒåŠ¨æ€è·¯ç”±</h2><p>ã€é‡è¦çš„ä¸€èŠ‚è¯¾ã€‘F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\28. å¯¼èˆªå®ˆå«&amp;åŠ¨æ€è·¯ç”±</p>
<h3 id="åŠ¨æ€è·¯ç”±"><a href="#åŠ¨æ€è·¯ç”±" class="headerlink" title="åŠ¨æ€è·¯ç”±"></a>åŠ¨æ€è·¯ç”±</h3><p>ã€æ–¹æ¡ˆä¸€ã€‘ä½¿ç”¨paramsï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567850470296.png" alt="1567850470296"></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567850528088.png" alt="1567850528088"></p>
<p>ã€æ–¹æ¡ˆäºŒã€‘ä½¿ç”¨queryï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567851075014.png" alt="1567851075014"></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567851012789.png" alt="1567851012789"></p>
<p><br><br></p>
<h3 id="ç»„ä»¶å†…çš„å®ˆå«"><a href="#ç»„ä»¶å†…çš„å®ˆå«" class="headerlink" title="ç»„ä»¶å†…çš„å®ˆå«"></a>ç»„ä»¶å†…çš„å®ˆå«</h3><p>ä½ å¯ä»¥åœ¨è·¯ç”±ç»„ä»¶å†…ç›´æ¥å®šä¹‰ä»¥ä¸‹è·¯ç”±å¯¼èˆªå®ˆå«ï¼š</p>
<ul>
<li><code>beforeRouteEnter</code></li>
<li><code>beforeRouteUpdate</code> (2.2 æ–°å¢)</li>
<li><code>beforeRouteLeave</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo = &#123;</span><br><span class="line">  template: <span class="string">`...`</span>,</span><br><span class="line">  beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢« confirm å‰è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// ä¸ï¼èƒ½ï¼è·å–ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">    <span class="comment">// å› ä¸ºå½“å®ˆå«æ‰§è¡Œå‰ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»º</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ /foo/:idï¼Œåœ¨ /foo/1 å’Œ /foo/2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ</span></span><br><span class="line">    <span class="comment">// ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ Foo ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚</span></span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>beforeRouteEnter</code> å®ˆå« <strong>ä¸èƒ½</strong> è®¿é—® <code>this</code>ï¼Œå› ä¸ºå®ˆå«åœ¨å¯¼èˆªç¡®è®¤å‰è¢«è°ƒç”¨,å› æ­¤å³å°†ç™»åœºçš„æ–°ç»„ä»¶è¿˜æ²¡è¢«åˆ›å»ºã€‚</p>
<p>ä¸è¿‡ï¼Œä½ å¯ä»¥é€šè¿‡ä¼ ä¸€ä¸ªå›è°ƒç»™ <code>next</code>æ¥è®¿é—®ç»„ä»¶å®ä¾‹ã€‚åœ¨å¯¼èˆªè¢«ç¡®è®¤çš„æ—¶å€™æ‰§è¡Œå›è°ƒï¼Œå¹¶ä¸”æŠŠç»„ä»¶å®ä¾‹ä½œä¸ºå›è°ƒæ–¹æ³•çš„å‚æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  next(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ `vm` è®¿é—®ç»„ä»¶å®ä¾‹</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ <code>beforeRouteEnter</code> æ˜¯æ”¯æŒç»™ <code>next</code> ä¼ é€’å›è°ƒçš„å”¯ä¸€å®ˆå«ã€‚å¯¹äº <code>beforeRouteUpdate</code> å’Œ <code>beforeRouteLeave</code> æ¥è¯´ï¼Œ<code>this</code> å·²ç»å¯ç”¨äº†ï¼Œæ‰€ä»¥<strong>ä¸æ”¯æŒ</strong>ä¼ é€’å›è°ƒï¼Œå› ä¸ºæ²¡æœ‰å¿…è¦äº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="comment">// just use `this`</span></span><br><span class="line">  <span class="keyword">this</span>.name = to.params.name</span><br><span class="line">  next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç¦»å¼€å®ˆå«é€šå¸¸ç”¨æ¥ç¦æ­¢ç”¨æˆ·åœ¨è¿˜æœªä¿å­˜ä¿®æ”¹å‰çªç„¶ç¦»å¼€ã€‚è¯¥å¯¼èˆªå¯ä»¥é€šè¿‡ <code>next(false)</code> æ¥å–æ¶ˆã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteLeave (to, <span class="keyword">from</span> , next) &#123;</span><br><span class="line">  <span class="keyword">const</span> answer = <span class="built_in">window</span>.confirm(<span class="string">'Do you really want to leave? you have unsaved changes!'</span>)</span><br><span class="line">  <span class="keyword">if</span> (answer) &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€æ¡ˆä¾‹ã€‘å®ç°ä¸€ä¸ªåŠŸèƒ½</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567845124241.png" alt="1567845124241"></p>
<p>è¿™å°±è¦ç”¨åˆ°å¯¼èˆªå®ˆå«ä¹‹<strong>beforeRouterLeave</strong></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567845232834.png" alt="1567845232834"></p>
<p>ç›¸åº”çš„è¿˜æœ‰<strong>beforeRouteEnter</strong> ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567850373975.png" alt="1567850373975"></p>
<p><strong>beforeRouteUpdate</strong>ï¼š</p>
<p>â˜… è¿™ä¸ªçœ‹è§†é¢‘ã€F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\28. å¯¼èˆªå®ˆå«&amp;åŠ¨æ€è·¯ç”±ã€‘</p>
<p><br><br></p>
<h3 id="è·¯ç”±ç‹¬äº«å®ˆå«"><a href="#è·¯ç”±ç‹¬äº«å®ˆå«" class="headerlink" title="è·¯ç”±ç‹¬äº«å®ˆå«"></a>è·¯ç”±ç‹¬äº«å®ˆå«</h3><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567926980649.png" alt="1567926980649"></p>
<p><br><br></p>
<h3 id="å…¨å±€å‰ç½®å®ˆå«"><a href="#å…¨å±€å‰ç½®å®ˆå«" class="headerlink" title="å…¨å±€å‰ç½®å®ˆå«"></a>å…¨å±€å‰ç½®å®ˆå«</h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>router.beforeEach</code> æ³¨å†Œä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å½“ä¸€ä¸ªå¯¼èˆªè§¦å‘æ—¶ï¼Œå…¨å±€å‰ç½®å®ˆå«æŒ‰ç…§åˆ›å»ºé¡ºåºè°ƒç”¨ã€‚å®ˆå«æ˜¯å¼‚æ­¥è§£ææ‰§è¡Œï¼Œæ­¤æ—¶å¯¼èˆªåœ¨æ‰€æœ‰å®ˆå« resolve å®Œä¹‹å‰ä¸€ç›´å¤„äº <strong>ç­‰å¾…ä¸­</strong>ã€‚</p>
<p>æ¯ä¸ªå®ˆå«æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><strong>to: Route</strong>: å³å°†è¦è¿›å…¥çš„ç›®æ ‡ <a href="https://router.vuejs.org/zh/api/#%E8%B7%AF%E7%94%B1%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener">è·¯ç”±å¯¹è±¡</a></li>
<li><strong>from: Route</strong>: å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±</li>
<li><strong>next: Function</strong>: ä¸€å®šè¦è°ƒç”¨è¯¥æ–¹æ³•æ¥ <strong>resolve</strong> è¿™ä¸ªé’©å­ã€‚æ‰§è¡Œæ•ˆæœä¾èµ– <code>next</code> æ–¹æ³•çš„è°ƒç”¨å‚æ•°ã€‚<ul>
<li><strong>next()</strong>: è¿›è¡Œç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªé’©å­ã€‚å¦‚æœå…¨éƒ¨é’©å­æ‰§è¡Œå®Œäº†ï¼Œåˆ™å¯¼èˆªçš„çŠ¶æ€å°±æ˜¯ <strong>confirmed</strong> (ç¡®è®¤çš„)ã€‚</li>
<li><strong>next(false)</strong>: ä¸­æ–­å½“å‰çš„å¯¼èˆªã€‚å¦‚æœæµè§ˆå™¨çš„ URL æ”¹å˜äº† (å¯èƒ½æ˜¯ç”¨æˆ·æ‰‹åŠ¨æˆ–è€…æµè§ˆå™¨åé€€æŒ‰é’®)ï¼Œé‚£ä¹ˆ URL åœ°å€ä¼šé‡ç½®åˆ° <code>from</code> è·¯ç”±å¯¹åº”çš„åœ°å€ã€‚</li>
<li><strong>next(â€˜/â€˜) æˆ–è€… next({ path: â€˜/â€˜ })</strong>: è·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ã€‚å½“å‰çš„å¯¼èˆªè¢«ä¸­æ–­ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ–°çš„å¯¼èˆªã€‚ä½ å¯ä»¥å‘ <code>next</code> ä¼ é€’ä»»æ„ä½ç½®å¯¹è±¡ï¼Œä¸”å…è®¸è®¾ç½®è¯¸å¦‚ <code>replace: true</code>ã€<code>name: &#39;home&#39;</code> ä¹‹ç±»çš„é€‰é¡¹ä»¥åŠä»»ä½•ç”¨åœ¨ <a href="https://router.vuejs.org/zh/api/#to" target="_blank" rel="noopener"><code>router-link</code> çš„ <code>to</code> prop</a> æˆ– <a href="https://router.vuejs.org/zh/api/#router-push" target="_blank" rel="noopener"><code>router.push</code></a> ä¸­çš„é€‰é¡¹ã€‚</li>
<li><strong>next(error)</strong>: (2.4.0+) å¦‚æœä¼ å…¥ <code>next</code> çš„å‚æ•°æ˜¯ä¸€ä¸ª <code>Error</code> å®ä¾‹ï¼Œåˆ™å¯¼èˆªä¼šè¢«ç»ˆæ­¢ä¸”è¯¥é”™è¯¯ä¼šè¢«ä¼ é€’ç»™ <a href="https://router.vuejs.org/zh/api/#router-onerror" target="_blank" rel="noopener"><code>router.onError()</code></a> æ³¨å†Œè¿‡çš„å›è°ƒã€‚</li>
</ul>
</li>
</ul>
<p><strong>ç¡®ä¿è¦è°ƒç”¨ next æ–¹æ³•ï¼Œå¦åˆ™é’©å­å°±ä¸ä¼šè¢« resolvedã€‚</strong></p>
<p><br><br></p>
<h3 id="å…¨å±€è§£æå®ˆå«"><a href="#å…¨å±€è§£æå®ˆå«" class="headerlink" title="å…¨å±€è§£æå®ˆå«"></a>å…¨å±€è§£æå®ˆå«</h3><blockquote>
<p>2.5.0 æ–°å¢</p>
</blockquote>
<p>åœ¨ 2.5.0+ ä½ å¯ä»¥ç”¨ <code>router.beforeResolve</code> æ³¨å†Œä¸€ä¸ªå…¨å±€å®ˆå«ã€‚è¿™å’Œ <code>router.beforeEach</code> ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯åœ¨å¯¼èˆªè¢«ç¡®è®¤ä¹‹å‰ï¼Œ<strong>åŒæ—¶åœ¨æ‰€æœ‰ç»„ä»¶å†…å®ˆå«å’Œå¼‚æ­¥è·¯ç”±ç»„ä»¶è¢«è§£æä¹‹å</strong>ï¼Œè§£æå®ˆå«å°±è¢«è°ƒç”¨ã€‚</p>
<p><br><br></p>
<h3 id="å…¨å±€åç½®é’©å­"><a href="#å…¨å±€åç½®é’©å­" class="headerlink" title="å…¨å±€åç½®é’©å­"></a>å…¨å±€åç½®é’©å­</h3><p>ä½ ä¹Ÿå¯ä»¥æ³¨å†Œå…¨å±€åç½®é’©å­ï¼Œç„¶è€Œå’Œå®ˆå«ä¸åŒçš„æ˜¯ï¼Œè¿™äº›é’©å­ä¸ä¼šæ¥å— <code>next</code> å‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜å¯¼èˆªæœ¬èº«ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567928081876.png" alt="1567928081876"></p>
<p><br><br></p>
<h3 id="å¯¼èˆªå®ˆå«å°æ±‡æ€»"><a href="#å¯¼èˆªå®ˆå«å°æ±‡æ€»" class="headerlink" title="å¯¼èˆªå®ˆå«å°æ±‡æ€»"></a>å¯¼èˆªå®ˆå«å°æ±‡æ€»</h3><ol>
<li><strong>å…¨å±€å®ˆå«</strong></li>
</ol>
<ul>
<li><p>beforeEach</p>
</li>
<li><p>beforeResolve</p>
</li>
<li><p>afterEach</p>
</li>
</ul>
<ol start="2">
<li><strong>è·¯ç”±ç‹¬äº«å®ˆå«</strong></li>
</ol>
<ul>
<li>beforeEnter</li>
</ul>
<ol start="3">
<li><strong>ç»„ä»¶å†…å®ˆå«</strong></li>
</ol>
<ul>
<li><p>beforeRouteLeave å½“ç¦»å¼€è¿™ä¸ªè·¯å¾„æ—¶æ‰§è¡Œ</p>
</li>
<li><p>beforeRouteEnter </p>
</li>
<li><p>beforeRouteUpdate mounted</p>
</li>
</ul>
<p>   è¿›å…¥æŸä¸€ä¸ªè·¯å¾„æ—¶ï¼Œæ‰§è¡Œé¡ºåº</p>
<p>- beforeEach -&gt; beforeEnter -&gt; beforeRouteEnter -&gt; beforeResolve -&gt; afterEach </p>
<p><br></p>
<h3 id="å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹"><a href="#å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹" class="headerlink" title="å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹"></a>å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹</h3><ol>
<li>å¯¼èˆªè¢«è§¦å‘ã€‚</li>
<li>åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ç¦»å¼€å®ˆå«ã€‚</li>
<li>è°ƒç”¨å…¨å±€çš„ <code>beforeEach</code> å®ˆå«ã€‚</li>
<li>åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ <code>beforeRouteUpdate</code> å®ˆå« (2.2+)ã€‚</li>
<li>åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ <code>beforeEnter</code>ã€‚</li>
<li>è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚</li>
<li>åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ <code>beforeRouteEnter</code>ã€‚</li>
<li>è°ƒç”¨å…¨å±€çš„ <code>beforeResolve</code> å®ˆå« (2.5+)ã€‚</li>
<li>å¯¼èˆªè¢«ç¡®è®¤ã€‚</li>
<li>è°ƒç”¨å…¨å±€çš„ <code>afterEach</code> é’©å­ã€‚</li>
<li>è§¦å‘ DOM æ›´æ–°ã€‚</li>
<li>ç”¨åˆ›å»ºå¥½çš„å®ä¾‹è°ƒç”¨ <code>beforeRouteEnter</code> å®ˆå«ä¸­ä¼ ç»™ <code>next</code> çš„å›è°ƒå‡½æ•°ã€‚</li>
</ol>
<p><br><br></p>
<h2 id="è·¯ç”±å…ƒä¿¡æ¯"><a href="#è·¯ç”±å…ƒä¿¡æ¯" class="headerlink" title="è·¯ç”±å…ƒä¿¡æ¯"></a>è·¯ç”±å…ƒä¿¡æ¯</h2><p>å®šä¹‰è·¯ç”±çš„æ—¶å€™å¯ä»¥é…ç½® <code>meta</code> å­—æ®µï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/foo'</span>,</span><br><span class="line">      component: Foo,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'bar'</span>,</span><br><span class="line">          component: Bar,</span><br><span class="line">          <span class="comment">// a meta field</span></span><br><span class="line">          meta: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå¦‚ä½•è®¿é—®è¿™ä¸ª <code>meta</code> å­—æ®µå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ç§°å‘¼ <code>routes</code> é…ç½®ä¸­çš„æ¯ä¸ªè·¯ç”±å¯¹è±¡ä¸º <strong>è·¯ç”±è®°å½•</strong>ã€‚è·¯ç”±è®°å½•å¯ä»¥æ˜¯åµŒå¥—çš„ï¼Œå› æ­¤ï¼Œå½“ä¸€ä¸ªè·¯ç”±åŒ¹é…æˆåŠŸåï¼Œä»–å¯èƒ½åŒ¹é…å¤šä¸ªè·¯ç”±è®°å½•</p>
<p>ä¾‹å¦‚ï¼Œæ ¹æ®ä¸Šé¢çš„è·¯ç”±é…ç½®ï¼Œ<code>/foo/bar</code> è¿™ä¸ª URL å°†ä¼šåŒ¹é…çˆ¶è·¯ç”±è®°å½•ä»¥åŠå­è·¯ç”±è®°å½•ã€‚</p>
<p>ä¸€ä¸ªè·¯ç”±åŒ¹é…åˆ°çš„æ‰€æœ‰è·¯ç”±è®°å½•ä¼šæš´éœ²ä¸º <code>$route</code> å¯¹è±¡ (è¿˜æœ‰åœ¨å¯¼èˆªå®ˆå«ä¸­çš„è·¯ç”±å¯¹è±¡) çš„ <code>$route.matched</code> æ•°ç»„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦éå† <code>$route.matched</code> æ¥æ£€æŸ¥è·¯ç”±è®°å½•ä¸­çš„ <code>meta</code> å­—æ®µã€‚</p>
<p>ä¸‹é¢ä¾‹å­å±•ç¤ºåœ¨å…¨å±€å¯¼èˆªå®ˆå«ä¸­æ£€æŸ¥å…ƒå­—æ®µï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.matched.some(<span class="function"><span class="params">record</span> =&gt;</span> record.meta.requiresAuth)) &#123;</span><br><span class="line">    <span class="comment">// this route requires auth, check if logged in</span></span><br><span class="line">    <span class="comment">// if not, redirect to login page.</span></span><br><span class="line">    <span class="keyword">if</span> (!auth.loggedIn()) &#123;</span><br><span class="line">      next(&#123;</span><br><span class="line">        path: <span class="string">'/login'</span>,</span><br><span class="line">        query: &#123; <span class="attr">redirect</span>: to.fullPath &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next() <span class="comment">// ç¡®ä¿ä¸€å®šè¦è°ƒç”¨ next()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ã€æ¡ˆä¾‹ã€‘å®ç°ç”¨æˆ·ç™»å½•åæ‰æœ‰æŸ¥çœ‹å†…å®¹æƒé™ï¼Œä»ç„¶åŸºäºä¸Šé¢çš„ç¨‹åºï¼Œè¦æ±‚ç”¨æˆ·ç™»å½•åæ‰å¯ä»¥æŸ¥çœ‹â€œå­¦å‘˜å±•ç¤ºâ€å’Œâ€ç¤¾åŒºâ€œ</p>
<p>â˜…â˜…â˜… F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\30. è·¯ç”±å…ƒä¿¡æ¯</p>
<p><br><br><br></p>
<h1 id="åä¸‰ã€Vuex"><a href="#åä¸‰ã€Vuex" class="headerlink" title="åä¸‰ã€Vuex"></a>åä¸‰ã€Vuex</h1><h2 id="stateã€gettersã€mutationsã€actions"><a href="#stateã€gettersã€mutationsã€actions" class="headerlink" title="stateã€gettersã€mutationsã€actions"></a>stateã€gettersã€mutationsã€actions</h2><p>è¯¦è§æˆ‘çš„å®Œæ•´ç¬”è®°ï¼š</p>
<p><a href="https://github.com/Dunteng/learnVue/tree/master/%E5%AD%A6%E4%B9%A0Vuex#%E6%9C%AC%E6%96%87%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener">https://github.com/Dunteng/learnVue/tree/master/%E5%AD%A6%E4%B9%A0Vuex#%E6%9C%AC%E6%96%87%E4%BB%A3%E7%A0%81</a></p>
<p><br><br></p>
<h2 id="vuex-module"><a href="#vuex-module" class="headerlink" title="vuex module"></a>vuex module</h2><p>ã€F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\33. vuex mutation&amp;action\srcã€‘</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567958712382.png" alt="1567958712382"></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vue/1567958795682.png" alt="1567958795682"></p>
<p>æ³¨æ„åˆ°åœ¨æ­¤ï¼Œä½¿ç”¨çš„ vuex stateéƒ½æ˜¯å­˜æ”¾å…³äº â€œå­¦å‘˜å±•ç¤ºâ€ æ¨¡å—çš„ï¼Œä¸€æ—¦å…¶ä»–æ¿å—å¦‚ â€œè¯¾ç¨‹å­¦ä¹ â€ â€œç¤¾åŒºâ€ ç­‰ä¹Ÿéœ€è¦ç”¨åˆ° vuex ï¼Œ é‚£ä¹ˆä¸€å¤§å †çš„æ•°æ®éƒ½å †ç§¯åˆ°stateä¸­ï¼Œè¿™æ ·å°±å¾ˆåºå¤§å¾ˆæ‚ä¹±ï¼Œä¸å¥½ç»´æŠ¤å’Œç®¡ç†ï¼Œ<strong>å› æ­¤éœ€è¦åˆ†æ¨¡å—ç”¨åˆ° vuex module</strong>ã€‚</p>
<h3 style="color:red;">â˜…â˜…â˜…â˜…â˜… çœ‹ä»£ç ã€F:\æ¸¡ä¸€å‰ç«¯è¯¾\æ–°å½•åˆ¶çš„vueè¯¾ç¨‹èµ„æ–™\34. vuex module\srcã€‘</h3>

<p> <strong>modules</strong></p>
<ul>
<li><p>æ ¹æ®åŠŸèƒ½è®©vuexåˆ†å‡ºæ¨¡å—</p>
</li>
<li><p>stateä¼šæ”¾å…¥åˆ°æ¯ä¸€ä¸ªæ¨¡å—ä¸‹ï¼Œgettersã€mutationsã€actionsä¼šç›´æ¥æ”¾å…¥åˆ°å…¨å±€</p>
<p><strong>è·å–vuexä¸­çš„æ•°æ®ï¼ˆæ— namespacedï¼‰</strong></p>
</li>
<li><p>è·å–state : this.$store.state.moduleName.xxx</p>
</li>
<li><p>è·å–gettersï¼š this.$store.getters.xxx</p>
</li>
<li><p>è·å–mutationsï¼š this.$store.commit(â€˜xxxâ€™)</p>
</li>
<li><p>è·å–actionsï¼š this.$store.dispatch(â€˜xxxâ€™)</p>
</li>
<li><p>å¯ä»¥é€šè¿‡mapXXX æ–¹å¼æ‹¿åˆ°gettersã€mutationsã€actionï¼Œä½†æ˜¯ä¸èƒ½æ‹¿åˆ°stateï¼Œå¦‚æœæƒ³é€šè¿‡è¿™ç§æ–¹å¼è·å–stateï¼Œéœ€è¦åŠ å‘½åç©ºé—´ï¼šnamespacedï¼štrue</p>
<p><strong>è·å–vuexä¸­çš„æ•°æ®ï¼ˆæœ‰namespacedï¼‰</strong></p>
</li>
<li><p>è·å–state : this.$store.state.moduleName.xxx</p>
</li>
<li><p>è·å–gettersï¼š this.$store[â€˜moduleName/gettersâ€™].xxx</p>
</li>
<li><p>è·å–mutationsï¼š this.$store.commit(â€˜moduleName/xxxâ€™)</p>
</li>
<li><p>è·å–actionsï¼š this.$store.dispatch(â€˜moduleName/xxxâ€™)</p>
</li>
<li><p>å¯ä»¥é€šè¿‡mapXXX: mapXXX(â€˜moduleNameâ€™, [â€˜xxxâ€™])  mapXXX(â€˜moduleNameâ€™, {})</p>
</li>
</ul>
<p><br><br><br></p>
<h1 id="åå››ã€è·¨åŸŸ"><a href="#åå››ã€è·¨åŸŸ" class="headerlink" title="åå››ã€è·¨åŸŸ"></a>åå››ã€è·¨åŸŸ</h1><h1 id="åäº”ã€ç½‘ç»œè¯·æ±‚axios"><a href="#åäº”ã€ç½‘ç»œè¯·æ±‚axios" class="headerlink" title="åäº”ã€ç½‘ç»œè¯·æ±‚axios"></a>åäº”ã€ç½‘ç»œè¯·æ±‚axios</h1><p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener">https://www.kancloud.cn/yunye/axios/234845</a></li>
<li>ç‹çº¢å…ƒè€å¸ˆçš„<a href="https://www.bilibili.com/video/av67171816/?p=146" target="_blank" rel="noopener">vueè¯¾ç¨‹</a></li>
</ul>
<p>axios æ˜¯ Vue ä½œè€…å°¤é›¨æºªæ¨èçš„å®˜æ–¹ ajax åº“ã€‚æœ‰ä¸€ä¸‹ä¸»è¦åŠŸèƒ½ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åœ¨æµè§ˆå™¨ä¸­å‘é€ XMLHttpRequest è¯·æ±‚</li>
<li>åœ¨ node.js ä¸­å‘é€ http è¯·æ±‚</li>
<li>æ”¯æŒ Promise API</li>
<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è½¬åŒ–è¯·æ±‚å’Œå“åº”æ•°æ®</li>
</ul>
<p><br></p>
<p>å…ˆå®‰è£…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios --save</span><br></pre></td></tr></table></figure>
<p>å†å¼•å…¥ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br></pre></td></tr></table></figure>
<p>å‘é€è¯·æ±‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">  url: <span class="string">"http://123.207.32.32:8000/home/multidata"</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ²¡æœ‰æŒ‡å®š GET è¯·æ±‚è¿˜æ˜¯ POST è¯·æ±‚ï¼Œåªä¼ äº†ä¸€ä¸ª url ï¼Œé»˜è®¤ä¸º GET è¯·æ±‚ã€‚</p>
<p><br></p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>æ‰§è¡Œ <code>GET</code> è¯·æ±‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ºç»™å®š ID çš„ user åˆ›å»ºè¯·æ±‚</span></span><br><span class="line">axios.get(<span class="string">'/user?ID=12345'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰åœ°ï¼Œä¸Šé¢çš„è¯·æ±‚å¯ä»¥è¿™æ ·åš</span></span><br><span class="line">axios.get(<span class="string">'/user'</span>, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: <span class="number">12345</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ <code>POST</code> è¯·æ±‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'/user'</span>, &#123;</span><br><span class="line">    firstName: <span class="string">'Fred'</span>,</span><br><span class="line">    lastName: <span class="string">'Flintstone'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå¤šä¸ª<strong>å¹¶å‘è¯·æ±‚</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserAccount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserPermissions</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345/permissions'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">    .then(axios.spread(<span class="function">(<span class="params">res1, res2</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res1);</span><br><span class="line">    <span class="built_in">console</span>.log(res2);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/vue/1568962541144.png" alt="1568962541144"></p>
<p><br></p>
<h2 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h2><p>çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/vue/1568962967595.png" alt="1568962967595"></p>
<p>è¿™é‡Œé¢çš„ baseURL å’Œ timeout å­˜åœ¨å†—ä½™ï¼Œå¯ä»¥å°†å…¶å†å…¨å±€é…ç½®ä¸­å†™å¥½ã€‚äº‹å®ä¸Šï¼Œåœ¨å¼€å‘ä¸­å¯èƒ½å¾ˆå¤šå‚æ•°éƒ½æ˜¯å›ºå®šçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›æŠ½å–ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨axiosçš„å…¨å±€é…ç½®ã€‚</p>
<p><img src="https://raw.githubusercontent.com/rockdunteng/imageBed/master/note/vue/1568963218053.png" alt="1568963218053"></p>
<p>ç±»ä¼¼çš„è¿˜æœ‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>]=<span class="string">'application/x-www-form-urlencoded'</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰å…¶ä»–é…ç½®é€‰é¡¹ï¼Œæˆ‘å°±ä¸ä¸€ä¸€åˆ—å‡ºæ¥äº†ã€‚</p>
<p><br></p>
<h2 id="axios-çš„å®ä¾‹ä½¿ç”¨"><a href="#axios-çš„å®ä¾‹ä½¿ç”¨" class="headerlink" title="axios çš„å®ä¾‹ä½¿ç”¨"></a>axios çš„å®ä¾‹ä½¿ç”¨</h2><p>åƒä¸Šé¢çš„å‡ ä¸ªä¾‹å­éƒ½æ˜¯ç›´æ¥ä½¿ç”¨ axios ï¼Œä½†æ˜¯æœ‰æ—¶å€™è¿™æ ·å­ç›´æ¥ä½¿ç”¨ axios æ˜¯ä¸åˆé€‚çš„ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å¹¶éåªæ˜¯åœ¨ baseURL=â€œ<a href="http://aaaa:8000â€ï¼Œè€Œæ˜¯è¿˜æœ‰å¤šä¸ª" target="_blank" rel="noopener">http://aaaa:8000â€ï¼Œè€Œæ˜¯è¿˜æœ‰å¤šä¸ª</a> baseURLï¼Œé‚£ä¹ˆè¿™æ—¶å€™å¦‚æœç›´æ¥ç”¨ axios æ¥é…ç½® baseURL å’Œå…¶ä»–çš„ç›¸å…³é…ç½®ï¼Œå°±å®ç°ä¸äº†äº†ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ axios çš„å®ä¾‹ï¼Œä½¿ç”¨å®ä¾‹å°±å¯ä»¥é¿å…è¿™æ ·çš„é—®é¢˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªaxiosçš„å®ä¾‹ instance1</span></span><br><span class="line"><span class="keyword">const</span> instance1 = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">'http://123.123.123.12:8000'</span>,</span><br><span class="line">  timeout: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ä½¿ç”¨instance1å®ä¾‹</span></span><br><span class="line">instance1(&#123;</span><br><span class="line">  url: <span class="string">'/home/multidata'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªaxioså®ä¾‹ instance2</span></span><br><span class="line"><span class="keyword">const</span> instance2 = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">'http://456.123.123.12:8000'</span>,</span><br><span class="line">  timeout: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ä½¿ç”¨instance2å®ä¾‹</span></span><br><span class="line">instance2(&#123;</span><br><span class="line">  url: <span class="string">'/home/multidata'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="axios-å°è£…ä»£ç "><a href="#axios-å°è£…ä»£ç " class="headerlink" title="axios å°è£…ä»£ç "></a>axios å°è£…ä»£ç </h2><p>å‡è®¾é¡¹ç›®ä¸­æœ‰åå¤„ç»„ä»¶è¦ç”¨åˆ° axios æ¥è¯·æ±‚æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½éœ€è¦å¼•å…¥ axios åæ¬¡ï¼Œå¦‚æœæœ‰äº”åæ¬¡è¦ç”¨åˆ°å°±è¦å¼•å…¥äº”åæ¬¡ã€‚ä¸‡ä¸€æŸå¤© axios æŒ‚æ‰äº†æˆ–è€…ä¸å†ç»´æŠ¤äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„é¡¹ç›®å°±è¦å¤§æ”¹äº†ï¼Œæ¯æ¬¡ç”¨åˆ° axios çš„åœ°æ–¹éƒ½è¦é‡æ–°ç¼–å†™ï¼Œäº”åæ¬¡å°±å¤Ÿå‘›äº†ï¼Œå¤§å‹é¡¹ç›®çš„è¯ç›´æ¥æ‰‘è¡—ã€‚</p>
<p>æ‰€ä»¥åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€å®šè¦æœ‰æ„è¯†çš„å°è£… axios ä»£ç ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ <code>src/network/request.js</code>ä¸­å¯¹ axios è¿›è¡Œäº†å°è£…ï¼Œå¯¹å¤–å¯¼å‡ºå®ä¾‹<code>request</code>ï¼Œåœ¨è¿›è¡Œæ•°æ®è¯·æ±‚çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨å°è£…å¥½çš„<code>request</code>è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ axiosï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¦‚æœä»¥åè¦æ›´æ¢æŠ€æœ¯æˆ–è€…ä¿®æ”¹ï¼Œå°±ä¸ç”¨æ¯å¤„åœ°æ–¹éƒ½è¿›è¡Œä¿®æ”¹ï¼Œåªè¦è¯¥å°è£…ä»£ç <code>request</code>å°±å¯ä»¥äº†ã€‚</p>
<p>ä¸‹é¢å¼€å§‹è¿›è¡Œå°è£…ï¼š</p>
<h3 id="level-1"><a href="#level-1" class="headerlink" title="level 1"></a>level 1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//   src/network/request.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config, success, failure</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºaxiosçš„å®ä¾‹</span></span><br><span class="line">    <span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">        baseURL: <span class="string">' https://easy-mock.com/mock/5c88abff4c25252b7c484888/magazine'</span>,</span><br><span class="line">        timeout: <span class="number">5000</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€ç½‘ç»œè¯·æ±‚,ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†æ•°æ®</span></span><br><span class="line">    instance(config).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        success(res)</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        failure(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">'./network/request'</span></span><br><span class="line"></span><br><span class="line">request(&#123;</span><br><span class="line">  url: <span class="string">'/home'</span></span><br><span class="line">&#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">  &#125;,</span><br><span class="line">  err =&gt; &#123;   </span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="level-2"><a href="#level-2" class="headerlink" title="level 2"></a>level 2</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºaxiosçš„å®ä¾‹</span></span><br><span class="line">    <span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">        baseURL: <span class="string">' https://easy-mock.com/mock/5c88abff4c25252b7c484888/magazine'</span>,</span><br><span class="line">        timeout: <span class="number">5000</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€çœŸæ­£çš„ç½‘ç»œè¯·æ±‚</span></span><br><span class="line">    instance(config.baseConfig).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        config.success(res)</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        config.failure(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">'./network/request'</span></span><br><span class="line"></span><br><span class="line">request(&#123;</span><br><span class="line">  baseConfig: &#123;</span><br><span class="line">    url: <span class="string">'/home'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">  &#125;,</span><br><span class="line">  failure: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="level-3"><a href="#level-3" class="headerlink" title="level 3"></a>level 3</h3><p><strong>PromiseåŒ–</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªPromise</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">            baseURL: <span class="string">' http://www.liulongbin.top:3005'</span>,</span><br><span class="line">            timeout: <span class="number">5000</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        instance(config).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(res)</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">'./network/request'</span></span><br><span class="line"></span><br><span class="line">request(&#123;</span><br><span class="line">  url: <span class="string">'/api/getlunbo'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="level-4"><a href="#level-4" class="headerlink" title="level 4"></a>level 4</h3><p>ä¸Šé¢å°è£…æˆ Promise çš„ç‰ˆæœ¬è¿˜ä¸æ˜¯æœ€å¥½çš„ï¼Œäº‹å®ä¸Š<code>instance(config)</code>æ‰€è¿”å›çš„å°±æ˜¯ä¸€ä¸ª <strong>Promise</strong>ï¼Œå› æ­¤å¯ä»¥ä¸å¿…å†å»å°è£…æˆ Promise ï¼Œç›´æ¥å°† <code>instance(config)</code>è¿”å›å‡ºæ¥å³å¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªPromise</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">        baseURL: <span class="string">' http://www.liulongbin.top:3005'</span>,</span><br><span class="line">        timeout: <span class="number">5000</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> instance(config)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">'./network/request'</span></span><br><span class="line"></span><br><span class="line">request(&#123;</span><br><span class="line">  url: <span class="string">'/api/getlunbo'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br><br></p>
<h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><p>åœ¨è¯·æ±‚æˆ–å“åº”è¢« <code>then</code> æˆ– <code>catch</code> å¤„ç†å‰æ‹¦æˆªå®ƒä»¬ã€‚</p>
<p>ä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li>å½“configä¸­çš„ä¸€äº›ä¿¡æ¯ä¸ç¬¦åˆæœåŠ¡å™¨è¦æ±‚ï¼Œå¯ä»¥åœ¨å‘é€è¯·æ±‚ä¹‹å‰æ‹¦æˆªä¹‹å¹¶è¿›è¡Œä¿®æ”¹</li>
<li>æ¯æ¬¡å‘é€ç½‘ç»œè¯·æ±‚æ—¶ï¼Œåœ¨ç•Œé¢ä¸­è§¦å‘åŠ è½½åŠ¨ç”»ï¼Œå“åº”å®Œæˆæ—¶å…³é—­åŠ è½½åŠ¨ç”»</li>
<li>æŸäº›ç½‘ç»œè¯·æ±‚ï¼ˆæ¯”å¦‚ç™»å½•çš„tokenï¼‰ï¼Œå¿…é¡»æºå¸¦ä¸€äº›ç‰¹æ®Šçš„ä¿¡æ¯</li>
<li>ç­‰ç­‰ç­‰</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³åœ¨ç¨åç§»é™¤æ‹¦æˆªå™¨ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myInterceptor = axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">/*...*/</span>&#125;);</span><br><span class="line">axios.interceptors.request.eject(myInterceptor);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä¸ºè‡ªå®šä¹‰ axios å®ä¾‹æ·»åŠ æ‹¦æˆªå™¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instance = axios.create();</span><br><span class="line">instance.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">/*...*/</span>&#125;);</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªPromise</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">        baseURL: <span class="string">' http://www.liulongbin.top:3005'</span>,</span><br><span class="line">        timeout: <span class="number">5000</span></span><br><span class="line">    &#125;)</span><br><span class="line">    instance.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(config);<span class="comment">//æ‹¦æˆªconfigè¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œå°†å…¶æ‰“å°å‡ºæ¥ï¼Œè¿™é‡Œçš„configå®é™…ä¸Šå°±æ˜¯ä¸Šé¢çš„config</span></span><br><span class="line">        <span class="keyword">return</span> config  <span class="comment">//è¿™é‡Œå¿…é¡»return configä»¥å–æ¶ˆæ‹¦æˆªï¼Œå¦åˆ™ä¹‹åæ— æ³•å“åº”æˆåŠŸ</span></span><br><span class="line">    &#125;, err =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    instance.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);<span class="comment">//æ‹¦æˆªresè¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œå°†å…¶æ‰“å°å‡ºæ¥</span></span><br><span class="line">        <span class="keyword">return</span> res.data<span class="comment">//è¿™é‡Œå¿…é¡»return res.dataä»¥å–æ¶ˆæ‹¦æˆªï¼Œå¦åˆ™ä¹‹åæ— æ³•å“åº”æˆåŠŸ</span></span><br><span class="line">    &#125;, err =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> instance(config)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/08/08/viâ€”ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/08/08/viâ€”ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨.html" itemprop="url">viç¼–è¾‘å™¨æ•™ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-08T00:00:00+08:00">
                2019-08-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/08/08/viâ€”ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/08/08/viâ€”ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="vi-â€”â€”-ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨"><a href="#vi-â€”â€”-ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨" class="headerlink" title="vi â€”â€” ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨"></a><code>vi</code> â€”â€” ç»ˆç«¯ä¸­çš„ç¼–è¾‘å™¨</h1><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li><code>vi</code> ç®€ä»‹</li>
<li>æ‰“å¼€å’Œæ–°å»ºæ–‡ä»¶</li>
<li>ä¸‰ç§å·¥ä½œæ¨¡å¼</li>
<li>å¸¸ç”¨å‘½ä»¤</li>
<li>åˆ†å±å‘½ä»¤</li>
<li>å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥å›¾</li>
</ul>
<h2 id="01-vi-ç®€ä»‹"><a href="#01-vi-ç®€ä»‹" class="headerlink" title="01. vi ç®€ä»‹"></a>01. <code>vi</code> ç®€ä»‹</h2><h3 id="1-1-å­¦ä¹ -vi-çš„ç›®çš„"><a href="#1-1-å­¦ä¹ -vi-çš„ç›®çš„" class="headerlink" title="1.1 å­¦ä¹  vi çš„ç›®çš„"></a>1.1 å­¦ä¹  <code>vi</code> çš„ç›®çš„</h3><ul>
<li>åœ¨å·¥ä½œä¸­ï¼Œè¦å¯¹ <strong>æœåŠ¡å™¨</strong> ä¸Šçš„æ–‡ä»¶è¿›è¡Œ <strong>ç®€å•</strong> çš„ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>ssh</code> è¿œç¨‹ç™»å½•åˆ°æœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¸”ä½¿ç”¨ <code>vi</code> è¿›è¡Œå¿«é€Ÿçš„ç¼–è¾‘å³å¯</li>
<li>å¸¸è§éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶åŒ…æ‹¬ï¼š<ul>
<li><strong>æºç¨‹åº</strong></li>
<li><strong>é…ç½®æ–‡ä»¶</strong>ï¼Œä¾‹å¦‚ <code>ssh</code> çš„é…ç½®æ–‡ä»¶ <code>~/.ssh/config</code></li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>åœ¨æ²¡æœ‰å›¾å½¢ç•Œé¢çš„ç¯å¢ƒä¸‹ï¼Œè¦ç¼–è¾‘æ–‡ä»¶ï¼Œ<code>vi</code> æ˜¯æœ€ä½³é€‰æ‹©ï¼</li>
<li>æ¯ä¸€ä¸ªè¦ä½¿ç”¨ Linux çš„ç¨‹åºå‘˜ï¼Œéƒ½åº”è¯¥æˆ–å¤šæˆ–å°‘çš„å­¦ä¹ ä¸€äº› <code>vi</code> çš„å¸¸ç”¨å‘½ä»¤</li>
</ul>
</blockquote>
<h3 id="1-2-vi-å’Œ-vim"><a href="#1-2-vi-å’Œ-vim" class="headerlink" title="1.2 vi å’Œ vim"></a>1.2 vi å’Œ vim</h3><ul>
<li>åœ¨å¾ˆå¤š <code>Linux</code> å‘è¡Œç‰ˆä¸­ï¼Œç›´æ¥æŠŠ <code>vi</code> åšæˆ <code>vim</code> çš„è½¯è¿æ¥</li>
</ul>
<h4 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h4><ul>
<li><code>vi</code> æ˜¯ <code>Visual interface</code> çš„ç®€ç§°ï¼Œæ˜¯ <code>Linux</code> ä¸­ <strong>æœ€ç»å…¸</strong> çš„æ–‡æœ¬ç¼–è¾‘å™¨</li>
<li><code>vi</code> çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ â€”â€” <strong>è®©ç¨‹åºå‘˜çš„æ‰‹æŒ‡å§‹ç»ˆä¿æŒåœ¨é”®ç›˜çš„æ ¸å¿ƒåŒºåŸŸï¼Œå°±èƒ½å®Œæˆæ‰€æœ‰çš„ç¼–è¾‘æ“ä½œ</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vi/001_vi%E9%94%AE%E7%9B%98.png" alt="001_vié”®ç›˜-w551"></p>
<ul>
<li><code>vi</code> çš„ç‰¹ç‚¹ï¼š<ul>
<li><strong>æ²¡æœ‰å›¾å½¢ç•Œé¢</strong> çš„ <strong>åŠŸèƒ½å¼ºå¤§</strong> çš„ç¼–è¾‘å™¨</li>
<li>åªèƒ½æ˜¯ç¼–è¾‘ <strong>æ–‡æœ¬å†…å®¹</strong>ï¼Œä¸èƒ½å¯¹å­—ä½“ã€æ®µè½è¿›è¡Œæ’ç‰ˆ</li>
<li><strong>ä¸æ”¯æŒé¼ æ ‡æ“ä½œ</strong></li>
<li><strong>æ²¡æœ‰èœå•</strong></li>
<li><strong>åªæœ‰å‘½ä»¤</strong></li>
</ul>
</li>
<li><code>vi</code> ç¼–è¾‘å™¨åœ¨ <strong>ç³»ç»Ÿç®¡ç†</strong>ã€<strong>æœåŠ¡å™¨ç®¡ç†</strong> ç¼–è¾‘æ–‡ä»¶æ—¶ï¼Œ<strong>å…¶åŠŸèƒ½æ°¸è¿œä¸æ˜¯å›¾å½¢ç•Œé¢çš„ç¼–è¾‘å™¨èƒ½æ¯”æ‹Ÿçš„</strong></li>
</ul>
<h4 id="vim"><a href="#vim" class="headerlink" title="vim"></a><code>vim</code></h4><p><strong>vim = vi improved</strong></p>
<ul>
<li><code>vim</code> æ˜¯ä» <code>vi</code> å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ”¯æŒ <strong>ä»£ç è¡¥å…¨</strong>ã€<strong>ç¼–è¯‘</strong> åŠ <strong>é”™è¯¯è·³è½¬</strong> ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œè¢«ç§°ä¸º <strong>ç¼–è¾‘å™¨ä¹‹ç¥</strong></li>
</ul>
<h4 id="æŸ¥è¯¢è½¯è¿æ¥å‘½ä»¤ï¼ˆçŸ¥é“ï¼‰"><a href="#æŸ¥è¯¢è½¯è¿æ¥å‘½ä»¤ï¼ˆçŸ¥é“ï¼‰" class="headerlink" title="æŸ¥è¯¢è½¯è¿æ¥å‘½ä»¤ï¼ˆçŸ¥é“ï¼‰"></a>æŸ¥è¯¢è½¯è¿æ¥å‘½ä»¤ï¼ˆçŸ¥é“ï¼‰</h4><ul>
<li>åœ¨å¾ˆå¤š <code>Linux</code> å‘è¡Œç‰ˆä¸­ç›´æ¥æŠŠ <code>vi</code> åšæˆ <code>vim</code> çš„è½¯è¿æ¥</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥æ‰¾ vi çš„è¿è¡Œæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">which</span> vi</span><br><span class="line">$ ls -l /usr/bin/vi</span><br><span class="line">$ ls -l /etc/alternatives/vi</span><br><span class="line">$ ls -l /usr/bin/vim.basic</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ vim çš„è¿è¡Œæ–‡ä»¶</span></span><br><span class="line">$ <span class="built_in">which</span> vim</span><br><span class="line">$ ls -l /usr/bin/vim</span><br><span class="line">$ ls -l /etc/alternatives/vim</span><br><span class="line">$ ls -l /usr/bin/vim.basic</span><br></pre></td></tr></table></figure>
<h2 id="02-æ‰“å¼€å’Œæ–°å»ºæ–‡ä»¶"><a href="#02-æ‰“å¼€å’Œæ–°å»ºæ–‡ä»¶" class="headerlink" title="02. æ‰“å¼€å’Œæ–°å»ºæ–‡ä»¶"></a>02. æ‰“å¼€å’Œæ–°å»ºæ–‡ä»¶</h2><ul>
<li>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ <code>vi</code> <strong>åœ¨åé¢è·Ÿä¸Šæ–‡ä»¶å</strong> å³å¯</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi æ–‡ä»¶å</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¼šç›´æ¥æ‰“å¼€è¯¥æ–‡ä»¶</li>
<li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šæ–°å»ºä¸€ä¸ªæ–‡ä»¶</li>
</ul>
<h3 id="2-1-æ‰“å¼€æ–‡ä»¶å¹¶ä¸”å®šä½è¡Œ"><a href="#2-1-æ‰“å¼€æ–‡ä»¶å¹¶ä¸”å®šä½è¡Œ" class="headerlink" title="2.1 æ‰“å¼€æ–‡ä»¶å¹¶ä¸”å®šä½è¡Œ"></a>2.1 æ‰“å¼€æ–‡ä»¶å¹¶ä¸”å®šä½è¡Œ</h3><ul>
<li>åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ° <strong>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å®šä½åˆ°æŒ‡å®šè¡Œ</strong> çš„æƒ…å†µ</li>
<li><p>ä¾‹å¦‚ï¼šåœ¨å¼€å‘æ—¶ï¼Œ<strong>çŸ¥é“æŸä¸€è¡Œä»£ç æœ‰é”™è¯¯</strong>ï¼Œå¯ä»¥ <strong>å¿«é€Ÿå®šä½</strong> åˆ°å‡ºé”™ä»£ç çš„ä½ç½®</p>
</li>
<li><p>è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰“å¼€æ–‡ä»¶</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi æ–‡ä»¶å +è¡Œæ•°</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æç¤ºï¼šå¦‚æœåªå¸¦ä¸Š <code>+</code> è€Œä¸æŒ‡å®šè¡Œå·ï¼Œä¼šç›´æ¥å®šä½åˆ°æ–‡ä»¶æœ«å°¾</p>
</blockquote>
<h3 id="2-2-å¼‚å¸¸å¤„ç†"><a href="#2-2-å¼‚å¸¸å¤„ç†" class="headerlink" title="2.2 å¼‚å¸¸å¤„ç†"></a>2.2 å¼‚å¸¸å¤„ç†</h3><ul>
<li>å¦‚æœ <code>vi</code> å¼‚å¸¸é€€å‡ºï¼Œåœ¨ç£ç›˜ä¸Šå¯èƒ½ä¼šä¿å­˜æœ‰ <strong>äº¤æ¢æ–‡ä»¶</strong></li>
<li>ä¸‹æ¬¡å†ä½¿ç”¨ <code>vi</code> ç¼–è¾‘è¯¥æ–‡ä»¶æ—¶ï¼Œä¼šçœ‹åˆ°ä»¥ä¸‹å±å¹•ä¿¡æ¯ï¼ŒæŒ‰ä¸‹å­—æ¯ <code>d</code> å¯ä»¥ <strong>åˆ é™¤äº¤æ¢æ–‡ä»¶</strong> å³å¯</li>
</ul>
<blockquote>
<p>æç¤ºï¼šæŒ‰ä¸‹é”®ç›˜æ—¶ï¼Œæ³¨æ„å…³é—­è¾“å…¥æ³•</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vi/002_%E5%88%A0%E9%99%A4%E4%BA%A4%E6%8D%A2%E6%96%87%E4%BB%B6.png" alt="002_åˆ é™¤äº¤æ¢æ–‡ä»¶-w1048"></p>
<h2 id="03-ä¸‰ç§å·¥ä½œæ¨¡å¼"><a href="#03-ä¸‰ç§å·¥ä½œæ¨¡å¼" class="headerlink" title="03. ä¸‰ç§å·¥ä½œæ¨¡å¼"></a>03. ä¸‰ç§å·¥ä½œæ¨¡å¼</h2><ul>
<li><p><code>vi</code> æœ‰ä¸‰ç§åŸºæœ¬å·¥ä½œæ¨¡å¼ï¼š</p>
<ol>
<li><strong>å‘½ä»¤æ¨¡å¼</strong><ul>
<li><strong>æ‰“å¼€æ–‡ä»¶é¦–å…ˆè¿›å…¥å‘½ä»¤æ¨¡å¼</strong>ï¼Œæ˜¯ä½¿ç”¨ <code>vi</code> çš„ <strong>å…¥å£</strong></li>
<li>é€šè¿‡ <strong>å‘½ä»¤</strong> å¯¹æ–‡ä»¶è¿›è¡Œå¸¸è§„çš„ç¼–è¾‘æ“ä½œï¼Œä¾‹å¦‚ï¼š<strong>å®šä½</strong>ã€<strong>ç¿»é¡µ</strong>ã€<strong>å¤åˆ¶</strong>ã€<strong>ç²˜è´´</strong>ã€<strong>åˆ é™¤</strong>â€¦â€¦</li>
<li>åœ¨å…¶ä»–å›¾å½¢ç¼–è¾‘å™¨ä¸‹ï¼Œé€šè¿‡ <strong>å¿«æ·é”®</strong> æˆ–è€… <strong>é¼ æ ‡</strong> å®ç°çš„æ“ä½œï¼Œéƒ½åœ¨ <strong>å‘½ä»¤æ¨¡å¼</strong> ä¸‹å®ç°</li>
</ul>
</li>
<li><strong>æœ«è¡Œæ¨¡å¼</strong> â€”â€” æ‰§è¡Œ <strong>ä¿å­˜</strong>ã€<strong>é€€å‡º</strong> ç­‰æ“ä½œ <ul>
<li>è¦é€€å‡º <code>vi</code> è¿”å›åˆ°æ§åˆ¶å°ï¼Œéœ€è¦åœ¨æœ«è¡Œæ¨¡å¼ä¸‹è¾“å…¥å‘½ä»¤</li>
<li><strong>æœ«è¡Œæ¨¡å¼</strong> æ˜¯ <code>vi</code> çš„ <strong>å‡ºå£</strong></li>
</ul>
</li>
<li><strong>ç¼–è¾‘æ¨¡å¼</strong> â€”â€” æ­£å¸¸çš„ç¼–è¾‘æ–‡å­—</li>
</ol>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vi/003_vi%E7%9A%84%E6%A8%A1%E5%BC%8F.png" alt="003_viçš„æ¨¡å¼-w500"></p>
<blockquote>
<p>æç¤ºï¼šåœ¨ <code>Touch Bar</code> çš„ Mac ç”µè„‘ä¸Š ï¼ŒæŒ‰ <code>ESC</code> ä¸æ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨ <code>CTRL + [</code> æ›¿ä»£</p>
</blockquote>
<h3 id="æœ«è¡Œæ¨¡å¼å‘½ä»¤"><a href="#æœ«è¡Œæ¨¡å¼å‘½ä»¤" class="headerlink" title="æœ«è¡Œæ¨¡å¼å‘½ä»¤"></a>æœ«è¡Œæ¨¡å¼å‘½ä»¤</h3><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">write</td>
<td>ä¿å­˜</td>
</tr>
<tr>
<td style="text-align:center">q</td>
<td style="text-align:center">quit</td>
<td>é€€å‡ºï¼Œå¦‚æœæ²¡æœ‰ä¿å­˜ï¼Œä¸å…è®¸é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">q!</td>
<td style="text-align:center">quit</td>
<td>å¼ºè¡Œé€€å‡ºï¼Œä¸ä¿å­˜é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">wq</td>
<td style="text-align:center">write &amp; quit</td>
<td>ä¿å­˜å¹¶é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">x</td>
<td style="text-align:center"></td>
<td>ä¿å­˜å¹¶é€€å‡º</td>
</tr>
</tbody>
</table>
<h2 id="04-å¸¸ç”¨å‘½ä»¤"><a href="#04-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="04. å¸¸ç”¨å‘½ä»¤"></a>04. å¸¸ç”¨å‘½ä»¤</h2><h3 id="å‘½ä»¤çº¿è·¯å›¾"><a href="#å‘½ä»¤çº¿è·¯å›¾" class="headerlink" title="å‘½ä»¤çº¿è·¯å›¾"></a>å‘½ä»¤çº¿è·¯å›¾</h3><ol start="0">
<li>é‡å¤æ¬¡æ•°<ul>
<li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œ<strong>å…ˆè¾“å…¥ä¸€ä¸ªæ•°å­—</strong>ï¼Œ<strong>å†è·Ÿä¸Šä¸€ä¸ªå‘½ä»¤</strong>ï¼Œå¯ä»¥è®©è¯¥å‘½ä»¤ <strong>é‡å¤æ‰§è¡ŒæŒ‡å®šæ¬¡æ•°</strong> </li>
</ul>
</li>
<li>ç§»åŠ¨å’Œé€‰æ‹©ï¼ˆ<strong>å¤šç»ƒ</strong>ï¼‰<ul>
<li><code>vi</code> ä¹‹æ‰€ä»¥å¿«ï¼Œå…³é”®åœ¨äº <strong>èƒ½å¤Ÿå¿«é€Ÿå®šä½åˆ°è¦ç¼–è¾‘çš„ä»£ç è¡Œ</strong></li>
<li><strong>ç§»åŠ¨å‘½ä»¤</strong> èƒ½å¤Ÿ å’Œ <strong>ç¼–è¾‘æ“ä½œ</strong> å‘½ä»¤ <strong>ç»„åˆä½¿ç”¨</strong></li>
</ul>
</li>
<li>ç¼–è¾‘æ“ä½œ<ul>
<li><strong>åˆ é™¤</strong>ã€<strong>å¤åˆ¶</strong>ã€<strong>ç²˜è´´</strong>ã€<strong>æ›¿æ¢</strong>ã€<strong>ç¼©æ’</strong></li>
</ul>
</li>
<li>æ’¤é”€å’Œé‡å¤</li>
<li>æŸ¥æ‰¾æ›¿æ¢</li>
<li>ç¼–è¾‘</li>
</ol>
<h4 id="å­¦ä¹ æç¤º"><a href="#å­¦ä¹ æç¤º" class="headerlink" title="å­¦ä¹ æç¤º"></a>å­¦ä¹ æç¤º</h4><ol>
<li><code>vi</code> çš„å‘½ä»¤è¾ƒå¤šï¼Œ<strong>ä¸è¦æœŸæœ›ä¸€ä¸‹å­å…¨éƒ¨è®°ä½</strong>ï¼Œä¸ªåˆ«å‘½ä»¤å¿˜è®°äº†ï¼Œåªæ˜¯ä¼šå½±å“ç¼–è¾‘é€Ÿåº¦è€Œå·²</li>
<li>åœ¨ä½¿ç”¨ <code>vi</code> å‘½ä»¤æ—¶ï¼Œæ³¨æ„ <strong>å…³é—­ä¸­æ–‡è¾“å…¥æ³•</strong></li>
</ol>
<h3 id="4-1-ç§»åŠ¨ï¼ˆåŸºæœ¬ï¼‰"><a href="#4-1-ç§»åŠ¨ï¼ˆåŸºæœ¬ï¼‰" class="headerlink" title="4.1 ç§»åŠ¨ï¼ˆåŸºæœ¬ï¼‰"></a>4.1 ç§»åŠ¨ï¼ˆåŸºæœ¬ï¼‰</h3><ul>
<li>è¦ç†Ÿç»ƒä½¿ç”¨ <code>vi</code>ï¼Œé¦–å…ˆåº”è¯¥å­¦ä¼šæ€ä¹ˆåœ¨ <strong>å‘½ä»¤æ¨¡å¼</strong> ä¸‹æ ·å¿«é€Ÿç§»åŠ¨å…‰æ ‡</li>
<li><strong>ç¼–è¾‘æ“ä½œå‘½ä»¤</strong>ï¼Œèƒ½å¤Ÿå’Œ <strong>ç§»åŠ¨å‘½ä»¤</strong> ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨</li>
</ul>
<h4 id="1-ä¸Šã€ä¸‹ã€å·¦ã€å³"><a href="#1-ä¸Šã€ä¸‹ã€å·¦ã€å³" class="headerlink" title="1) ä¸Šã€ä¸‹ã€å·¦ã€å³"></a>1) ä¸Šã€ä¸‹ã€å·¦ã€å³</h4><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th>åŠŸèƒ½</th>
<th style="text-align:center">æ‰‹æŒ‡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">h</td>
<td>å‘å·¦</td>
<td style="text-align:center">é£ŸæŒ‡</td>
</tr>
<tr>
<td style="text-align:center">j</td>
<td>å‘ä¸‹</td>
<td style="text-align:center">é£ŸæŒ‡</td>
</tr>
<tr>
<td style="text-align:center">k</td>
<td>å‘ä¸Š</td>
<td style="text-align:center">ä¸­æŒ‡</td>
</tr>
<tr>
<td style="text-align:center">l</td>
<td>å‘å³</td>
<td style="text-align:center">æ— åæŒ‡</td>
</tr>
</tbody>
</table>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vi/005_%E7%A7%BB%E5%8A%A8%E5%85%89%E6%A0%87.png" alt="005_ç§»åŠ¨å…‰æ ‡-w551"></p>
<h4 id="2-è¡Œå†…ç§»åŠ¨"><a href="#2-è¡Œå†…ç§»åŠ¨" class="headerlink" title="2) è¡Œå†…ç§»åŠ¨"></a>2) è¡Œå†…ç§»åŠ¨</h4><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">word</td>
<td>å‘åç§»åŠ¨ä¸€ä¸ªå•è¯</td>
</tr>
<tr>
<td style="text-align:center">b</td>
<td style="text-align:center">back</td>
<td>å‘å‰ç§»åŠ¨ä¸€ä¸ªå•è¯</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center"></td>
<td>è¡Œé¦–</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center"></td>
<td>è¡Œé¦–ï¼Œç¬¬ä¸€ä¸ªä¸æ˜¯ç©ºç™½å­—ç¬¦çš„ä½ç½®</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:center"></td>
<td>è¡Œå°¾</td>
</tr>
</tbody>
</table>
<h4 id="3-è¡Œæ•°ç§»åŠ¨"><a href="#3-è¡Œæ•°ç§»åŠ¨" class="headerlink" title="3) è¡Œæ•°ç§»åŠ¨"></a>3) è¡Œæ•°ç§»åŠ¨</h4><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">gg</td>
<td style="text-align:center">go</td>
<td>æ–‡ä»¶é¡¶éƒ¨</td>
</tr>
<tr>
<td style="text-align:center">G</td>
<td style="text-align:center">go</td>
<td>æ–‡ä»¶æœ«å°¾</td>
</tr>
<tr>
<td style="text-align:center">æ•°å­—gg</td>
<td style="text-align:center">go</td>
<td>ç§»åŠ¨åˆ° æ•°å­— å¯¹åº”è¡Œæ•°</td>
</tr>
<tr>
<td style="text-align:center">æ•°å­—G</td>
<td style="text-align:center">go</td>
<td>ç§»åŠ¨åˆ° æ•°å­— å¯¹åº”è¡Œæ•°</td>
</tr>
<tr>
<td style="text-align:center">:æ•°å­—</td>
<td style="text-align:center"></td>
<td>ç§»åŠ¨åˆ° æ•°å­— å¯¹åº”è¡Œæ•°</td>
</tr>
</tbody>
</table>
<h4 id="4-å±å¹•ç§»åŠ¨"><a href="#4-å±å¹•ç§»åŠ¨" class="headerlink" title="4) å±å¹•ç§»åŠ¨"></a>4) å±å¹•ç§»åŠ¨</h4><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Ctrl + b</td>
<td style="text-align:center">back</td>
<td>å‘ä¸Šç¿»é¡µ</td>
</tr>
<tr>
<td style="text-align:center">Ctrl + f</td>
<td style="text-align:center">forward</td>
<td>å‘ä¸‹ç¿»é¡µ</td>
</tr>
<tr>
<td style="text-align:center">H</td>
<td style="text-align:center">Head</td>
<td>å±å¹•é¡¶éƒ¨</td>
</tr>
<tr>
<td style="text-align:center">M</td>
<td style="text-align:center">Middle</td>
<td>å±å¹•ä¸­é—´</td>
</tr>
<tr>
<td style="text-align:center">L</td>
<td style="text-align:center">Low</td>
<td>å±å¹•åº•éƒ¨</td>
</tr>
</tbody>
</table>
<h3 id="4-2-ç§»åŠ¨ï¼ˆç¨‹åºï¼‰"><a href="#4-2-ç§»åŠ¨ï¼ˆç¨‹åºï¼‰" class="headerlink" title="4.2 ç§»åŠ¨ï¼ˆç¨‹åºï¼‰"></a>4.2 ç§»åŠ¨ï¼ˆç¨‹åºï¼‰</h3><h4 id="1-æ®µè½ç§»åŠ¨"><a href="#1-æ®µè½ç§»åŠ¨" class="headerlink" title="1) æ®µè½ç§»åŠ¨"></a>1) æ®µè½ç§»åŠ¨</h4><ul>
<li><code>vi</code> ä¸­ä½¿ç”¨ ç©ºè¡Œ æ¥åŒºåˆ†æ®µè½</li>
<li>åœ¨ç¨‹åºå¼€å‘æ—¶ï¼Œé€šå¸¸ <strong>ä¸€æ®µåŠŸèƒ½ç›¸å…³çš„ä»£ç ä¼šå†™åœ¨ä¸€èµ·</strong> â€”â€” ä¹‹é—´æ²¡æœ‰ç©ºè¡Œ</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">{</td>
<td>ä¸Šä¸€æ®µ</td>
</tr>
<tr>
<td style="text-align:center">}</td>
<td>ä¸‹ä¸€æ®µ</td>
</tr>
</tbody>
</table>
<h4 id="2-æ‹¬å·åˆ‡æ¢"><a href="#2-æ‹¬å·åˆ‡æ¢" class="headerlink" title="2) æ‹¬å·åˆ‡æ¢"></a>2) æ‹¬å·åˆ‡æ¢</h4><ul>
<li>åœ¨ç¨‹åºä¸–ç•Œä¸­ï¼Œ<code>()</code>ã€<code>[]</code>ã€<code>{}</code> ä½¿ç”¨é¢‘ç‡å¾ˆé«˜ï¼Œè€Œä¸” <strong>éƒ½æ˜¯æˆå¯¹å‡ºç°çš„</strong></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">%</td>
<td>æ‹¬å·åŒ¹é…åŠåˆ‡æ¢</td>
</tr>
</tbody>
</table>
<h4 id="3-æ ‡è®°"><a href="#3-æ ‡è®°" class="headerlink" title="3) æ ‡è®°"></a>3) æ ‡è®°</h4><ul>
<li>åœ¨å¼€å‘æ—¶ï¼ŒæŸä¸€å—ä»£ç å¯èƒ½<strong>éœ€è¦ç¨åå¤„ç†</strong>ï¼Œä¾‹å¦‚ï¼šç¼–è¾‘ã€æŸ¥çœ‹</li>
<li>æ­¤æ—¶å…ˆä½¿ç”¨ <code>m</code> å¢åŠ ä¸€ä¸ªæ ‡è®°ï¼Œè¿™æ ·å¯ä»¥ <strong>åœ¨éœ€è¦æ—¶å¿«é€Ÿåœ°è·³è½¬å›æ¥</strong> æˆ–è€… <strong>æ‰§è¡Œå…¶ä»–ç¼–è¾‘æ“ä½œ</strong></li>
<li><strong>æ ‡è®°åç§°</strong> å¯ä»¥æ˜¯ <code>a~z</code> æˆ–è€… <code>A~Z</code> ä¹‹é—´çš„ä»»æ„ <strong>ä¸€ä¸ª</strong> å­—æ¯</li>
<li>æ·»åŠ äº†æ ‡è®°çš„ <strong>è¡Œå¦‚æœè¢«åˆ é™¤</strong>ï¼Œ<strong>æ ‡è®°åŒæ—¶è¢«åˆ é™¤</strong></li>
<li>å¦‚æœ <strong>åœ¨å…¶ä»–è¡Œæ·»åŠ äº†ç›¸åŒåç§°çš„æ ‡è®°</strong>ï¼Œ<strong>ä¹‹å‰æ·»åŠ çš„æ ‡è®°ä¹Ÿä¼šè¢«æ›¿æ¢æ‰</strong></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">mx</td>
<td style="text-align:center">mark</td>
<td>æ·»åŠ æ ‡è®° xï¼Œx æ˜¯ a~z æˆ–è€… A~Z ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªå­—æ¯</td>
</tr>
<tr>
<td style="text-align:center">â€˜x</td>
<td style="text-align:center"></td>
<td>ç›´æ¥å®šä½åˆ°æ ‡è®° x æ‰€åœ¨ä½ç½®</td>
</tr>
</tbody>
</table>
<h3 id="4-3-é€‰ä¸­æ–‡æœ¬ï¼ˆå¯è§†æ¨¡å¼ï¼‰"><a href="#4-3-é€‰ä¸­æ–‡æœ¬ï¼ˆå¯è§†æ¨¡å¼ï¼‰" class="headerlink" title="4.3 é€‰ä¸­æ–‡æœ¬ï¼ˆå¯è§†æ¨¡å¼ï¼‰"></a>4.3 é€‰ä¸­æ–‡æœ¬ï¼ˆå¯è§†æ¨¡å¼ï¼‰</h3><ul>
<li>å­¦ä¹  <code>å¤åˆ¶</code> å‘½ä»¤å‰ï¼Œåº”è¯¥å…ˆå­¦ä¼š <strong>æ€ä¹ˆæ ·é€‰ä¸­ è¦å¤åˆ¶çš„ä»£ç </strong></li>
<li>åœ¨ <code>vi</code> ä¸­è¦é€‰æ‹©æ–‡æœ¬ï¼Œéœ€è¦å…ˆä½¿ç”¨ <code>Visual</code> å‘½ä»¤åˆ‡æ¢åˆ° <strong>å¯è§†æ¨¡å¼</strong></li>
<li><code>vi</code> ä¸­æä¾›äº† <strong>ä¸‰ç§</strong> å¯è§†æ¨¡å¼ï¼Œå¯ä»¥æ–¹ä¾¿ç¨‹åºå‘˜é€‰æ‹© <strong>é€‰ä¸­æ–‡æœ¬çš„æ–¹å¼</strong></li>
<li>æŒ‰ <code>ESC</code> å¯ä»¥æ”¾å¼ƒé€‰ä¸­ï¼Œè¿”å›åˆ° <strong>å‘½ä»¤æ¨¡å¼</strong></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th>æ¨¡å¼</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">v</td>
<td>å¯è§†æ¨¡å¼</td>
<td>ä»å…‰æ ‡ä½ç½®å¼€å§‹æŒ‰ç…§æ­£å¸¸æ¨¡å¼é€‰æ‹©æ–‡æœ¬</td>
</tr>
<tr>
<td style="text-align:center">V</td>
<td>å¯è§†è¡Œæ¨¡å¼</td>
<td>é€‰ä¸­å…‰æ ‡ç»è¿‡çš„å®Œæ•´è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">Ctrl + v</td>
<td>å¯è§†å—æ¨¡å¼</td>
<td>å‚ç›´æ–¹å‘é€‰ä¸­æ–‡æœ¬</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>å¯è§†æ¨¡å¼</strong>ä¸‹ï¼Œå¯ä»¥å’Œ <strong>ç§»åŠ¨å‘½ä»¤</strong> è¿ç”¨ï¼Œä¾‹å¦‚ï¼š<code>ggVG</code> èƒ½å¤Ÿé€‰ä¸­æ‰€æœ‰å†…å®¹</li>
</ul>
<h3 id="4-4-æ’¤é”€å’Œæ¢å¤æ’¤é”€"><a href="#4-4-æ’¤é”€å’Œæ¢å¤æ’¤é”€" class="headerlink" title="4.4 æ’¤é”€å’Œæ¢å¤æ’¤é”€"></a>4.4 æ’¤é”€å’Œæ¢å¤æ’¤é”€</h3><ul>
<li>åœ¨å­¦ä¹ ç¼–è¾‘å‘½ä»¤ä¹‹å‰ï¼Œå…ˆè¦çŸ¥é“æ€æ ·æ’¤é”€ä¹‹å‰ä¸€æ¬¡ <strong>é”™è¯¯çš„</strong> ç¼–è¾‘åŠ¨ä½œï¼</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">u</td>
<td style="text-align:center">undo</td>
<td>æ’¤é”€ä¸Šæ¬¡å‘½ä»¤</td>
</tr>
<tr>
<td style="text-align:center">CTRL + r</td>
<td style="text-align:center">redo</td>
<td>æ¢å¤æ’¤é”€çš„å‘½ä»¤</td>
</tr>
</tbody>
</table>
<h3 id="4-5-åˆ é™¤æ–‡æœ¬"><a href="#4-5-åˆ é™¤æ–‡æœ¬" class="headerlink" title="4.5 åˆ é™¤æ–‡æœ¬"></a>4.5 åˆ é™¤æ–‡æœ¬</h3><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">x</td>
<td style="text-align:center">cut</td>
<td>åˆ é™¤å…‰æ ‡æ‰€åœ¨å­—ç¬¦ï¼Œæˆ–è€…é€‰ä¸­æ–‡å­—</td>
</tr>
<tr>
<td style="text-align:center">d(ç§»åŠ¨å‘½ä»¤)</td>
<td style="text-align:center">delete</td>
<td>åˆ é™¤ç§»åŠ¨å‘½ä»¤å¯¹åº”çš„å†…å®¹</td>
</tr>
<tr>
<td style="text-align:center">dd</td>
<td style="text-align:center">delete</td>
<td>åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œï¼Œå¯ä»¥ ndd å¤åˆ¶å¤šè¡Œ</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td style="text-align:center">delete</td>
<td>åˆ é™¤è‡³è¡Œå°¾</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æç¤ºï¼šå¦‚æœä½¿ç”¨ <strong>å¯è§†æ¨¡å¼</strong> å·²ç»é€‰ä¸­äº†ä¸€æ®µæ–‡æœ¬ï¼Œé‚£ä¹ˆæ— è®ºä½¿ç”¨ <code>d</code> è¿˜æ˜¯ <code>x</code>ï¼Œéƒ½å¯ä»¥åˆ é™¤é€‰ä¸­æ–‡æœ¬</p>
</blockquote>
<ul>
<li>åˆ é™¤å‘½ä»¤å¯ä»¥å’Œ <strong>ç§»åŠ¨å‘½ä»¤</strong> è¿ç”¨ï¼Œä»¥ä¸‹æ˜¯å¸¸è§çš„ç»„åˆå‘½ä»¤ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* dw        # ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°å•è¯æœ«å°¾</span><br><span class="line">* d0        # ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°ä¸€è¡Œçš„èµ·å§‹ä½ç½®</span><br><span class="line">* d&#125;        # ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°æ®µè½ç»“å°¾</span><br><span class="line">* ndd       # ä»å…‰æ ‡ä½ç½®å‘ä¸‹è¿ç»­åˆ é™¤ n è¡Œ</span><br><span class="line">* dä»£ç è¡ŒG   # ä»å…‰æ ‡æ‰€åœ¨è¡Œ åˆ é™¤åˆ° æŒ‡å®šä»£ç è¡Œ ä¹‹é—´çš„æ‰€æœ‰ä»£ç </span><br><span class="line">* d&apos;a       # ä»å…‰æ ‡æ‰€åœ¨è¡Œ åˆ é™¤åˆ° æ ‡è®°a ä¹‹é—´çš„æ‰€æœ‰ä»£ç </span><br></pre></td></tr></table></figure>
<h3 id="4-6-å¤åˆ¶ã€ç²˜è´´"><a href="#4-6-å¤åˆ¶ã€ç²˜è´´" class="headerlink" title="4.6 å¤åˆ¶ã€ç²˜è´´"></a>4.6 å¤åˆ¶ã€ç²˜è´´</h3><ul>
<li><code>vi</code> ä¸­æä¾›æœ‰ä¸€ä¸ª <strong>è¢«å¤åˆ¶æ–‡æœ¬çš„ç¼“å†²åŒº</strong><ul>
<li><strong>å¤åˆ¶</strong> å‘½ä»¤ä¼šå°†é€‰ä¸­çš„æ–‡å­—ä¿å­˜åœ¨ç¼“å†²åŒº </li>
<li><strong>åˆ é™¤</strong> å‘½ä»¤åˆ é™¤çš„æ–‡å­—ä¼šè¢«ä¿å­˜åœ¨ç¼“å†²åŒº</li>
<li>åœ¨éœ€è¦çš„ä½ç½®ï¼Œä½¿ç”¨ <strong>ç²˜è´´</strong> å‘½ä»¤å¯ä»¥å°†ç¼“å†²åŒºçš„æ–‡å­—æ’å…¥åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">y(ç§»åŠ¨å‘½ä»¤)</td>
<td style="text-align:center">copy</td>
<td>å¤åˆ¶</td>
</tr>
<tr>
<td style="text-align:center">yy</td>
<td style="text-align:center">copy</td>
<td>å¤åˆ¶ä¸€è¡Œï¼Œå¯ä»¥ nyy å¤åˆ¶å¤šè¡Œ</td>
</tr>
<tr>
<td style="text-align:center">p</td>
<td style="text-align:center">paste</td>
<td>ç²˜è´´</td>
</tr>
</tbody>
</table>
<p><strong>æç¤º</strong></p>
<ul>
<li>å‘½ä»¤ <code>d</code>ã€<code>x</code> ç±»ä¼¼äºå›¾å½¢ç•Œé¢çš„ <strong>å‰ªåˆ‡æ“ä½œ</strong> â€”â€” <code>CTRL + X</code></li>
<li>å‘½ä»¤ <code>y</code> ç±»ä¼¼äºå›¾å½¢ç•Œé¢çš„ <strong>å¤åˆ¶æ“ä½œ</strong> â€”â€” <code>CTRL + C</code></li>
<li>å‘½ä»¤ <code>p</code> ç±»ä¼¼äºå›¾å½¢ç•Œé¢çš„ <strong>ç²˜è´´æ“ä½œ</strong> â€”â€” <code>CTRL + V</code></li>
<li><code>vi</code> ä¸­çš„ <strong>æ–‡æœ¬ç¼“å†²åŒºåŒæ ·åªæœ‰ä¸€ä¸ª</strong>ï¼Œå¦‚æœåç»­åšè¿‡ <strong>å¤åˆ¶ã€å‰ªåˆ‡</strong> æ“ä½œï¼Œä¹‹å‰ç¼“å†²åŒºä¸­çš„å†…å®¹ä¼šè¢«æ›¿æ¢</li>
</ul>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li><code>vi</code> ä¸­çš„ <strong>æ–‡æœ¬ç¼“å†²åŒº</strong> å’Œç³»ç»Ÿçš„ <strong>å‰ªè´´æ¿</strong> ä¸æ˜¯åŒä¸€ä¸ª</li>
<li>æ‰€ä»¥åœ¨å…¶ä»–è½¯ä»¶ä¸­ä½¿ç”¨ <code>CTRL + C</code> å¤åˆ¶çš„å†…å®¹ï¼Œä¸èƒ½åœ¨ <code>vi</code> ä¸­é€šè¿‡ <code>P</code> å‘½ä»¤ç²˜è´´</li>
<li>å¯ä»¥åœ¨ <strong>ç¼–è¾‘æ¨¡å¼</strong> ä¸‹ä½¿ç”¨ <strong>é¼ æ ‡å³é”®ç²˜è´´</strong></li>
</ul>
<h3 id="4-7-æ›¿æ¢"><a href="#4-7-æ›¿æ¢" class="headerlink" title="4.7 æ›¿æ¢"></a>4.7 æ›¿æ¢</h3><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
<th>å·¥ä½œæ¨¡å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">r</td>
<td style="text-align:center">replace</td>
<td>æ›¿æ¢å½“å‰å­—ç¬¦</td>
<td>å‘½ä»¤æ¨¡å¼</td>
</tr>
<tr>
<td style="text-align:center">R</td>
<td style="text-align:center">replace</td>
<td>æ›¿æ¢å½“å‰è¡Œå…‰æ ‡åçš„å­—ç¬¦</td>
<td>æ›¿æ¢æ¨¡å¼</td>
</tr>
</tbody>
</table>
<ul>
<li><code>R</code> å‘½ä»¤å¯ä»¥è¿›å…¥ <strong>æ›¿æ¢æ¨¡å¼</strong>ï¼Œæ›¿æ¢å®Œæˆåï¼ŒæŒ‰ä¸‹ <code>ESC</code> å¯ä»¥å›åˆ° <strong>å‘½ä»¤æ¨¡å¼</strong></li>
<li><strong>æ›¿æ¢å‘½ä»¤</strong> çš„ä½œç”¨å°±æ˜¯ä¸ç”¨è¿›å…¥ <strong>ç¼–è¾‘æ¨¡å¼</strong>ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œ <strong>è½»é‡çº§çš„ä¿®æ”¹</strong></li>
</ul>
<h3 id="4-8-ç¼©æ’å’Œé‡å¤æ‰§è¡Œ"><a href="#4-8-ç¼©æ’å’Œé‡å¤æ‰§è¡Œ" class="headerlink" title="4.8 ç¼©æ’å’Œé‡å¤æ‰§è¡Œ"></a>4.8 ç¼©æ’å’Œé‡å¤æ‰§è¡Œ</h3><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&gt;&gt;</td>
<td>å‘å³å¢åŠ ç¼©è¿›</td>
</tr>
<tr>
<td style="text-align:center">&lt;&lt;</td>
<td>å‘å·¦å‡å°‘ç¼©è¿›</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td>é‡å¤ä¸Šæ¬¡å‘½ä»¤</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>ç¼©æ’å‘½ä»¤</strong> åœ¨å¼€å‘ç¨‹åºæ—¶ï¼Œ<strong>ç»Ÿä¸€å¢åŠ ä»£ç çš„ç¼©è¿›</strong> æ¯”è¾ƒæœ‰ç”¨ï¼<ul>
<li>ä¸€æ¬¡æ€§ <strong>åœ¨é€‰ä¸­ä»£ç å‰å¢åŠ  4 ä¸ªç©ºæ ¼</strong>ï¼Œå°±å«åš <strong>å¢åŠ ç¼©è¿›</strong></li>
<li>ä¸€æ¬¡æ€§ <strong>åœ¨é€‰ä¸­ä»£ç å‰åˆ é™¤ 4 ä¸ªç©ºæ ¼</strong>ï¼Œå°±å«åš <strong>å‡å°‘ç¼©è¿›</strong></li>
</ul>
</li>
<li>åœ¨ <strong>å¯è§†æ¨¡å¼</strong> ä¸‹ï¼Œç¼©æ’å‘½ä»¤åªéœ€è¦ä½¿ç”¨ <strong>ä¸€ä¸ª</strong> <code>&gt;</code> æˆ–è€… <code>&lt;</code> </li>
</ul>
<blockquote>
<p>åœ¨ç¨‹åºä¸­ï¼Œ<strong>ç¼©è¿›</strong> é€šå¸¸ç”¨æ¥è¡¨ç¤ºä»£ç çš„å½’å±å…³ç³»</p>
<ul>
<li>å‰é¢ç©ºæ ¼è¶Šå°‘ï¼Œä»£ç çš„çº§åˆ«è¶Šé«˜</li>
<li>å‰é¢ç©ºæ ¼è¶Šå¤šï¼Œä»£ç çš„çº§åˆ«è¶Šä½</li>
</ul>
</blockquote>
<h3 id="4-9-æŸ¥æ‰¾"><a href="#4-9-æŸ¥æ‰¾" class="headerlink" title="4.9 æŸ¥æ‰¾"></a>4.9 æŸ¥æ‰¾</h3><h4 id="å¸¸è§„æŸ¥æ‰¾"><a href="#å¸¸è§„æŸ¥æ‰¾" class="headerlink" title="å¸¸è§„æŸ¥æ‰¾"></a>å¸¸è§„æŸ¥æ‰¾</h4><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/str</td>
<td>æŸ¥æ‰¾ str</td>
</tr>
</tbody>
</table>
<ul>
<li>æŸ¥æ‰¾åˆ°æŒ‡å®šå†…å®¹ä¹‹åï¼Œä½¿ç”¨ <code>Next</code> æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå‡ºç°çš„ä½ç½®ï¼š<ul>
<li><code>n</code>: æŸ¥æ‰¾ä¸‹ä¸€ä¸ª</li>
<li><code>N</code>: æŸ¥æ‰¾ä¸Šä¸€ä¸ª</li>
</ul>
</li>
<li>å¦‚æœä¸æƒ³çœ‹åˆ°é«˜äº®æ˜¾ç¤ºï¼Œå¯ä»¥éšä¾¿æŸ¥æ‰¾ä¸€ä¸ªæ–‡ä»¶ä¸­ä¸å­˜åœ¨çš„å†…å®¹å³å¯</li>
</ul>
<h4 id="å•è¯å¿«é€ŸåŒ¹é…"><a href="#å•è¯å¿«é€ŸåŒ¹é…" class="headerlink" title="å•è¯å¿«é€ŸåŒ¹é…"></a>å•è¯å¿«é€ŸåŒ¹é…</h4><table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*</td>
<td>å‘åæŸ¥æ‰¾å½“å‰å…‰æ ‡æ‰€åœ¨å•è¯</td>
</tr>
<tr>
<td style="text-align:center">#</td>
<td>å‘å‰æŸ¥æ‰¾å½“å‰å…‰æ ‡æ‰€åœ¨å•è¯</td>
</tr>
</tbody>
</table>
<ul>
<li>åœ¨å¼€å‘ä¸­ï¼Œé€šè¿‡å•è¯å¿«é€ŸåŒ¹é…ï¼Œå¯ä»¥å¿«é€Ÿçœ‹åˆ°è¿™ä¸ªå•è¯åœ¨å…¶ä»–ä»€ä¹ˆä½ç½®ä½¿ç”¨è¿‡</li>
</ul>
<h3 id="4-10-æŸ¥æ‰¾å¹¶æ›¿æ¢"><a href="#4-10-æŸ¥æ‰¾å¹¶æ›¿æ¢" class="headerlink" title="4.10 æŸ¥æ‰¾å¹¶æ›¿æ¢"></a>4.10 æŸ¥æ‰¾å¹¶æ›¿æ¢</h3><ul>
<li>åœ¨ <code>vi</code> ä¸­æŸ¥æ‰¾å’Œæ›¿æ¢å‘½ä»¤éœ€è¦åœ¨ <strong>æœ«è¡Œæ¨¡å¼</strong> ä¸‹æ‰§è¡Œ</li>
<li>è®°å¿†å‘½ä»¤æ ¼å¼ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s///g</span><br></pre></td></tr></table></figure>
<h4 id="1-å…¨å±€æ›¿æ¢"><a href="#1-å…¨å±€æ›¿æ¢" class="headerlink" title="1) å…¨å±€æ›¿æ¢"></a>1) å…¨å±€æ›¿æ¢</h4><ul>
<li><strong>ä¸€æ¬¡æ€§</strong>æ›¿æ¢æ–‡ä»¶ä¸­çš„ <strong>æ‰€æœ‰å‡ºç°çš„æ—§æ–‡æœ¬</strong></li>
<li>å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/æ—§æ–‡æœ¬/æ–°æ–‡æœ¬/g</span><br></pre></td></tr></table></figure>
<h4 id="2-å¯è§†åŒºåŸŸæ›¿æ¢"><a href="#2-å¯è§†åŒºåŸŸæ›¿æ¢" class="headerlink" title="2) å¯è§†åŒºåŸŸæ›¿æ¢"></a>2) å¯è§†åŒºåŸŸæ›¿æ¢</h4><ul>
<li><strong>å…ˆé€‰ä¸­</strong> è¦æ›¿æ¢æ–‡å­—çš„ <strong>èŒƒå›´</strong></li>
<li>å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:s/æ—§æ–‡æœ¬/æ–°æ–‡æœ¬/g</span><br></pre></td></tr></table></figure>
<h4 id="3-ç¡®è®¤æ›¿æ¢"><a href="#3-ç¡®è®¤æ›¿æ¢" class="headerlink" title="3) ç¡®è®¤æ›¿æ¢"></a>3) ç¡®è®¤æ›¿æ¢</h4><ul>
<li>å¦‚æœæŠŠæœ«å°¾çš„ <code>g</code> æ”¹æˆ <code>gc</code> åœ¨æ›¿æ¢çš„æ—¶å€™ï¼Œä¼šæœ‰æç¤ºï¼<strong>æ¨èä½¿ç”¨ï¼</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/æ—§æ–‡æœ¬/æ–°æ–‡æœ¬/gc</span><br></pre></td></tr></table></figure>
<ol>
<li><code>y</code> - <code>yes</code> æ›¿æ¢</li>
<li><code>n</code> - <code>no</code> ä¸æ›¿æ¢</li>
<li><code>a</code> - <code>all</code> æ›¿æ¢æ‰€æœ‰</li>
<li><code>q</code> - <code>quit</code> é€€å‡ºæ›¿æ¢</li>
<li><code>l</code> - <code>last</code> æœ€åä¸€ä¸ªï¼Œå¹¶æŠŠå…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–</li>
<li><code>^E</code> å‘ä¸‹æ»šå±</li>
<li><code>^Y</code> å‘ä¸Šæ»šå±</li>
</ol>
<h3 id="4-11-æ’å…¥å‘½ä»¤"><a href="#4-11-æ’å…¥å‘½ä»¤" class="headerlink" title="4.11 æ’å…¥å‘½ä»¤"></a>4.11 æ’å…¥å‘½ä»¤</h3><ul>
<li>åœ¨ <code>vi</code> ä¸­é™¤äº†å¸¸ç”¨çš„ <code>i</code> è¿›å…¥ <strong>ç¼–è¾‘æ¨¡å¼</strong> å¤–ï¼Œè¿˜æä¾›äº†ä»¥ä¸‹å‘½ä»¤åŒæ ·å¯ä»¥è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
<th style="text-align:center">å¸¸ç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">i</td>
<td style="text-align:center">insert</td>
<td>åœ¨å½“å‰å­—ç¬¦å‰æ’å…¥æ–‡æœ¬</td>
<td style="text-align:center">å¸¸ç”¨</td>
</tr>
<tr>
<td style="text-align:center">I</td>
<td style="text-align:center">insert</td>
<td>åœ¨è¡Œé¦–æ’å…¥æ–‡æœ¬</td>
<td style="text-align:center">è¾ƒå¸¸ç”¨</td>
</tr>
<tr>
<td style="text-align:center">a</td>
<td style="text-align:center">append</td>
<td>åœ¨å½“å‰å­—ç¬¦åæ·»åŠ æ–‡æœ¬</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">append</td>
<td>åœ¨è¡Œæœ«æ·»åŠ æ–‡æœ¬</td>
<td style="text-align:center">è¾ƒå¸¸ç”¨</td>
</tr>
<tr>
<td style="text-align:center">o</td>
<td style="text-align:center"></td>
<td>åœ¨å½“å‰è¡Œåé¢æ’å…¥ä¸€ç©ºè¡Œ</td>
<td style="text-align:center">å¸¸ç”¨</td>
</tr>
<tr>
<td style="text-align:center">O</td>
<td style="text-align:center"></td>
<td>åœ¨å½“å‰è¡Œå‰é¢æ’å…¥ä¸€ç©ºè¡Œ</td>
<td style="text-align:center">å¸¸ç”¨</td>
</tr>
</tbody>
</table>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vi/004_%E6%8F%92%E5%85%A5%E5%91%BD%E4%BB%A4.png" alt="004_æ’å…¥å‘½ä»¤-w400"></p>
<h4 id="æ¼”ç»ƒ-1-â€”â€”-ç¼–è¾‘å‘½ä»¤å’Œæ•°å­—è¿ç”¨"><a href="#æ¼”ç»ƒ-1-â€”â€”-ç¼–è¾‘å‘½ä»¤å’Œæ•°å­—è¿ç”¨" class="headerlink" title="æ¼”ç»ƒ 1 â€”â€” ç¼–è¾‘å‘½ä»¤å’Œæ•°å­—è¿ç”¨"></a>æ¼”ç»ƒ 1 â€”â€” ç¼–è¾‘å‘½ä»¤å’Œæ•°å­—è¿ç”¨</h4><ul>
<li>åœ¨å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿ç»­è¾“å…¥ <code>N</code> ä¸ªåŒæ ·çš„å­—ç¬¦</li>
</ul>
<blockquote>
<p>åœ¨ <code>Python</code> ä¸­æœ‰ç®€å•çš„æ–¹æ³•ï¼Œä½†æ˜¯å…¶ä»–è¯­è¨€ä¸­é€šå¸¸éœ€è¦è‡ªå·±è¾“å…¥</p>
</blockquote>
<ul>
<li>ä¾‹å¦‚ï¼š<code>**********</code> è¿ç»­ 10 ä¸ªæ˜Ÿå·</li>
</ul>
<p>è¦å®ç°è¿™ä¸ªæ•ˆæœå¯ä»¥åœ¨ <strong>å‘½ä»¤æ¨¡å¼</strong> ä¸‹</p>
<ol>
<li>è¾“å…¥ <code>10</code>ï¼Œè¡¨ç¤ºè¦é‡å¤ 10 æ¬¡</li>
<li>è¾“å…¥ <code>i</code> è¿›å…¥ <strong>ç¼–è¾‘æ¨¡å¼</strong></li>
<li>è¾“å…¥ <code>*</code> ä¹Ÿå°±æ˜¯é‡å¤çš„æ–‡å­—</li>
<li>æŒ‰ä¸‹ <code>ESC</code> è¿”å›åˆ° <strong>å‘½ä»¤æ¨¡å¼</strong>ï¼Œè¿”å›ä¹‹å <code>vi</code> å°±ä¼šæŠŠç¬¬ <code>2ã€3</code> ä¸¤æ­¥çš„æ“ä½œé‡å¤ <code>10</code> æ¬¡</li>
</ol>
<blockquote>
<p>æç¤ºï¼šæ­£å¸¸å¼€å‘æ—¶ï¼Œåœ¨ <strong>è¿›å…¥ç¼–è¾‘æ¨¡å¼ä¹‹å‰ï¼Œä¸è¦æŒ‰æ•°å­—</strong></p>
</blockquote>
<h4 id="æ¼”ç»ƒ-2-â€”â€”-åˆ©ç”¨-å¯è§†å—-ç»™å¤šè¡Œä»£ç å¢åŠ æ³¨é‡Š"><a href="#æ¼”ç»ƒ-2-â€”â€”-åˆ©ç”¨-å¯è§†å—-ç»™å¤šè¡Œä»£ç å¢åŠ æ³¨é‡Š" class="headerlink" title="æ¼”ç»ƒ 2 â€”â€” åˆ©ç”¨ å¯è§†å— ç»™å¤šè¡Œä»£ç å¢åŠ æ³¨é‡Š"></a>æ¼”ç»ƒ 2 â€”â€” åˆ©ç”¨ å¯è§†å— ç»™å¤šè¡Œä»£ç å¢åŠ æ³¨é‡Š</h4><ul>
<li>åœ¨å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€æ¬¡æ€§ç»™å¤šè¡Œä»£ç  <strong>å¢åŠ æ³¨é‡Š</strong> çš„æƒ…å†µ</li>
</ul>
<blockquote>
<p>åœ¨ <code>Python</code> ä¸­ï¼Œè¦ç»™ä»£ç å¢åŠ æ³¨é‡Šï¼Œå¯ä»¥åœ¨ä»£ç å‰å¢åŠ ä¸€ä¸ª <code>#</code></p>
</blockquote>
<p>è¦å®ç°è¿™ä¸ªæ•ˆæœå¯ä»¥åœ¨ <strong>å‘½ä»¤æ¨¡å¼</strong> ä¸‹</p>
<ol>
<li>ç§»åŠ¨åˆ°è¦æ·»åŠ æ³¨é‡Šçš„ <strong>ç¬¬ 1 è¡Œä»£ç </strong>ï¼ŒæŒ‰ <code>^</code> æ¥åˆ°è¡Œé¦–</li>
<li>æŒ‰ <code>CTRL + v</code> è¿›å…¥ <strong>å¯è§†å—</strong> æ¨¡å¼</li>
<li>ä½¿ç”¨ <code>j</code> å‘ä¸‹è¿ç»­é€‰ä¸­è¦æ·»åŠ çš„ä»£ç è¡Œ</li>
<li>è¾“å…¥ <code>I</code> è¿›å…¥ <strong>ç¼–è¾‘æ¨¡å¼</strong>ï¼Œå¹¶åœ¨ <strong>è¡Œé¦–æ’å…¥</strong>ï¼Œæ³¨æ„ï¼šä¸€å®šè¦ä½¿ç”¨ <strong>I</strong></li>
<li>è¾“å…¥ <code>#</code> ä¹Ÿå°±æ˜¯æ³¨é‡Šç¬¦å·</li>
<li>æŒ‰ä¸‹ <code>ESC</code> è¿”å›åˆ° <strong>å‘½ä»¤æ¨¡å¼</strong>ï¼Œè¿”å›ä¹‹å <code>vi</code> ä¼šåœ¨ä¹‹å‰é€‰ä¸­çš„æ¯ä¸€è¡Œä»£ç  <strong>å‰</strong> æ’å…¥ <code>#</code></li>
</ol>
<h2 id="05-åˆ†å±å‘½ä»¤"><a href="#05-åˆ†å±å‘½ä»¤" class="headerlink" title="05. åˆ†å±å‘½ä»¤"></a>05. åˆ†å±å‘½ä»¤</h2><ul>
<li>å±äº <code>vi</code> çš„é«˜çº§å‘½ä»¤ â€”â€” å¯ä»¥ <strong>åŒæ—¶ç¼–è¾‘å’ŒæŸ¥çœ‹å¤šä¸ªæ–‡ä»¶</strong></li>
</ul>
<h3 id="5-1-æœ«è¡Œå‘½ä»¤æ‰©å±•"><a href="#5-1-æœ«è¡Œå‘½ä»¤æ‰©å±•" class="headerlink" title="5.1 æœ«è¡Œå‘½ä»¤æ‰©å±•"></a>5.1 æœ«è¡Œå‘½ä»¤æ‰©å±•</h3><p><strong>æœ«è¡Œå‘½ä»¤</strong> ä¸»è¦æ˜¯é’ˆå¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œçš„ï¼š<strong>ä¿å­˜</strong>ã€<strong>é€€å‡º</strong>ã€<strong>ä¿å­˜&amp;é€€å‡º</strong>ã€<strong>æœç´¢&amp;æ›¿æ¢</strong>ã€<strong>å¦å­˜</strong>ã€<strong>æ–°å»º</strong>ã€<strong>æµè§ˆæ–‡ä»¶</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:e .</td>
<td style="text-align:center">edit</td>
<td>ä¼šæ‰“å¼€å†…ç½®çš„æ–‡ä»¶æµè§ˆå™¨ï¼Œæµè§ˆè¦å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">:n æ–‡ä»¶å</td>
<td style="text-align:center">new</td>
<td>æ–°å»ºæ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">:w æ–‡ä»¶å</td>
<td style="text-align:center">write</td>
<td>å¦å­˜ä¸ºï¼Œä½†æ˜¯ä»ç„¶ç¼–è¾‘å½“å‰æ–‡ä»¶ï¼Œå¹¶ä¸ä¼šåˆ‡æ¢æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æç¤ºï¼šåˆ‡æ¢æ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»ä¿è¯å½“å‰è¿™ä¸ªæ–‡ä»¶å·²ç»è¢«ä¿å­˜ï¼</p>
</blockquote>
<ul>
<li>å·²ç»å­¦ä¹ è¿‡çš„ <strong>æœ«è¡Œå‘½ä»¤</strong>ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:w</td>
<td style="text-align:center">write</td>
<td>ä¿å­˜</td>
</tr>
<tr>
<td style="text-align:center">:q</td>
<td style="text-align:center">quit</td>
<td>é€€å‡ºï¼Œå¦‚æœæ²¡æœ‰ä¿å­˜ï¼Œä¸å…è®¸é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">:q!</td>
<td style="text-align:center">quit</td>
<td>å¼ºè¡Œé€€å‡ºï¼Œä¸ä¿å­˜é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">:wq</td>
<td style="text-align:center">write &amp; quit</td>
<td>ä¿å­˜å¹¶é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">:x</td>
<td style="text-align:center"></td>
<td>ä¿å­˜å¹¶é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">:%s///gc</td>
<td style="text-align:center"></td>
<td>ç¡®è®¤æœç´¢å¹¶æ›¿æ¢</td>
</tr>
</tbody>
</table>
<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>w</code> å‘½ä»¤ <strong>é˜¶æ®µæ€§çš„å¤‡ä»½ä»£ç </strong></p>
</blockquote>
<h3 id="5-2-åˆ†å±å‘½ä»¤"><a href="#5-2-åˆ†å±å‘½ä»¤" class="headerlink" title="5.2 åˆ†å±å‘½ä»¤"></a>5.2 åˆ†å±å‘½ä»¤</h3><ul>
<li>ä½¿ç”¨ <strong>åˆ†å±å‘½ä»¤</strong>ï¼Œå¯ä»¥ <strong>åŒæ—¶ç¼–è¾‘å’ŒæŸ¥çœ‹å¤šä¸ªæ–‡ä»¶</strong></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:sp [æ–‡ä»¶å]</td>
<td style="text-align:center">split</td>
<td>æ¨ªå‘å¢åŠ åˆ†å±</td>
</tr>
<tr>
<td style="text-align:center">:vsp [æ–‡ä»¶å]</td>
<td style="text-align:center">vertical split</td>
<td>çºµå‘å¢åŠ åˆ†å±</td>
</tr>
</tbody>
</table>
<h4 id="1-åˆ‡æ¢åˆ†å±çª—å£"><a href="#1-åˆ‡æ¢åˆ†å±çª—å£" class="headerlink" title="1) åˆ‡æ¢åˆ†å±çª—å£"></a>1) åˆ‡æ¢åˆ†å±çª—å£</h4><blockquote>
<p>åˆ†å±çª—å£éƒ½æ˜¯åŸºäº <code>CTRL + W</code> è¿™ä¸ªå¿«æ·é”®çš„ï¼Œ<code>w</code> å¯¹åº”çš„è‹±æ–‡å•è¯æ˜¯ <code>window</code></p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">window</td>
<td>åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£</td>
</tr>
<tr>
<td style="text-align:center">r</td>
<td style="text-align:center">reverse</td>
<td>äº’æ¢çª—å£</td>
</tr>
<tr>
<td style="text-align:center">c</td>
<td style="text-align:center">close</td>
<td>å…³é—­å½“å‰çª—å£ï¼Œä½†æ˜¯ä¸èƒ½å…³é—­æœ€åä¸€ä¸ªçª—å£</td>
</tr>
<tr>
<td style="text-align:center">q</td>
<td style="text-align:center">quit</td>
<td>é€€å‡ºå½“å‰çª—å£ï¼Œå¦‚æœæ˜¯æœ€åä¸€ä¸ªçª—å£ï¼Œåˆ™å…³é—­ vi</td>
</tr>
<tr>
<td style="text-align:center">o</td>
<td style="text-align:center">other</td>
<td>å…³é—­å…¶ä»–çª—å£</td>
</tr>
</tbody>
</table>
<h4 id="2-è°ƒæ•´çª—å£å¤§å°"><a href="#2-è°ƒæ•´çª—å£å¤§å°" class="headerlink" title="2) è°ƒæ•´çª—å£å¤§å°"></a>2) è°ƒæ•´çª—å£å¤§å°</h4><blockquote>
<p>åˆ†å±çª—å£éƒ½æ˜¯åŸºäº <code>CTRL + W</code> è¿™ä¸ªå¿«æ·é”®çš„ï¼Œ<code>w</code> å¯¹åº”çš„è‹±æ–‡å•è¯æ˜¯ <code>window</code></p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">å‘½ä»¤</th>
<th style="text-align:center">è‹±æ–‡</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center"></td>
<td>å¢åŠ çª—å£é«˜åº¦</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center"></td>
<td>å‡å°‘çª—å£é«˜åº¦</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center"></td>
<td>å¢åŠ çª—å£å®½åº¦</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center"></td>
<td>å‡å°‘çª—å£å®½åº¦</td>
</tr>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:center"></td>
<td>ç­‰åˆ†çª—å£å¤§å°</td>
</tr>
</tbody>
</table>
<blockquote>
<p>è°ƒæ•´çª—å£å®½é«˜çš„å‘½ä»¤å¯ä»¥å’Œæ•°å­—è¿ç”¨ï¼Œä¾‹å¦‚ï¼š<code>5 CTRL + W +</code> è¿ç»­ 5 æ¬¡å¢åŠ é«˜åº¦</p>
</blockquote>
<h2 id="06-å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥å›¾"><a href="#06-å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥å›¾" class="headerlink" title="06. å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥å›¾"></a>06. å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥å›¾</h2><p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vi/vim.png" alt="vi"></p>
<h3 id="vimrc"><a href="#vimrc" class="headerlink" title="vimrc"></a>vimrc</h3><ul>
<li><code>vimrc</code> æ˜¯ <code>vim</code> çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è®¾ç½® vim çš„é…ç½®ï¼ŒåŒ…æ‹¬ï¼š<strong>çƒ­é”®</strong>ã€<strong>é…è‰²</strong>ã€<strong>è¯­æ³•é«˜äº®</strong>ã€<strong>æ’ä»¶</strong> ç­‰</li>
<li><code>Linux</code> ä¸­ <code>vimrc</code> æœ‰ä¸¤ä¸ªä½ç½®ï¼Œ<strong>å®¶ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æ›´é«˜</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/vim/vimrc</span><br><span class="line">~/.vimrc</span><br></pre></td></tr></table></figure>
<ul>
<li>å¸¸ç”¨çš„æ’ä»¶æœ‰ï¼š<ul>
<li>ä»£ç è¡¥å…¨</li>
<li>ä»£ç æŠ˜å </li>
<li>æœç´¢</li>
<li>Git é›†æˆ</li>
<li>â€¦â€¦</li>
</ul>
</li>
<li>ç½‘ä¸Šæœ‰å¾ˆå¤šé«˜æ‰‹å·²ç»é…ç½®å¥½çš„é’ˆå¯¹ <code>python</code> å¼€å‘çš„ <code>vimrc</code> æ–‡ä»¶ï¼Œå¯ä»¥ä¸‹è½½è¿‡æ¥ç›´æ¥ä½¿ç”¨ï¼Œæˆ–è€…ç­‰å¤§å®¶å¤š <code>Linux</code> æ¯”è¾ƒç†Ÿæ‚‰åï¼Œå†è¡Œå­¦ä¹ ï¼</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/06/05/02VueéŸ³ä¹æ’­æ”¾å™¨.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/06/05/02VueéŸ³ä¹æ’­æ”¾å™¨.html" itemprop="url">VueéŸ³ä¹æ’­æ”¾å™¨(äºŒ)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-05T00:00:00+08:00">
                2019-06-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/06/05/02VueéŸ³ä¹æ’­æ”¾å™¨.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/06/05/02VueéŸ³ä¹æ’­æ”¾å™¨.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ¨èé¡µé¢å¼€å‘"><a href="#æ¨èé¡µé¢å¼€å‘" class="headerlink" title="æ¨èé¡µé¢å¼€å‘"></a>æ¨èé¡µé¢å¼€å‘</h1><h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p><a href="https://github.com/Dunteng/Vue-Music-WebApp/tree/v3/vue-music" target="_blank" rel="noopener">å®Œæˆè½®æ’­å›¾æ—¶</a></p>
<p><a href="https://github.com/Dunteng/Vue-Music-WebApp/tree/v4/vue-music" target="_blank" rel="noopener">å®Œæˆæ­Œå•åˆ—è¡¨æ—¶</a></p>
<p><br><br></p>
<h2 id="better-scrollæ’ä»¶"><a href="#better-scrollæ’ä»¶" class="headerlink" title="better-scrollæ’ä»¶"></a>better-scrollæ’ä»¶</h2><p><a href="https://github.com/ustbhuangyi/better-scroll/blob/master/README_zh-CN.md" target="_blank" rel="noopener">ä¸­æ–‡æ–‡æ¡£</a></p>
<p><a href="https://ustbhuangyi.github.io/better-scroll/#/" target="_blank" rel="noopener">1.x Docs</a></p>
<p><a href="https://better-scroll.github.io/docs/en-US/" target="_blank" rel="noopener">2.x Docs</a></p>
<p>ä¹‹åçš„è½®æ’­å›¾ç»„ä»¶å’Œåˆ—è¡¨æ»šåŠ¨ç»„ä»¶éƒ½ä¼šç”¨åˆ°è¿™ä¸ªæ’ä»¶ã€‚è¿™ä¸ªæ’ä»¶è¿˜æŒºç‰›é€¼çš„ï¼Œ9400+starsã€‚</p>
<p><br><br></p>
<h2 id="QQéŸ³ä¹çš„api"><a href="#QQéŸ³ä¹çš„api" class="headerlink" title="QQéŸ³ä¹çš„api"></a>QQéŸ³ä¹çš„api</h2><ul>
<li><p>jsonpç”¨åˆ°çš„ï¼š</p>
<p><a href="https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg" target="_blank" rel="noopener">https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg</a></p>
</li>
<li><p>axios/Ajaxç”¨åˆ°çš„ï¼š</p>
<p>åœ¨webpack.dev.conf.jsä¸­é…ç½®ï¼Œè§ä¸‹æ–‡</p>
</li>
</ul>
<p><br><br></p>
<h2 id="ã€é‡ç‚¹éš¾ç‚¹ä¸€ã€‘recommendé¡µé¢jsonpç›¸å…³æ–‡ä»¶çš„ç¼–å†™"><a href="#ã€é‡ç‚¹éš¾ç‚¹ä¸€ã€‘recommendé¡µé¢jsonpç›¸å…³æ–‡ä»¶çš„ç¼–å†™" class="headerlink" title="ã€é‡ç‚¹éš¾ç‚¹ä¸€ã€‘recommendé¡µé¢jsonpç›¸å…³æ–‡ä»¶çš„ç¼–å†™"></a>ã€é‡ç‚¹éš¾ç‚¹ä¸€ã€‘recommendé¡µé¢jsonpç›¸å…³æ–‡ä»¶çš„ç¼–å†™</h2><h3 id="src-common-js-jsonp-js-promiseå°è£…"><a href="#src-common-js-jsonp-js-promiseå°è£…" class="headerlink" title="src/common/js/jsonp.js  promiseå°è£…"></a>src/common/js/jsonp.js  promiseå°è£…</h3><p>æœ¬é¡¹ç›®è¯¥éƒ¨åˆ†ä½¿ç”¨jsonpæŠ€æœ¯è·å–æ•°æ®ï¼Œè§£å†³è·¨åŸŸé—®é¢˜ã€‚</p>
<p>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå°è£…å¥½çš„<a href="https://github.com/webmodules/jsonp" target="_blank" rel="noopener">jsonpæ’ä»¶</a>ã€‚è¿™æ˜¯å®ƒçš„API :</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuemusic/1560407149676.png" alt="1560407149676"></p>
<p>åˆ©ç”¨è¿™ä¸ªæ’ä»¶é‡Œé¢æä¾›çš„apiè¿›è¡Œ<strong>Promise</strong>çš„æ”¹å†™â€”-&gt; jsonp.jsçš„åˆ›å»ºã€‚</p>
<p>å…ˆ<code>npm i jsonp</code>è¿›è¡Œjsonpæ’ä»¶çš„å®‰è£…ã€‚</p>
<p>ä¹‹åä¼šç»å¸¸ç”¨åˆ°å®ƒï¼ŒæŠŠä»–æ”¾åœ¨jsæ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åç¼–å†™src/common/js/jsonp.js:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> originJsonp <span class="keyword">from</span> <span class="string">'jsonp'</span></span><br><span class="line"><span class="comment">/* jsonp2è¿™ä¸ªå‡½æ•°çš„ä¸‰ä¸ªå‚æ•°ï¼Œurlæ˜¯ä¸€ä¸ªå¹²å‡€çš„ä¸å¸¦å‚æ•°çš„urlåœ°å€ï¼Œdataè¡¨ç¤ºéšåŒurlä¼ è¿‡å»çš„å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">  å› ä¸ºjsonpè¿™ä¸ªæ’ä»¶è¦æ±‚çš„urlæ˜¯ä¸æ”¯æŒobjectç±»å‹çš„çš„dataå‚æ•°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå°†dataé‡Œé¢çš„æ•°æ®æ‹¼æ¥åˆ°urlä¸Šã€‚</span></span><br><span class="line"><span class="comment">  ç¬¬ä¸‰ä¸ªå‚æ•°optionå¯¹åº”jsonpæ’ä»¶apié‡Œçš„optså‚æ•°</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">jsonp2</span>(<span class="params">url, data, option</span>) </span>&#123;</span><br><span class="line">  url += (url.indexOf(<span class="string">'?'</span>) &lt; <span class="number">0</span> ? <span class="string">'?'</span> : <span class="string">'&amp;'</span>) + param(data)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    originJsonp(url, option, (err, data) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">param</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">''</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> data) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = data[k] !== <span class="literal">undefined</span> ? data[k] : <span class="string">''</span></span><br><span class="line">    url += <span class="string">'&amp;'</span> + k + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(value)<span class="comment">/* encodeURIComponent(value)è¿›è¡Œå­—ç¬¦è½¬ä¹‰ï¼Œå¦‚encodeURIComponent('ç™¾åº¦')è½¬ä¸º"%E7%99%BE%E5%BA%A6" */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> url ? url.substring(<span class="number">1</span>) : <span class="string">''</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>æˆ‘ä»¬æŠŠè¯·æ±‚apiæ•°æ®ç›¸å…³çš„jsæ”¾åœ¨<code>src/api</code>ç›®å½•ä¸‹</p>
<p><br></p>
<h3 id="src-api-config-js"><a href="#src-api-config-js" class="headerlink" title="src/api/config.js"></a>src/api/config.js</h3><p>è¿™éƒ¨åˆ†ä¸»è¦å°±æ˜¯æ¨¡æ‹ŸqqéŸ³ä¹apiçš„å‚æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> commonParams = &#123;</span><br><span class="line">  g_tk: <span class="number">5381</span>,</span><br><span class="line">  inCharset: <span class="string">'utf-8'</span>,</span><br><span class="line">  outCharset: <span class="string">'utf-8'</span>,</span><br><span class="line">  notice: <span class="number">0</span>,</span><br><span class="line">  format: <span class="string">'jsonp'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> options = &#123;</span><br><span class="line">  param: <span class="string">'jsonpCallback'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ERR_OK = <span class="number">0</span>  <span class="comment">/* è¯­ä¹‰åŒ–ä¸€ä¸‹ */</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="src-api-recommend-js"><a href="#src-api-recommend-js" class="headerlink" title="src/api/recommend.js:"></a>src/api/recommend.js:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jsonp <span class="keyword">from</span> <span class="string">'common/js/jsonp'</span></span><br><span class="line"><span class="keyword">import</span> &#123;commonParams, options&#125; <span class="keyword">from</span> <span class="string">'./config'</span></span><br><span class="line"><span class="comment">// import axios from 'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getRecommend</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> data = <span class="built_in">Object</span>.assign(&#123;&#125;, commonParams, &#123;</span><br><span class="line">    platform: <span class="string">'h5'</span>,</span><br><span class="line">    uin: <span class="number">0</span>,</span><br><span class="line">    needNewCode: <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> jsonp(url, data, options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="webpack-base-conf-js"><a href="#webpack-base-conf-js" class="headerlink" title="webpack.base.conf.js"></a>webpack.base.conf.js</h3><p>æ·»åŠ å¤šä¸¤ä¸ªåˆ«åï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">alias: &#123;</span><br><span class="line">  &apos;@&apos;: resolve(&apos;src&apos;),</span><br><span class="line">  &apos;common&apos;: resolve(&apos;src/common&apos;),</span><br><span class="line">  &apos;components&apos;: resolve(&apos;src/components&apos;),</span><br><span class="line">  &apos;base&apos;: resolve(&apos;src/base&apos;),</span><br><span class="line">  &apos;api&apos;: resolve(&apos;src/api&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="recommend-vue"><a href="#recommend-vue" class="headerlink" title="recommend.vue"></a>recommend.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;recommend&quot; ref=&quot;recommend&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/ecmascript-6&quot;&gt;</span><br><span class="line">  import &#123;getRecommend&#125; from &apos;api/recommend&apos;</span><br><span class="line">  import &#123;ERR_OK&#125; from &apos;api/config&apos;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        recommends: [],</span><br><span class="line">        discList: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      this._getRecommend()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      _getRecommend() &#123;</span><br><span class="line">        getRecommend().then((res) =&gt; &#123;</span><br><span class="line">          if (res.code === ERR_OK) &#123;</span><br><span class="line">            this.recommends = res.data.slider</span><br><span class="line">            console.log(res);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>çœ‹ä¸€ä¸‹è¿™æ—¶å€™æœ‰æ²¡æœ‰æŠ“å–åˆ°æ•°æ®ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuemusic/1560411184376.png" alt="1560411184376"></p>
<p><br><br></p>
<h2 id="è½®æ’­å›¾ç»„ä»¶"><a href="#è½®æ’­å›¾ç»„ä»¶" class="headerlink" title="è½®æ’­å›¾ç»„ä»¶"></a>è½®æ’­å›¾ç»„ä»¶</h2><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><p>è¿™é‡Œç”¨åˆ°ä¸€ä¸ªæ’ä»¶<a href="https://github.com/ustbhuangyi/better-scroll" target="_blank" rel="noopener">better-scroll</a></p>
<p><a href="https://ustbhuangyi.github.io/better-scroll/doc/zh-hans/#better-scroll%20%E6%98%AF%E4%BB%80%E4%B9%88" target="_blank" rel="noopener">better-scrollæ–‡æ¡£</a></p>
<p><br><br></p>
<h3 id="æ’æ’­ä¸€ä¸ªå°æŠ€å·§ï¼šæŠ½å‡ºä¸€ä¸ªâ€œæ·»åŠ ç±»åâ€ç»„ä»¶dom-js"><a href="#æ’æ’­ä¸€ä¸ªå°æŠ€å·§ï¼šæŠ½å‡ºä¸€ä¸ªâ€œæ·»åŠ ç±»åâ€ç»„ä»¶dom-js" class="headerlink" title="æ’æ’­ä¸€ä¸ªå°æŠ€å·§ï¼šæŠ½å‡ºä¸€ä¸ªâ€œæ·»åŠ ç±»åâ€ç»„ä»¶dom.js"></a>æ’æ’­ä¸€ä¸ªå°æŠ€å·§ï¼šæŠ½å‡ºä¸€ä¸ªâ€œæ·»åŠ ç±»åâ€ç»„ä»¶dom.js</h3><p>åœ¨è½®æ’­å›¾ç»„ä»¶çš„ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œç¼–å†™ _setSliderWidth() æ–¹æ³•çš„ä»£ç ä¸­ï¼Œè¦éå†æŸä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œç»™å®ƒåŠ ä¸Šä¸€ä¸ªç±»åï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„æ“ä½œã€‚æ¯”èµ·ç›´æ¥åœ¨ _setSliderWidth() é‡Œé¢å®ç°ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯æŠŠè¯¥æ“ä½œæŠ½ç¦»æˆä¸ºä¸€ä¸ªjsæ–‡ä»¶ã€‚</p>
<p>äºæ˜¯æ–°å»ºäº†src/common/js/dom.jsï¼Œåœ¨é‡Œé¢å®ç°äº†æ·»åŠ ç±»åçš„æ“ä½œå¹¶æš´éœ²å‡ºå»ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * domæ“ä½œç›¸å…³çš„ä»£ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">el, className</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|\\s)'</span> + className + <span class="string">'(\\s|$)'</span>)</span><br><span class="line">    <span class="keyword">return</span> reg.test(el.className)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">el, className</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hasClass(el, className)) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> newClass = el.className.split(<span class="string">' '</span>)</span><br><span class="line">    newClass.push(className)</span><br><span class="line">    el.className = newClass.join(<span class="string">' '</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œè¿™ä¸ªdom.jsä»¥åå°±ä¸“é—¨æ¥å­˜æ”¾å¸¸è§çš„domæ“ä½œã€‚</p>
<p><br><br></p>
<h3 id="è¸©å‘è®°å½•"><a href="#è¸©å‘è®°å½•" class="headerlink" title="è¸©å‘è®°å½•"></a>è¸©å‘è®°å½•</h3><ol>
<li><p>recommend.vueä¸­å¼•ç”¨sliderç»„ä»¶ï¼Œè€Œslider.vueä¸­çš„ <code>_setSliderWidth()</code>æ–¹æ³•é‡Œé¢å¾ªç¯æ¸²æŸ“domèŠ‚ç‚¹ã€‚ä½†æ˜¯æˆ‘ä¸€å¼€å§‹çš„recommend.vueçš„ä»£ç ä¸­æ²¡æœ‰å®ç°åˆ¤æ–­æ˜¯å¦æˆåŠŸè·å–åˆ°äº†æ•°æ®å¹¶æ¸²æŸ“äº†èŠ‚ç‚¹ï¼Œå› ä¸ºè·å–çš„æ˜¯çœŸå®æ•°æ®å­˜åœ¨å¼‚æ­¥è¿‡ç¨‹ï¼Œå¦‚æœæ²¡æœ‰åŠ ä¸Šè¿™å¥<code>v-if=&quot;recommends.length&quot;</code>çš„è¯ï¼Œå¯èƒ½å­˜åœ¨recommend.vueé¡µé¢è¿˜æ²¡æœ‰æˆåŠŸè·å–æ•°æ®æ¸²æŸ“èŠ‚ç‚¹ï¼Œè€Œå¼•ç”¨sliderç»„ä»¶å¯¼è‡´sliderä¸­ <code>_setSliderWidth()</code>æ–¹æ³•é‡Œé¢å¾ªç¯æ¸²æŸ“domèŠ‚ç‚¹å‡ºé”™ï¼Œæœ€ç»ˆå¯¼è‡´é¡µé¢æŠ¥é”€çš„çŠ¶å†µã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;recommend&quot; ref=&quot;recommend&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;recommend-content&quot;&gt;</span><br><span class="line">        &lt;div v-if=&quot;recommends.length&quot; class=&quot;slider-wrapper&quot;&gt;&lt;!-- æ³¨æ„è¿™é‡Œç”¨äº†v-ifæ¥ç¡®ä¿åªæœ‰å½“æˆåŠŸè·å–åˆ°æ•°æ®åæ‰å°†sliderç»„ä»¶æ·»åŠ ä¸Šï¼Œä»è€Œä¿è¯sliderä¸­çš„å¾ªç¯æ¸²æŸ“æˆåŠŸ --&gt;</span><br><span class="line">            &lt;slider&gt;</span><br><span class="line">                &lt;div v-for=&quot;item in recommends&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">                    &lt;a :href=&quot;item.linkUrl&quot;&gt;</span><br><span class="line">                        &lt;img :src=&quot;item.picUrl&quot; alt=&quot;&quot;&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/slider&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
</li>
<li><p>better-scrollé»˜è®¤ä¼šå¤åˆ¶è½®æ’­å›¾çš„é¦–å°¾ä¸¤å¼ å›¾ï¼ˆè¿™é‡Œè¯´æˆâ€œå›¾â€ä¸å¤ªå‡†ç¡®ï¼Œå§‘ä¸”è¿™ä¹ˆè¯´ï¼‰ï¼Œå› æ­¤é€šè¿‡apiè·å¾—çš„è½®æ’­å›¾å›¾ç‰‡åªæœ‰5å¼ ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨better-scrollçš„æ—¶å€™ç”Ÿæˆäº†7ä¸ªèŠ‚ç‚¹ã€‚ç›¸åº”çš„åœ¨slider.vueçš„<code>_setSliderWidth</code>ä¸­è¦è®¾ç½®å¢åŠ ä¸¤å¼ å›¾çš„å®½åº¦ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">_setSliderWidth(isResize) &#123;</span><br><span class="line">  <span class="keyword">this</span>.children = <span class="keyword">this</span>.$refs.sliderGroup.children;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">let</span> width = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> sliderWidth = <span class="keyword">this</span>.$refs.slider.clientWidth;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.children.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> child = <span class="keyword">this</span>.children[i];</span><br><span class="line">    addClass(child, <span class="string">"slider-item"</span>);</span><br><span class="line">   </span><br><span class="line">    child.style.width = sliderWidth + <span class="string">"px"</span>;</span><br><span class="line">    width += sliderWidth;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.loop &amp;&amp; !isResize) &#123;</span><br><span class="line">    width += <span class="number">2</span> * sliderWidth; <span class="comment">/* åŠ å¤šå·¦å³ä¸¤ä¸ªè½®æ’­å›¾çš„å®½åº¦ï¼Œä¸ºäº†å®ç°æ— ç¼æµç•…æ»šåŠ¨ï¼Œä¸ä¼šå™Œçš„ä¸€ä¸‹è·³è¿‡å» */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.$refs.sliderGroup.style.width = width + <span class="string">"px"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
</li>
<li><p>æœ‰ä¸ª<strong>bug</strong></p>
<p>æ— æ³•å®ç°è‡ªåŠ¨çš„æ— ç¼è½®æ’­ï¼Œè½®æ’­åˆ°æœ€åä¸€å¼ çš„æ—¶å€™å°±ä¸åŠ¨äº†ï¼Œå¿…é¡»æ‰‹åŠ¨åˆ’ä¸€ä¸‹æ‰èƒ½æ— ç¼è½®æ’­ã€‚æš‚æœªè§£å†³ï¼Œæ€€ç–‘æ˜¯better-scrollçš„é—®é¢˜ã€‚ç›®å‰çš„å¦¥åæ˜¯æœ€åä¸€å¼ ç›´æ¥è·³è½¬åˆ°ç¬¬ä¸€å¼ ï¼Œå°±å¾ˆéš¾çœ‹ã€‚ã€‚ã€‚</p>
<p><br></p>
</li>
<li><p>å®ç°çª—å£æ”¹å˜çš„æ—¶å€™è‡ªé€‚åº”</p>
<p>åœ¨mountedé’©å­å‡½æ•°ä¸­ç›‘å¬ä¸€ä¸‹çª—å£çš„æ”¹å˜äº‹ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/* ç›‘å¬çª—å£æ”¹å˜äº‹ä»¶ */</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.slider) &#123;<span class="comment">/* å¦‚æœsliderè¿˜æœªåˆå§‹åŒ–ï¼Œç›´æ¥é€€å‡º */</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>._setSliderWidth()</span><br><span class="line">  <span class="keyword">this</span>.slider.refresh()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
</li>
<li><p>ä¼˜åŒ–ï¼šå‡å°‘é‡å¤çš„æ•°æ®è¯·æ±‚</p>
<p>æ‰“å¼€é¡¹ç›®çš„æ—¶å€™è½®æ’­å›¾ä¼šå‘èµ·æ•°æ®è¯·æ±‚ï¼Œä½†æ˜¯å½“ä»é¦–é¡µæ¨èé¡µåˆ‡æ¢è·¯ç”±åˆ°å…¶ä»–é¡µé¢ï¼Œå†ä»å…¶ä»–é¡µé¢åˆ‡æ¢å›è½®æ’­å›¾æ‰€åœ¨çš„é¦–é¡µæ¨èé¡µé¢æ—¶ï¼Œå®ƒåˆé‡æ–°åˆ·æ–°å‘èµ·äº†æ•°æ®è¯·æ±‚ï¼Œè¿™æ˜¯æ²¡å¿…è¦çš„ï¼Œè€Œä¸”é™ä½äº†æ€§èƒ½ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<code>&lt;keepalive&gt;</code>æ ‡ç­¾å°†<code>&lt;router-view&gt;</code>åŒ…è£¹èµ·æ¥ï¼Œå°†å…¶domç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚è¿™å°±é¿å…äº†ä¸Šè¿°çš„æƒ…å†µã€‚</p>
<p><br></p>
</li>
<li><p>ä¼˜åŒ–ï¼šbeforeDestroyæ¸…é™¤è®¡æ—¶å™¨é‡Šæ”¾å†…å­˜</p>
<p>è·¯ç”±åˆ‡æ¢çš„æ—¶å€™ä¼šè§¦å‘vueçš„destroyï¼Œé‚£ä¹ˆæœ€å¥½æ—¶æŠŠsliderçš„è®¡ç®—å™¨æ¸…é™¤äº†ä»¥é‡Šæ”¾å†…å­˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">beforeDestroy() &#123;</span><br><span class="line">  clearTimeout(this.timer)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><br><br></p>
<h2 id="ã€é‡ç‚¹éš¾ç‚¹äºŒã€‘axiosä¸åç«¯æ¥å£ä»£ç†"><a href="#ã€é‡ç‚¹éš¾ç‚¹äºŒã€‘axiosä¸åç«¯æ¥å£ä»£ç†" class="headerlink" title="ã€é‡ç‚¹éš¾ç‚¹äºŒã€‘axiosä¸åç«¯æ¥å£ä»£ç†"></a>ã€é‡ç‚¹éš¾ç‚¹äºŒã€‘axiosä¸åç«¯æ¥å£ä»£ç†</h2><p>å…ˆå®‰è£…axiosä¾èµ–</p>
<h3 id="ä¿®æ”¹ä»£ç†"><a href="#ä¿®æ”¹ä»£ç†" class="headerlink" title="ä¿®æ”¹ä»£ç†"></a>ä¿®æ”¹ä»£ç†</h3><p>åœ¨ä½¿ç”¨QQéŸ³ä¹æ¨èé¡µæ­Œå•åˆ—è¡¨çš„apiæ—¶ï¼Œå‘ç°æ— æ³•é€šè¿‡ajaxè·å–åˆ°ã€‚å…³é”®ç‚¹æ˜¯QQéŸ³ä¹è®¾ç½®äº†è¯·æ±‚å¤´ä¸­çš„Hostå’ŒRefererè¿›è¡Œäº†é™åˆ¶ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuemusic/1561392420142.png" alt="1561392420142"></p>
<p>å› æ­¤éœ€è¦è§£å†³è¿™ä¸ªè·¨åŸŸçš„é—®é¢˜ã€‚æ–¹æ³•æ˜¯<strong>ä¿®æ”¹ä»£ç†</strong>ã€‚</p>
<p><br></p>
<h3 id="ä¿®æ”¹webpack-dev-conf-js"><a href="#ä¿®æ”¹webpack-dev-conf-js" class="headerlink" title="ä¿®æ”¹webpack.dev.conf.js"></a>ä¿®æ”¹webpack.dev.conf.js</h3><p><a href="https://github.com/ustbhuangyi/vue-music/issues/82" target="_blank" rel="noopener">ã€ç›¸å…³å‚è€ƒã€‘</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  devServer: &#123;</span><br><span class="line">    before(app) &#123;</span><br><span class="line">      app.get(<span class="string">'/api/getDiscList'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> url = <span class="string">'https://c.y.qq.com/splcloud/fcgi-bin/fcg_get_diss_by_tag.fcg'</span></span><br><span class="line">        axios.get(url, &#123;</span><br><span class="line">          headers: &#123;</span><br><span class="line">            referer: <span class="string">'https://c.y.qq.com/'</span>,</span><br><span class="line">            host: <span class="string">'c.y.qq.com'</span></span><br><span class="line">          &#125;,</span><br><span class="line">          params: req.query</span><br><span class="line">        &#125;).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">          res.json(response.data)</span><br><span class="line">        &#125;).catch(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(e)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      ...</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="src-api-recommend-js-1"><a href="#src-api-recommend-js-1" class="headerlink" title="src/api/recommend.js"></a>src/api/recommend.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jsonp <span class="keyword">from</span> <span class="string">'common/js/jsonp'</span></span><br><span class="line"><span class="keyword">import</span> &#123; commonParams, options &#125; <span class="keyword">from</span> <span class="string">'./config'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getRecommend</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> data = <span class="built_in">Object</span>.assign(&#123;&#125;, commonParams, &#123;</span><br><span class="line">        platform: <span class="string">'h5'</span>,</span><br><span class="line">        uin: <span class="number">0</span>,</span><br><span class="line">        needNewCode: <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonp(url, data, options)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDiscList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">'/api/getDiscList'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> data = <span class="built_in">Object</span>.assign(&#123;&#125;, commonParams, &#123;</span><br><span class="line">        platform: <span class="string">'yqq'</span>,</span><br><span class="line">        hostUin: <span class="number">0</span>,</span><br><span class="line">        sin: <span class="number">0</span>,</span><br><span class="line">        ein: <span class="number">29</span>,</span><br><span class="line">        sortId: <span class="number">5</span>,</span><br><span class="line">        needNewCode: <span class="number">0</span>,</span><br><span class="line">        categoryId: <span class="number">10000000</span>,</span><br><span class="line">        rnd: <span class="built_in">Math</span>.random(),</span><br><span class="line">        format: <span class="string">'json'</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> axios.get(url, &#123;</span><br><span class="line">        params: data</span><br><span class="line">    &#125;).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(res.data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨recommend.vueä¸­è°ƒç”¨getDiscList()æ–¹æ³•å°±èƒ½æˆåŠŸè·å–åˆ°æ•°æ®äº†ã€‚</p>
<p><br></p>
<p>è¿™æ—¶å€™å¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥åœ¨chrome Networkä¸­çœ‹åˆ°å‘é€äº†Ajaxè¯·æ±‚å¹¶æˆåŠŸè·å¾—äº†æ•°æ®ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuemusic/1560566255358.png" alt="1560566255358"></p>
<p><br><br></p>
<h2 id="æ­Œå•åˆ—è¡¨ç»„ä»¶å¼€å‘"><a href="#æ­Œå•åˆ—è¡¨ç»„ä»¶å¼€å‘" class="headerlink" title="æ­Œå•åˆ—è¡¨ç»„ä»¶å¼€å‘"></a>æ­Œå•åˆ—è¡¨ç»„ä»¶å¼€å‘</h2><p>é€šè¿‡ä¸Šä¸€æ­¥æ”¹å˜qqéŸ³ä¹apiçš„æ¥å£ä»£ç†ï¼Œåœ¨recommend.vueè°ƒç”¨getDiscListæ–¹æ³•è·å–åˆ°æ•°æ®ï¼Œå¹¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuemusic/1560578229727.png" alt="1560578229727"></p>
<p>ä½†æ˜¯åˆ°è¿™ä¸€æ­¥ä¸ºæ­¢ï¼Œé¡µé¢å°šæ— æ³•ä¸Šä¸‹æ»‘åŠ¨ã€‚è¿˜æ˜¯éœ€è¦better-scrollç»„ä»¶æ¥åˆ›å»ºä¸€ä¸ªæ­Œå•åˆ—è¡¨æ»šåŠ¨ç»„ä»¶ã€‚</p>
<p><br></p>
<h3 id="src-base-scroll-scroll-vue"><a href="#src-base-scroll-scroll-vue" class="headerlink" title="src/base/scroll/scroll.vue"></a>src/base/scroll/scroll.vue</h3><p>åˆ›å»º/src/base/scroll/scroll.vue:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div ref=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/ecmascript-6&quot;&gt;</span><br><span class="line">  import BScroll from &apos;better-scroll&apos;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      probeType: &#123;</span><br><span class="line">        type: Number,</span><br><span class="line">        default: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      click: &#123;</span><br><span class="line">        type: Boolean,</span><br><span class="line">        default: true</span><br><span class="line">      &#125;,</span><br><span class="line">      data: &#123;</span><br><span class="line">        type: Array,</span><br><span class="line">        default: null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      setTimeout(() =&gt; &#123;</span><br><span class="line">        this._initScroll()</span><br><span class="line">      &#125;, 20)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      _initScroll() &#123;</span><br><span class="line">        if (!this.$refs.wrapper) &#123;</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br><span class="line">        this.scroll = new BScroll(this.$refs.wrapper, &#123;</span><br><span class="line">          probeType: this.probeType,</span><br><span class="line">          click: this.click</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      enable() &#123;</span><br><span class="line">        this.scroll &amp;&amp; this.scroll.enable()/* better-scrollçš„apiï¼Œå¯ç”¨ better-scroll, é»˜è®¤ å¼€å¯ */</span><br><span class="line">      &#125;,</span><br><span class="line">      disable() &#123;</span><br><span class="line">        this.scroll &amp;&amp; this.scroll.disable()/* better-scrollçš„apiï¼Œç¦ç”¨ better-scrollï¼ŒDOM äº‹ä»¶ï¼ˆå¦‚ touchstartã€touchmoveã€touchendï¼‰çš„å›è°ƒå‡½æ•°ä¸å†å“åº”ã€‚ */</span><br><span class="line">      &#125;,</span><br><span class="line">      refresh() &#123;</span><br><span class="line">        this.scroll &amp;&amp; this.scroll.refresh()/* é‡æ–°è®¡ç®— better-scrollï¼Œå½“ DOM ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ—¶å€™åŠ¡å¿…è¦è°ƒç”¨ç¡®ä¿æ»šåŠ¨çš„æ•ˆæœæ­£å¸¸ã€‚ */</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">      data() &#123;  /* ç›‘å¬æ•°æ®æ”¹å˜ç«‹å³åˆ·æ–° */</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">          this.refresh()</span><br><span class="line">        &#125;, 20)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="src-components-recommend-recommend-vue"><a href="#src-components-recommend-recommend-vue" class="headerlink" title="src/components/recommend/recommend.vue"></a>src/components/recommend/recommend.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;recommend&quot; ref=&quot;recommend&quot;&gt;</span><br><span class="line">    &lt;scroll ref=&quot;scroll&quot; class=&quot;recommend-content&quot; :data=&apos;discList&apos;&gt;&lt;!-- æ³¨æ„è¿™é‡Œçš„:dataå¦‚æœæ²¡æœ‰åŠ çš„è¯ä¾æ—§æ˜¯ä¸èƒ½ä¸Šä¸‹æ»‘åŠ¨çš„ï¼Œå› ä¸ºscrollæ˜¯åœ¨mountedæ—¶å€™åˆå§‹åŒ–ï¼Œç”±äºæ•°æ®è·å–å­˜åœ¨å¼‚æ­¥æ€§ï¼Œå¯èƒ½mountedçš„æ—¶å€™å°šæœªå–åˆ°æ•°æ®ï¼Œæ•´ä¸ªåˆ—è¡¨domçš„é«˜åº¦æ˜¯æ²¡æœ‰è¢«æ’‘å¼€çš„ä»¥è‡³äºbetter-scrollæ— æ³•æ­£ç¡®åˆå§‹åŒ–ã€‚æ‰€ä»¥éœ€è¦ä¼ å…¥ä¸€ä¸ªdiscListæ•°æ®ï¼ˆdiscListæœ‰è¯´æ˜æ•°æ®å·²ç»è·å–åˆ°äº†ï¼‰è§¦å‘scrollçš„watché‡Œé¢çš„refresh --&gt;</span><br><span class="line">      &lt;div&gt; &lt;!-- æ³¨æ„ï¼Œbetter-scrollçš„scrollæ ‡ç­¾ä¸‹åªèƒ½æ˜¯ä¸€ä¸ªdivåŒ…è£¹å…¨éƒ¨ï¼Œå¦‚æœè¿™ä¸ªdivä¸æŠŠè½®æ’­å›¾å’Œåˆ—è¡¨éƒ½åŒ…è£¹èµ·æ¥çš„è¯ï¼Œæ•ˆæœæ˜¯åªæœ‰æ­Œå•åˆ—è¡¨æ»šåŠ¨ï¼Œè½®æ’­å›¾æ˜¯å›ºå®šçš„ï¼Œé‚£å°±ç³Ÿäº† --&gt;</span><br><span class="line">      &lt;div v-if=&quot;recommends.length&quot; class=&quot;slider-wrapper&quot;&gt;</span><br><span class="line">        &lt;!-- æ³¨æ„è¿™é‡Œç”¨äº†v-ifæ¥ç¡®ä¿åªæœ‰å½“æˆåŠŸè·å–åˆ°æ•°æ®åæ‰å°†sliderç»„ä»¶æ·»åŠ ä¸Šï¼Œä»è€Œä¿è¯sliderä¸­çš„å¾ªç¯æ¸²æŸ“æˆåŠŸ --&gt;</span><br><span class="line">        &lt;slider&gt;</span><br><span class="line">          &lt;div v-for=&quot;item in recommends&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">            &lt;a :href=&quot;item.linkUrl&quot;&gt;</span><br><span class="line">              &lt;img  @load=&quot;loadImage&quot; :src=&quot;item.picUrl&quot;&gt;&lt;!-- é€šè¿‡@loadäº‹ä»¶ç›‘å¬å›¾ç‰‡åŠ è½½å®Œæˆäº†æ²¡æœ‰ï¼Œä¸€æ—¦è·åŠ è½½å®Œå°±refresh scroll --&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/slider&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;recommend-list&quot;&gt;</span><br><span class="line">        &lt;h1 class=&quot;list-title&quot;&gt;çƒ­é—¨æ­Œå•æ¨è&lt;/h1&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li class=&quot;item&quot; v-for=&quot;item in discList&quot; :key=&quot;item.dissid&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;icon&quot;&gt;</span><br><span class="line">              &lt;img :src=&quot;item.imgurl&quot; width=&quot;60&quot; height=&quot;60&quot; alt&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;text&quot;&gt;</span><br><span class="line">                &lt;h2 class=&quot;name&quot; v-html=&quot;item.creator.name&quot;&gt;&lt;/h2&gt;</span><br><span class="line">                &lt;p class=&quot;desc&quot; v-html=&quot;item.dissname&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/scroll&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="è¿™é‡Œé‡åˆ°çš„å‘"><a href="#è¿™é‡Œé‡åˆ°çš„å‘" class="headerlink" title="è¿™é‡Œé‡åˆ°çš„å‘"></a>è¿™é‡Œé‡åˆ°çš„å‘</h3><ol>
<li><p>åœ¨ä¸Šè¿°recommend.vueä¸­æåˆ°scrollæ ‡ç­¾ä¸­:dataå¦‚æœæ²¡æœ‰åŠ çš„è¯ä¾æ—§æ˜¯ä¸èƒ½ä¸Šä¸‹æ»‘åŠ¨çš„ï¼Œå› ä¸ºscrollæ˜¯åœ¨mountedæ—¶å€™åˆå§‹åŒ–ï¼Œç”±äºæ•°æ®è·å–å­˜åœ¨å¼‚æ­¥æ€§ï¼Œå¯èƒ½mountedçš„æ—¶å€™å°šæœªå–åˆ°æ•°æ®ï¼Œæ•´ä¸ªåˆ—è¡¨domçš„é«˜åº¦æ˜¯æ²¡æœ‰è¢«æ’‘å¼€çš„ã€‚æ‰€ä»¥éœ€è¦ä¼ å…¥ä¸€ä¸ªdiscListæ•°æ®ï¼ˆdiscListæœ‰è¯´æ˜æ•°æ®å·²ç»è·å–åˆ°äº†ï¼‰è§¦å‘scrollçš„refresh</p>
</li>
<li><p>é‚£ä¸ºä»€ä¹ˆä¼ discListå°±è¡Œï¼Ÿä¼ recommendsè¡Œä¸è¡Œï¼Ÿç­”æ¡ˆæ˜¯ä¸è¡Œçš„ã€‚è™½ç„¶ä»–ä»¬éƒ½æ˜¯å¼‚æ­¥è·å–æ•°æ®ï¼Œä½†æ˜¯discListè·å–çš„é€Ÿåº¦æ¯”recommendsçš„è·å–é€Ÿåº¦æ…¢ã€‚å¦‚æœä¼ å…¥çš„æ˜¯recommendsï¼Œè™½ç„¶recommendså·²ç»è·å–åˆ°äº†ï¼Œè½®æ’­å›¾çš„é«˜åº¦ä¹Ÿå·²ç»æ’‘å¼€äº†ï¼Œä½†æ˜¯ä¸‹æ–¹çš„åˆ—è¡¨discListè¿˜æ²¡æœ‰å®Œå…¨è·å–åˆ°ï¼Œæ‰€ä»¥scrollåœ¨åˆå§‹åŒ–çš„æ—¶å€™é¡µé¢çš„é«˜åº¦è®¡ç®—æ˜¯æœ‰è¯¯çš„ã€‚</p>
</li>
<li><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ‹¿åˆ°recommendså°±ä¸‡äº‹å¤§å‰äº†å—ï¼Ÿä¸æ˜¯ã€‚</p>
<p>å¯¹äºdiscListæ­Œå•åˆ—è¡¨ï¼Œé‡Œé¢çš„åˆ—è¡¨é¡¹æ˜¯ç»™å®šå®½é«˜çš„ï¼Œæ‰€ä»¥ä¸€æ‹¿åˆ°discListå°±èƒ½ç¡®å®šå®½é«˜æ’‘å¼€domã€‚ä½†æ˜¯recommendéƒ¨åˆ†çš„è½®æ’­å›¾å›¾ç‰‡æ˜¯æ²¡æœ‰ç»™å®šå®½é«˜çš„ï¼Œæ˜¯æŒ‰ç…§ç™¾åˆ†æ¯”æ¥è®¾ç½®çš„å®½é«˜ï¼Œæ‰€ä»¥å³ä½¿è·å¾—äº†recommendsçš„æ•°æ®ï¼Œä½†æ˜¯ç”±äºå›¾ç‰‡æ˜¯é€šè¿‡é“¾æ¥å¼•å…¥çš„ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ä¸èƒ½ä¿è¯æ‹¿åˆ°äº†recommendsçš„æ•°æ®å°±èƒ½ç«‹åˆ»åŠ è½½å‡ºå›¾ç‰‡æ’‘èµ·å®½é«˜ï¼Œåœ¨æ­¤å®Œæˆä¹‹å‰å°±åˆå§‹åŒ–scrollè¿˜æ˜¯ä¼šå‡ºé—®é¢˜çš„ã€‚æ‰€ä»¥ï¼Œå¯ä»¥ç»™imgæ ‡ç­¾ç›‘å¬loadäº‹ä»¶ï¼Œä¸€æ—¦loadå°±refresh scrollã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">loadImage() &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.checkloaded) &#123; <span class="comment">/* æ— ä¸­ç”Ÿæœ‰æä¸ªcheckloadedå˜é‡æ¥ç›‘æµ‹åŠ è½½å®Œæˆä¸å¦ï¼Œä¸€å¼€å§‹é»˜è®¤ä¸ºundefinedï¼Œåªè¦æœ‰ä¸€å¼ åŠ è½½æˆåŠŸå°±æ”¹å€¼ä¸ºtrueï¼Œä¸ç”¨æ¯å¼ å›¾éƒ½è§¦å‘è¿™ä¸ªæ–¹æ³•ï¼ŒåŠ è½½å¾—åˆ°ä¸€å¼ å›¾å°±å¯ä»¥ç¡®å®šå®½é«˜äº† */</span></span><br><span class="line">    <span class="keyword">this</span>.checkloaded = <span class="literal">true</span> </span><br><span class="line">    <span class="keyword">this</span>.$refs.scroll.refresh()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ä½¿ç”¨checkloadedä¹Ÿæ˜¯<strong>å¸¸è§çš„ä¸€ç§ä¼˜åŒ–</strong>ã€‚</p>
<p><br></p>
<h3 id="è¿™é‡Œæ€»ç»“ä¸€ä¸‹better-scrollçš„æ¸²æŸ“åŸç†å§"><a href="#è¿™é‡Œæ€»ç»“ä¸€ä¸‹better-scrollçš„æ¸²æŸ“åŸç†å§" class="headerlink" title="è¿™é‡Œæ€»ç»“ä¸€ä¸‹better-scrollçš„æ¸²æŸ“åŸç†å§"></a>è¿™é‡Œæ€»ç»“ä¸€ä¸‹better-scrollçš„æ¸²æŸ“åŸç†å§</h3><p>å®ƒæ ¹æ®åˆå§‹åŒ–çš„æ—¶æœºæˆ–è€…refreshçš„æ—¶æœºï¼Œé‚£ä¸ªæ—¶å€™scrollçš„çˆ¶å…ƒç´ çš„é«˜åº¦å’Œå­å…ƒç´ çš„é«˜åº¦ä¹‹å·®ï¼Œç®—åˆ°scrollå¯ä»¥æ»šåŠ¨çš„ä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬å»å®ä¾‹åŒ–æˆ–è€…refreshè¿™ä¸ªscrollçš„æ—¶å€™ä¸€å®šè¦ä¿è¯domæ˜¯æ¸²æŸ“å®Œæˆçš„ï¼Œæ‰èƒ½æ­£ç¡®è®¡ç®—ä»–ä»¬çš„é«˜åº¦ã€‚ä¸€æ—¦æˆ‘ä»¬æœ‰æ•°æ®å˜åŒ–å¼•èµ·domå˜åŒ–æˆ–è€…å…¶ä»–domç»“æ„å˜åŒ–ï¼Œä¸€å®šè¦é‡æ–°refreshè¿™ä¸ªscrollã€‚</p>
<p><br><br></p>
<h2 id="æ‡’åŠ è½½vue-lazyload"><a href="#æ‡’åŠ è½½vue-lazyload" class="headerlink" title="æ‡’åŠ è½½vue-lazyload"></a>æ‡’åŠ è½½vue-lazyload</h2><h3 id="vue-lazyload"><a href="#vue-lazyload" class="headerlink" title="vue-lazyload"></a><a href="https://github.com/hilongjw/vue-lazyload" target="_blank" rel="noopener">vue-lazyload</a></h3><p><br></p>
<h3 id="ä»£ç ç¼–å†™"><a href="#ä»£ç ç¼–å†™" class="headerlink" title="ä»£ç ç¼–å†™"></a>ä»£ç ç¼–å†™</h3><ol>
<li><p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> VueLazyLoad <span class="keyword">from</span> <span class="string">'vue-lazyload'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueLazyLoad, &#123;</span><br><span class="line">    loading: <span class="built_in">require</span>(<span class="string">'./common/image/default-ldt.png'</span>)  <span class="comment">//loadingæ—¶æ˜¾ç¤ºçš„å›¾ç‰‡</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°†recommend.vueä¸­<code>img</code>æ ‡ç­¾çš„<code>:src</code>å±æ€§æ›¿æ¢æˆ<code>v-lazy</code>è®¡å³å¯</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuemusic/1561427554510.png" alt="1561427554510"></p>
</li>
</ol>
<p><br></p>
<h2 id="loadingç»„ä»¶"><a href="#loadingç»„ä»¶" class="headerlink" title="loadingç»„ä»¶"></a>loadingç»„ä»¶</h2><p>æ•ˆæœï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuemusic/1561428758666.png" alt="1561428758666"></p>
<p><br></p>
<p>è¦æä¸ªè¿™ä¸ªä¸œè¥¿ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 id="src-base-loading-vue"><a href="#src-base-loading-vue" class="headerlink" title="src/base/loading.vue"></a>src/base/loading.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;loading&quot;&gt;</span><br><span class="line">    &lt;img width=&quot;24&quot; height=&quot;24&quot; src=&quot;./loading.gif&quot;&gt;</span><br><span class="line">    &lt;p class=&quot;desc&quot;&gt;&#123;&#123;title&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script type=&quot;text/ecmascript-6&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      title: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &apos;æ­£åœ¨è½½å…¥...&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;</span><br><span class="line">  @import &quot;~common/stylus/variable&quot;</span><br><span class="line"></span><br><span class="line">  .loading</span><br><span class="line">    width: 100%</span><br><span class="line">    text-align: center</span><br><span class="line">    .desc</span><br><span class="line">      line-height: 20px</span><br><span class="line">      font-size: $font-size-small</span><br><span class="line">      color: $color-text-l</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨recommend.vueä¸­å¼•ç”¨å¹¶åµŒå…¥å³å¯ã€‚</p>
<p><br><br></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunteng.github.io/[object Object]2019/06/03/Vuexç¬”è®°.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dunteng Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunteng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/[object Object]2019/06/03/Vuexç¬”è®°.html" itemprop="url">Vuexç¬”è®°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-03T00:00:00+08:00">
                2019-06-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/[object Object]2019/06/03/Vuexç¬”è®°.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/[object Object]2019/06/03/Vuexç¬”è®°.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æˆ‘è¿™ç¯‡æ–‡ç« ä¹Ÿæ”¾åœ¨æˆ‘çš„GitHubä¸Šï¼Œé‡Œé¢è¿˜æœ‰ç›¸åº”çš„ä»£ç ã€‚å»ºè®®ç§»æ­¥<a href="https://github.com/Dunteng/learnVue/tree/master/%E5%AD%A6%E4%B9%A0Vuex#%E6%9C%AC%E6%96%87%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener">GitHub</a>é˜…è¯»æœ¬æ–‡ç« ã€‚</p>
<h1 id="æœ¬æ–‡ä»£ç "><a href="#æœ¬æ–‡ä»£ç " class="headerlink" title="æœ¬æ–‡ä»£ç "></a>æœ¬æ–‡ä»£ç </h1><ul>
<li>å‰å¯¼~stateéƒ¨åˆ†çš„å…¨éƒ¨ä»£ç ï¼š <a href="https://github.com/Dunteng/learnVue/tree/v1/%E5%AD%A6%E4%B9%A0Vuex/app" target="_blank" rel="noopener">ç‚¹å‡»</a></li>
<li>åº”ç”¨ï¼ˆä¸€ï¼‰ä»£ç ï¼š <a href="https://github.com/Dunteng/learnVue/tree/v2/%E5%AD%A6%E4%B9%A0Vuex/app" target="_blank" rel="noopener">ç‚¹å‡»</a></li>
<li>getters åº”ç”¨ï¼ˆäºŒï¼‰ä»£ç ï¼š <a href="https://github.com/Dunteng/learnVue/tree/v3/%E5%AD%A6%E4%B9%A0Vuex/app" target="_blank" rel="noopener">ç‚¹å‡»</a></li>
<li>mutations åº”ç”¨ï¼ˆä¸‰ï¼‰ä»£ç ï¼š<a href="https://github.com/Dunteng/learnVue/tree/v4/%E5%AD%A6%E4%B9%A0Vuex/app" target="_blank" rel="noopener">ç‚¹å‡»</a></li>
<li>actions åº”ç”¨ï¼ˆå››ï¼‰ä»£ç ï¼š<a href="https://github.com/Dunteng/learnVue/tree/v5/%E5%AD%A6%E4%B9%A0Vuex/app" target="_blank" rel="noopener">ç‚¹å‡»</a></li>
</ul>
<p><br><br></p>
<h1 id="å‰å¯¼"><a href="#å‰å¯¼" class="headerlink" title="å‰å¯¼"></a>å‰å¯¼</h1><p>ç»“åˆä»£ç æ¡ˆä¾‹å­¦ä¹ ï¼Œæœ¬æ–‡çš„çŸ¥è¯†ç‚¹ä¼šä¾é™„åœ¨è¿™ä¸ªä»£ç é‡Œè®²è§£ï¼Œä¸‹é¢å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªä»£ç çš„ä»‹ç»ï¼Œä¸»è¦å°±æ˜¯ä¸€ä¸ªçˆ¶ç»„ä»¶Index.vueï¼Œä¸¤ä¸ªå­ç»„ä»¶AddStudent.vueå’ŒStudentList.vueï¼Œä¹‹é—´æœ‰ç»„ä»¶é€šè®¯ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562291573640.png" alt="1562291573640"></p>
<p><br></p>
<h2 id="çˆ¶ç»„ä»¶-Index-vue"><a href="#çˆ¶ç»„ä»¶-Index-vue" class="headerlink" title="çˆ¶ç»„ä»¶ Index.vue"></a>çˆ¶ç»„ä»¶ Index.vue</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;index&quot;&gt;</span><br><span class="line">    rock!æˆ‘æ˜¯index.vue</span><br><span class="line">    &lt;add-student @add=&quot;add&quot;&gt;&lt;/add-student&gt;</span><br><span class="line">    &lt;student-list :student=&quot;student&quot;&gt;&lt;/student-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import AddStudent from &quot;../components/AddStudent&quot;;</span><br><span class="line">import StudentList from &quot;../components/StudentList&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      student: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    add(name) &#123;</span><br><span class="line">      this.student.push(name);</span><br><span class="line">      console.log(this.student);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    AddStudent,</span><br><span class="line">    StudentList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.index &#123;</span><br><span class="line">  background-color: rgb(72, 138, 182);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å­ç»„ä»¶-AddStudent-vue"><a href="#å­ç»„ä»¶-AddStudent-vue" class="headerlink" title="å­ç»„ä»¶ AddStudent.vue"></a>å­ç»„ä»¶ AddStudent.vue</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;AddStudent&quot;&gt;</span><br><span class="line">    &lt;h4&gt;æˆ‘æ˜¯addStudent&lt;/h4&gt;</span><br><span class="line">    &lt;span&gt;æ·»åŠ å­¦ç”Ÿ&lt;/span&gt;</span><br><span class="line">    &lt;input id=&quot;input&quot; type=&quot;text&quot; v-model=&quot;name&quot; /&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;æ·»åŠ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    add() &#123;</span><br><span class="line">      this.$emit(&quot;add&quot;, this.name);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.AddStudent &#123;</span><br><span class="line">  border: 2px solid green;</span><br><span class="line">  background-color: green;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å­ç»„ä»¶-Student-List-vue"><a href="#å­ç»„ä»¶-Student-List-vue" class="headerlink" title="å­ç»„ä»¶ Student List.vue"></a>å­ç»„ä»¶ Student List.vue</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;StudentList&quot;&gt;</span><br><span class="line">    &lt;h4&gt;æˆ‘æ˜¯StudentList&lt;/h4&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;(item, index) in student&quot; :key=&quot;index+item&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: [&quot;student&quot;]</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.StudentList &#123;</span><br><span class="line">  border: 2px solid red;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><br><br></p>
<h1 id="state"><a href="#state" class="headerlink" title="state"></a>state</h1><h2 id="store-js"><a href="#store-js" class="headerlink" title="store.js"></a>store.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    name: <span class="string">'dunteng'</span>,</span><br><span class="line">    age: <span class="number">20</span>,</span><br><span class="line">    look: <span class="string">'handsome'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="store-state-xxx"><a href="#store-state-xxx" class="headerlink" title="$store.state.xxx"></a>$store.state.xxx</h2><p>vuex é‡Œçš„ state ç›¸å½“äºä¸€ä¸ªå…¬å…±æ•°æ®æ± ã€‚</p>
<p>åœ¨ AddStudent.vue ä¸­é€šè¿‡å¦‚ä¸‹æ–¹å¼å¯ä»¥è·å–åˆ°ï¼š</p>
<ol>
<li><p>ä½¿ç”¨ $store.state.name è·å–åˆ°</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562292413010.png" alt="1562292413010"></p>
<p>ç„¶åæˆ‘ä¿®æ”¹ä¸€ä¸‹addæ–¹æ³•ä½¿å¾—ç‚¹å‡»buttonæŒ‰é’®åä¿®æ”¹ $store.state.name ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add() &#123;</span><br><span class="line">  <span class="comment">// this.$emit("add", this.name);</span></span><br><span class="line">  <span class="keyword">this</span>.$store.state.name += <span class="string">" lin"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯<code></code>æ˜¾ç¤ºçš„éƒ¨åˆ†å¹¶æ²¡æœ‰æˆåŠŸä¿®æ”¹åªæœ‰<code></code>æ‰æœ‰è¢«ä¿®æ”¹ï¼Œè¿™æ˜¯å› ä¸º<code>storeName</code>æ˜¯åœ¨dataä¸­è¢«å®šä¹‰çš„ï¼Œä¹‹å<code>$store.state.name</code>å’Œå®ƒæ˜¯æ²¡å…³ç³»çš„ï¼Œå½±å“ä¸åˆ°ã€‚æ‰€ä»¥åº”è¯¥ç”¨<code>computed</code>æ¥è·å– state çš„æ•°æ®ã€‚</p>
</li>
<li><p>computed è·å– this.$store.state.name</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562292792863.png" alt="1562292792863"></p>
<p>è¿™æ ·ï¼Œåªè¦ state é‡Œçš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé€šè¿‡ computed è·å–åˆ°çš„å°±èƒ½ç›¸åº”å…¶æ”¹å˜ã€‚</p>
</li>
</ol>
<p><br></p>
<h2 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åƒä¸Šè¿°é‚£æ ·æ‹¿åˆ° state ä¸­çš„ name ï¼Œç»§ç»­è·å–åˆ° state ä¸­çš„å…¶ä»–æ•°æ®ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562293651685.png" alt="1562293651685"></p>
<p>å¦‚æœåŒæ—¶å¦ä¸€ä¸ªç»„ä»¶ä¹Ÿè¦åŒæ ·çš„è¿™äº›æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨ StudentList ç»„ä»¶ä¸­é‡å¤ä¸Šè¿°çš„æ“ä½œï¼Œè¿™æ ·æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å¦‚æœè¿˜æœ‰ä¸ƒå…«ä¹åä¸ªç»„ä»¶ä¹Ÿè¦è¿™äº›æ•°æ®ï¼Œé‚£ä¹ˆè¿™æ ·çš„æ“ä½œå¾ˆç¹çï¼Œå†—ä½™å¾ˆå¤§ã€‚</p>
<p>è¿™å°±éœ€è¦ç”¨åˆ° <strong>mapStateæ–¹æ³•</strong> äº†ã€‚è¿™ä¸ªæ–¹æ³•çš„è¿”å›æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œå¯¹è±¡çš„æ¯ä¸ªkeyå¯¹åº”çš„valueéƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰ä¸€ç‚¹ç‚¹åƒä¸‹é¢è¿™ä¸ªï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562294928788.png" alt="1562294928788"></p>
<p><br></p>
<h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>å…ˆå¼•å…¥æ‰èƒ½ä½¿ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åç»“åˆ computed ï¼Œå°† state ä¸­çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">computed: mapState([<span class="string">"name"</span>, <span class="string">"age"</span>, <span class="string">"look"</span>]),</span><br></pre></td></tr></table></figure>
<p>è€Œåœ¨å½“å‰ç»„ä»¶ä¸­è·å¾—çš„æ•°æ®åç§°å’Œ state ä¸­çš„ä¸€æ ·ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562295563445.png" alt="1562295563445"></p>
<p>ä½†æ˜¯ç»“æœåªæ˜¾ç¤ºäº† age å’Œ look ï¼Œæ²¡æœ‰æ˜¾ç¤º name ï¼Œå› ä¸ºåœ¨ data ä¸­å®šä¹‰äº†ä¸€ä¸ª name å±æ€§ï¼Œè€Œ data çš„ä¼˜å…ˆçº§æ¯” computed é«˜ï¼Œæ‰€ä»¥æ— æ³•æ­£å¸¸è·å–åˆ°ã€‚</p>
<p>æ‰€ä»¥éœ€è¦æˆ‘ä»¬åœ¨ä½¿ç”¨ mapState çš„æ—¶å€™é‡å‘½åï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: mapState(&#123;</span><br><span class="line">  mapStateName: <span class="function"><span class="params">state</span> =&gt;</span> state.name,</span><br><span class="line">  mapStateAge: <span class="function"><span class="params">state</span> =&gt;</span> state.age,</span><br><span class="line">  mapStateOther: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">"ä½ å¥½å—"</span> <span class="comment">//æˆ‘ä»¬ç”šè‡³å¯ä»¥å®šä¹‰ä¸stateæ— å…³çš„å˜é‡</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯é™¤äº† mapState ï¼Œæˆ‘ä»¬åœ¨ computed ä¸­ä¹Ÿéœ€è¦å®šä¹‰å…¶ä»–çš„è®¡ç®—å±æ€§ï¼Œå’‹æ•´ï¼Ÿ</p>
<p>åƒä¸‹é¢è¿™æ ·å†™æ˜¯ä¼šæŠ¥é”™çš„ï¼</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562297668974.png" alt="1562297668974"></p>
<p>ä¸Šé¢è¯´äº† mapState è¿”å›çš„æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    mapStateName: <span class="function"><span class="params">state</span> =&gt;</span> state.name,</span><br><span class="line">    mapStateAge: <span class="function"><span class="params">state</span> =&gt;</span> state.age,</span><br><span class="line">    mapStateOther: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">"ä½ å¥½å—"</span></span><br><span class="line">  &#125;),</span><br><span class="line">  a()&#123;</span><br><span class="line">    retrun <span class="keyword">this</span>.$store.state.age+<span class="number">666</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="åº”ç”¨ï¼ˆä¸€ï¼‰"><a href="#åº”ç”¨ï¼ˆä¸€ï¼‰" class="headerlink" title="åº”ç”¨ï¼ˆä¸€ï¼‰"></a>åº”ç”¨ï¼ˆä¸€ï¼‰</h2><p><a href="https://github.com/Dunteng/learnVue/tree/v2/%E5%AD%A6%E4%B9%A0Vuex/app" target="_blank" rel="noopener">ã€ä»£ç ã€‘</a></p>
<p>åŸæ¡ˆä¾‹ä¸­çš„ä¸¤ä¸ªå­ç»„ä»¶ä¹‹é—´çš„ä¼ å€¼æ˜¯é€šè¿‡çˆ¶ç»„ä»¶æ¥å®ç°çš„ï¼Œä¸‹é¢æˆ‘ä»¬åˆ©ç”¨ vuex çš„ state æ¥å­˜å‚¨ä»–ä»¬çš„å…¬å…±èµ„æºã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562307401416.png" alt="1562307401416"></p>
<p><br></p>
<h3 id="çˆ¶ç»„ä»¶-Index-vue-1"><a href="#çˆ¶ç»„ä»¶-Index-vue-1" class="headerlink" title="çˆ¶ç»„ä»¶ Index.vue"></a>çˆ¶ç»„ä»¶ Index.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;index&quot;&gt;</span><br><span class="line">    rock!æˆ‘æ˜¯index.vue</span><br><span class="line">    &lt;add-student&gt;&lt;/add-student&gt;</span><br><span class="line">    &lt;student-list&gt;&lt;/student-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import AddStudent from &quot;../components/AddStudent&quot;;</span><br><span class="line">import StudentList from &quot;../components/StudentList&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    AddStudent,</span><br><span class="line">    StudentList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.index &#123;</span><br><span class="line">  background-color: rgb(72, 138, 182);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="å­ç»„ä»¶-AddStudent-vue-1"><a href="#å­ç»„ä»¶-AddStudent-vue-1" class="headerlink" title="å­ç»„ä»¶ AddStudent.vue"></a>å­ç»„ä»¶ AddStudent.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;AddStudent&quot;&gt;</span><br><span class="line">    &lt;h4&gt;æˆ‘æ˜¯addStudent&lt;/h4&gt;</span><br><span class="line">    &lt;span&gt;æ·»åŠ å­¦ç”Ÿ&lt;/span&gt;</span><br><span class="line">    &lt;input id=&quot;input&quot; type=&quot;text&quot; v-model=&quot;name&quot; /&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;æ·»åŠ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &quot;vuex&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    add() &#123;</span><br><span class="line">      // this.$emit(&quot;add&quot;, this.name);</span><br><span class="line">      this.$store.state.studentlist.push(this.name);</span><br><span class="line">      console.log(this.$store.state.studentlist);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.AddStudent &#123;</span><br><span class="line">  border: 2px solid green;</span><br><span class="line">  background-color: green;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="å­ç»„ä»¶-StudentList-vue"><a href="#å­ç»„ä»¶-StudentList-vue" class="headerlink" title="å­ç»„ä»¶ StudentList.vue"></a>å­ç»„ä»¶ StudentList.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;StudentList&quot;&gt;</span><br><span class="line">    &lt;h4&gt;æˆ‘æ˜¯StudentList&lt;/h4&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;(item, index) in studentlist&quot; :key=&quot;index+item&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &quot;vuex&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState([&quot;studentlist&quot;]) //è®°å¾—åŠ å¼•å·ã€‚ã€‚ã€‚</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.StudentList &#123;</span><br><span class="line">  border: 2px solid red;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><br><br></p>
<h1 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h1><h2 id="åº”ç”¨ï¼ˆäºŒï¼‰"><a href="#åº”ç”¨ï¼ˆäºŒï¼‰" class="headerlink" title="åº”ç”¨ï¼ˆäºŒï¼‰"></a>åº”ç”¨ï¼ˆäºŒï¼‰</h2><p>åœ¨åº”ç”¨ï¼ˆä¸€ï¼‰çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¾“å‡ºï¼š</p>
<blockquote>
<p>ç´¢å¼•ä¸º0çš„ï¼š **å§“å</p>
<p>ç´¢å¼•ä¸º1å’Œ2çš„ï¼šå§“å**</p>
<p>ç´¢å¼•å¤§äº2çš„ï¼š++å§“å++</p>
</blockquote>
<p>æ•ˆæœå›¾ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562335007899.png" alt="1562335007899"></p>
<p><br></p>
<h3 id="ä¸ç”¨gettersçš„æ–¹æ¡ˆ"><a href="#ä¸ç”¨gettersçš„æ–¹æ¡ˆ" class="headerlink" title="ä¸ç”¨gettersçš„æ–¹æ¡ˆ"></a>ä¸ç”¨gettersçš„æ–¹æ¡ˆ</h3><p>åœ¨ StudentList.vueä¸­çš„ <strong>computed</strong> ä¸­è¿›è¡Œæ•°æ®å¤„ç†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="comment">// ...mapState(["studentlist"]) //è®°å¾—åŠ å¼•å·ã€‚ã€‚ã€‚</span></span><br><span class="line">  studentlist() &#123;</span><br><span class="line">    <span class="keyword">var</span> list = [];</span><br><span class="line">    <span class="keyword">this</span>.$store.state.studentlist.forEach(<span class="function">(<span class="params">element, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">        element = <span class="string">"**"</span> + element;</span><br><span class="line">        list.push(element);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == <span class="number">1</span> || index == <span class="number">2</span>) &#123;</span><br><span class="line">        element = element + <span class="string">"**"</span>;</span><br><span class="line">        list.push(element);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        element = <span class="string">"++"</span> + element + <span class="string">"++"</span>;</span><br><span class="line">        list.push(element);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="ä½¿ç”¨gettersçš„æ–¹æ¡ˆ"><a href="#ä½¿ç”¨gettersçš„æ–¹æ¡ˆ" class="headerlink" title="ä½¿ç”¨gettersçš„æ–¹æ¡ˆ"></a>ä½¿ç”¨gettersçš„æ–¹æ¡ˆ</h3><p>ç°åœ¨ store.js ä¸­å†™ getters ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">//ç›¸å½“äºè®¡ç®—å±æ€§</span></span><br><span class="line">  newstudentlist(state) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.studentlist.map(<span class="function">(<span class="params">ele, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'**'</span> + ele</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index &lt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ele + <span class="string">'**'</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'++'</span> + ele + <span class="string">'++'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>åœ¨ StudentList ä¸­ç›´æ¥ä½¿ç”¨ newstudentlistï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;StudentList&quot;&gt;</span><br><span class="line">    &lt;h4&gt;æˆ‘æ˜¯StudentList&lt;/h4&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;(item, index) in newstudentlist&quot; :key=&quot;index+item&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &quot;vuex&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    newstudentlist() &#123;</span><br><span class="line">      return this.$store.getters.newstudentlist;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="mapGetters"><a href="#mapGetters" class="headerlink" title="mapGetters"></a>mapGetters</h3><p>å’Œ mapState ç±»ä¼¼çš„ä¾¿æ·æ–¹æ³•</p>
<p>StudentList ä¸­å…ˆå¼•å…¥ mapGetters ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState, mapGetters &#125; <span class="keyword">from</span> <span class="string">"vuex"</span>;</span><br><span class="line">ã€‚ã€‚ã€‚</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="comment">// newstudentlist() &#123;</span></span><br><span class="line">    <span class="comment">//   return this.$store.getters.newstudentlist;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    ...mapGetters([<span class="string">"newstudentlist"</span>])</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„æ–¹å¼ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState, mapGetters &#125; <span class="keyword">from</span> <span class="string">"vuex"</span>;</span><br><span class="line">ã€‚ã€‚ã€‚</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="comment">// newstudentlist() &#123;</span></span><br><span class="line">    <span class="comment">//   return this.$store.getters.newstudentlist;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//...mapGetters(["newstudentlist"])</span></span><br><span class="line">    </span><br><span class="line">    ...mapGetters(&#123;</span><br><span class="line">      newstudentlist: <span class="string">"newstudentlist"</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="è¡¥å……ä¸€ç‚¹ï¼šgettersè‡ªèº«å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥getterså±æ€§çš„æ–¹æ³•ä¸­"><a href="#è¡¥å……ä¸€ç‚¹ï¼šgettersè‡ªèº«å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥getterså±æ€§çš„æ–¹æ³•ä¸­" class="headerlink" title="è¡¥å……ä¸€ç‚¹ï¼šgettersè‡ªèº«å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥getterså±æ€§çš„æ–¹æ³•ä¸­"></a>è¡¥å……ä¸€ç‚¹ï¼šgettersè‡ªèº«å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥getterså±æ€§çš„æ–¹æ³•ä¸­</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">//ç›¸å½“äºè®¡ç®—å±æ€§</span></span><br><span class="line">  newstudentlist(state, getters) &#123;<span class="comment">//ä¼ å…¥äº†gettersä½œä¸ºå‚æ•°</span></span><br><span class="line">    <span class="keyword">return</span> state.studentlist.map(<span class="function">(<span class="params">ele, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'**'</span> + ele + getters.aaa<span class="comment">//ä½¿ç”¨äº†gettersä¸­çš„aaa</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index &lt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ele + <span class="string">'**'</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'++'</span> + ele + <span class="string">'++'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  aaa() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">666</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><br><br></p>
<h1 id="mutations"><a href="#mutations" class="headerlink" title="mutations"></a>mutations</h1><h2 id="å…³äºä¸¥æ ¼æ¨¡å¼"><a href="#å…³äºä¸¥æ ¼æ¨¡å¼" class="headerlink" title="å…³äºä¸¥æ ¼æ¨¡å¼"></a>å…³äºä¸¥æ ¼æ¨¡å¼</h2><p>ä¸Šè¿°åº”ç”¨ç¨‹åºä»£ç å†™çš„æ˜¯ä¸è§„èŒƒçš„ï¼Œå½“æˆ‘ä»¬å¼€å¯ä¸¥æ ¼æ¨¡å¼æ—¶å°±ä¼šæŠ¥è­¦å‘Šäº†ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562337035921.png" alt="1562337035921"></p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562337084677.png" alt="1562337084677"></p>
<p>æŠ¥é”™ä¿¡æ¯æç¤ºä¸è¦åœ¨ <strong>mutation</strong> å¤„ç†ç¨‹åºä¹‹å¤–å¯¹vuexå­˜å‚¨çŠ¶æ€<strong>state</strong>è¿›è¡Œæ›´æ”¹ã€‚è€Œæˆ‘ä»¬æ°æ°å°±åœ¨ Addstudent.vue çš„ add æ–¹æ³•ä¸­å¯¹ $store.state.studentlist è¿›è¡Œäº†æ›´æ”¹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562337274020.png" alt="1562337274020"></p>
<p>ã€è®°ä½ï¼šå‡¡æ˜¯è¦ä¿®æ”¹ <strong>state</strong> çš„éƒ½è¦é€šè¿‡ <strong>mutation</strong> æ¥ä¿®æ”¹ã€‚ ã€‘</p>
<p><br></p>
<h2 id="åº”ç”¨ï¼ˆä¸‰ï¼‰"><a href="#åº”ç”¨ï¼ˆä¸‰ï¼‰" class="headerlink" title="åº”ç”¨ï¼ˆä¸‰ï¼‰"></a>åº”ç”¨ï¼ˆä¸‰ï¼‰</h2><p><a href="https://github.com/Dunteng/learnVue/tree/v4/%E5%AD%A6%E4%B9%A0Vuex/app" target="_blank" rel="noopener">ã€è¿™éƒ¨åˆ†ä»£ç ã€‘</a></p>
<p>å…ˆåœ¨ store.js ä¸­ç¼–å†™ mutations ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  changeStudent(state, param) &#123;</span><br><span class="line">    state.studentlist.push(param)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ªå‚æ•°æ¥å—ä¼ å…¥çš„å¤–éƒ¨å‚æ•°ã€‚</p>
<p>åœ¨ AddStudent.vue ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  add() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">"changeStudent"</span>, <span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„å†™æ³•ï¼Œå¯¹è±¡æ˜¯ $store ï¼Œä½¿ç”¨äº† <strong>commit</strong>ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/dfagaha.GIF" alt="dfagaha"></p>
<p><br></p>
<p>åœ¨ mutation å±æ€§ä¸­æ™ºèƒ½ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥æŠŠå‚æ•°å†™è¿›ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åè¿™ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°å†™å…¥ mutation ä¸­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  changeStudent(state, &#123; name, number &#125;) &#123;<span class="comment">//è¿™é‡Œæ³¨æ„å¯¹è±¡å‚æ•°é‡Œé¢çš„å…ƒç´ å‘½åå½¢å‚å’Œå®å‚å¿…é¡»ä¿æŒä¸€è‡´</span></span><br><span class="line">    state.studentlist.push(name + number)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>åœ¨ AddStudent.vue ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  add() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">"changeStudent"</span>, &#123; <span class="attr">name</span>: <span class="keyword">this</span>.name, <span class="attr">number</span>: <span class="number">12</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€æ³¨æ„ï¼šæ³¨æ„å¯¹è±¡å‚æ•°é‡Œé¢çš„å…ƒç´ å‘½åå½¢å‚å’Œå®å‚å¿…é¡»ä¿æŒä¸€è‡´ã€‘</p>
<p><br></p>
<h2 id="mapMutations"><a href="#mapMutations" class="headerlink" title="mapMutations"></a>mapMutations</h2><p>å’Œ mapGetters ä¸€æ ·ï¼Œ mutations ä¹Ÿæœ‰ä¾¿æ·æ“ä½œã€‚</p>
<p>åœ¨ AddStudent.vue ä¸­ï¼Œå…ˆå¼•å…¥ mapMutations</p>
<p>ç„¶ååœ¨ methods å®šä¹‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  add() &#123;</span><br><span class="line">    <span class="comment">// this.$emit("add", this.name);</span></span><br><span class="line">    <span class="comment">// this.$store.state.studentlist.push(this.name);</span></span><br><span class="line">    <span class="comment">// console.log(this.$store.state.studentlist);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// this.$store.commit("changeStudent", &#123; name: this.name, number: 12 &#125;);//mutations</span></span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line">  ...mapMutations([<span class="string">'changeStudent'</span>])    <span class="comment">//mutationsé‡Œçš„æ–¹æ³•å«ä»€ä¹ˆè¿™é‡Œå°±å¡«ä»€ä¹ˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åœ¨ AddStudent.vue ä¸­å°±æœ‰äº† changeStudent è¿™ä¸€æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;AddStudent&quot;&gt;</span><br><span class="line">    &lt;h4&gt;æˆ‘æ˜¯addStudent&lt;/h4&gt;</span><br><span class="line">    &lt;span&gt;æ·»åŠ å­¦ç”Ÿ&lt;/span&gt;</span><br><span class="line">    &lt;input id=&quot;input&quot; type=&quot;text&quot; v-model=&quot;name&quot; /&gt;</span><br><span class="line">    &lt;!-- &lt;button @click=&quot;add&quot;&gt;æ·»åŠ &lt;/button&gt; --&gt;</span><br><span class="line">    &lt;button @click=&quot;changeStudent(&#123;name,number:18&#125;)&quot;&gt;æ·»åŠ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦<strong>é‡å‘½å</strong>ï¼Œå¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  add() &#123;</span><br><span class="line">    <span class="comment">// this.$emit("add", this.name);</span></span><br><span class="line">    <span class="comment">// this.$store.state.studentlist.push(this.name);</span></span><br><span class="line">    <span class="comment">// console.log(this.$store.state.studentlist);</span></span><br><span class="line">    <span class="comment">// this.$store.commit("changeStudent", &#123; name: this.name, number: 12 &#125;);//mutations</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...mapMutations(['changeStudent'])    //mutationsé‡Œçš„æ–¹æ³•å«ä»€ä¹ˆè¿™é‡Œå°±å¡«ä»€ä¹ˆ</span></span><br><span class="line">  ...mapMutations(&#123;</span><br><span class="line">    newChangeStudent: <span class="string">"changeStudent"</span> <span class="comment">//é‡å‘½å</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨æ ‡ç­¾é‡Œè§¦å‘è¿™ä¸ª newChangeStudent å³å¯ã€‚</p>
<p><br><br></p>
<h1 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h1><h2 id="å¼‚æ­¥æ“ä½œä¸‹çš„æƒ…å†µ"><a href="#å¼‚æ­¥æ“ä½œä¸‹çš„æƒ…å†µ" class="headerlink" title="å¼‚æ­¥æ“ä½œä¸‹çš„æƒ…å†µ"></a>å¼‚æ­¥æ“ä½œä¸‹çš„æƒ…å†µ</h2><p>æˆ‘ä»¬å°è¯•åœ¨ mutations ä¸­æ¨¡æ‹Ÿä¸€ä¸‹å¼‚æ­¥æ“ä½œï¼Œå®ç°ç‚¹å‡»åè¿‡äº†1ç§’å†æ‰§è¡Œ mutations ä¸­çš„åŠ¨ä½œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  changeStudent(state, &#123; name, number &#125;) &#123;<span class="comment">//è¿™é‡Œæ³¨æ„å¯¹è±¡å‚æ•°é‡Œé¢çš„å…ƒç´ å‘½åå½¢å‚å’Œå®å‚å¿…é¡»ä¿æŒä¸€è‡´</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      state.studentlist.push(name + number)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ç„¶åå‘ç°æ§åˆ¶å°æŠ¥é”™ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/1562376986538.png" alt="1562376986538"></p>
<p>è¿˜æ˜¯ä¹‹å‰è§è¿‡çš„æŠ¥é”™ä¿¡æ¯ï¼Œæç¤ºä¸è¦åœ¨ <strong>mutation</strong> å¤„ç†ç¨‹åºä¹‹å¤–å¯¹vuexå­˜å‚¨çŠ¶æ€<strong>state</strong>è¿›è¡Œæ›´æ”¹ã€‚è€Œæˆ‘ä»¬åœ¨ mutations é‡Œé¢çš„ setTimeout ä¸‹å¯¹ state è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½œç”¨åŸŸä¸åœ¨ mutations ä¸‹ï¼Œå› æ­¤æŠ¥é”™ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹éå¸¸ç³Ÿç³•çš„æ˜¯ï¼šå¦‚æœæˆ‘ä»¬è¿™æ ·å†™äº†ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ç”¨æç«¯çš„æ—¶é—´ç‚¹å‡»äº†å¾ˆå¤šæ¬¡ï¼Œå½“åæ¥æˆ‘ä»¬æƒ³è¦è°ƒè¯•çš„æ—¶å€™ï¼Œå›ä¸åˆ°æ­£ç¡®çš„ state ã€‚æˆ‘ä»¬é€šè¿‡ vue Devtool è°ƒè¯•ï¼Œå½“æˆ‘æƒ³è¦çœ‹ç¬¬ä¸‰æ¬¡ç‚¹å‡»æ—¶çš„ state æ—¶ï¼Œç»“æœå·¦è¾¹è·³åˆ°äº†åˆè¯•çš„ state çŠ¶æ€ï¼Œå› ä¸ºæˆ‘çš„ç¬¬ä¸‰æ¬¡ç‚¹å‡»æ—¶ï¼Œç¬¬ä¸€æ¬¡ç‚¹å‡»è¿˜ä¸åˆ°1ç§’ï¼Œstate è¿˜å°šæœªè¢«ä¿®æ”¹ï¼å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/faga.GIF" alt="faga"></p>
<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ vuex ä¸­çš„å¼‚æ­¥æ“ä½œ <strong>actions</strong>ã€‚</p>
<p>mutations æ˜¯ç”¨æ¥æ‰§è¡Œä¿®æ”¹ state ä¸­æ•°æ®çš„æ“ä½œï¼Œactions ä¹Ÿæ˜¯ï¼Œä½†æ˜¯ç‰¹åˆ«çš„æ˜¯ï¼Œactions ä¸“é—¨ç”¨æ¥è¿›è¡Œ<strong>å¼‚æ­¥</strong>çš„ä¿®æ”¹æ“ä½œã€‚<br></p>
<h2 id="åº”ç”¨ï¼ˆå››ï¼‰"><a href="#åº”ç”¨ï¼ˆå››ï¼‰" class="headerlink" title="åº”ç”¨ï¼ˆå››ï¼‰"></a>åº”ç”¨ï¼ˆå››ï¼‰</h2><p>åœ¨ store.js ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  changeStudent(state, &#123; name, number &#125;) &#123;<span class="comment">//è¿™é‡Œæ³¨æ„å¯¹è±¡å‚æ•°é‡Œé¢çš„å…ƒç´ å‘½åå½¢å‚å’Œå®å‚å¿…é¡»ä¿æŒä¸€è‡´</span></span><br><span class="line">    state.studentlist.push(name + number)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">actions: &#123;</span><br><span class="line">  changeStudent(ctx, &#123; name, number &#125;) &#123;</span><br><span class="line">    <span class="comment">//è¿™ä¸ªå‚æ•°ctxæ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç›¸å½“äºå½“å‰çš„$store</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      ctx.commit(<span class="string">'changeStudent'</span>, &#123; name, number &#125;)<span class="comment">//è¿™é‡Œè°ƒç”¨äº†mutations ä¸­çš„changeStudentæ–¹æ³•</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ AddStudent.vue ä¸­ï¼Œé€šè¿‡ <strong>dispatch</strong> æ¥è§¦å‘ actions ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  add() &#123;</span><br><span class="line">    <span class="comment">// this.$emit("add", this.name);</span></span><br><span class="line">    <span class="comment">// this.$store.state.studentlist.push(this.name);</span></span><br><span class="line">    <span class="comment">// console.log(this.$store.state.studentlist);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// this.$store.commit("changeStudent", &#123; name: this.name, number: 12 &#125;);//mutations</span></span><br><span class="line">    <span class="keyword">this</span>.$store.dispatch(<span class="string">'changeStudent'</span>,&#123;<span class="attr">name</span>:<span class="keyword">this</span>.name,<span class="attr">number</span>:<span class="number">12</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Dunteng/images/master/BlogImages/illustration/vuex/dfagaga.GIF" alt="dfagaga"></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½¿ç”¨äº† actions ï¼Œæ¯æ¬¡ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™å®ƒéƒ½ä¸æ˜¯ç«‹å³å°±æ‰§è¡Œ changeStudent æ–¹æ³•ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ç­‰å€™1ç§’å†æ‰§è¡Œäº†ï¼Œè¿™å°±å’Œç”¨ mutations å†…éƒ¨ setTimeout ä¸ä¸€æ ·ï¼Œä¸æ˜¯æ¥å¤´åœ°ç«‹å³æ‰§è¡Œï¼Œå¯¼è‡´ state æ··ä¹±ã€‚<br></p>
<h2 id="mapActions"><a href="#mapActions" class="headerlink" title="mapActions"></a>mapActions</h2><p>åŒæ ·çš„ï¼Œactions ä¹Ÿæœ‰ä¾¿æ·æ“ä½œã€‚mapActions è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢éƒ½æ˜¯å‡½æ•°ã€‚</p>
<p>åœ¨ AddStudent.vue çš„ methods ä¸­åˆ›å»º mapActionsï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions([<span class="string">"changeStudent"</span>])<span class="comment">//actionsé‡Œé¢çš„æ–¹æ³•å«ä»€ä¹ˆè¿™é‡Œå°±å†™ä»€ä¹ˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ · AddStudent.vue ä¸­å°±æœ‰äº† changeStudent è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥åƒæ™®é€šæ–¹æ³•é‚£æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;AddStudent&quot;&gt;</span><br><span class="line">    &lt;h4&gt;æˆ‘æ˜¯addStudent&lt;/h4&gt;</span><br><span class="line">    &lt;span&gt;æ·»åŠ å­¦ç”Ÿ&lt;/span&gt;</span><br><span class="line">    &lt;input id=&quot;input&quot; type=&quot;text&quot; v-model=&quot;name&quot; /&gt;</span><br><span class="line">    &lt;button @click=&quot;changeStudent(&#123;name,number:6&#125;)&quot;&gt;æ·»åŠ &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦<strong>é‡å‘½å</strong>ï¼Œå¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions(&#123;</span><br><span class="line">    newChangeStudent: <span class="string">"changeStudent"</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨æ ‡ç­¾ä¸­è§¦å‘ newChangeStudent æ–¹æ³•å³å¯ã€‚</p>
<p><br></p>
<p><br></p>
<h1 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h1><p>æœªå®Œå¾…ç»­</p>
<p><br><br></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Dunteng Lin">
            
              <p class="site-author-name" itemprop="name">Dunteng Lin</p>
              <p class="site-description motion-element" itemprop="description">éƒ½ä¼šå¥½çš„  æ€»ä¼šæœ‰çš„</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/dunteng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yourname@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/dunteng_lin" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i></a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dunteng Lin</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'J29bT1MHDnsDl0O48fRK6u7D-gzGzoHsz',
        appKey: '2ftsHD4VBWJQVASwv65waJNL',
        placeholder: 'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oå¿«æ¥è¯„è®ºä¸€ä¸‹å§!',
        avatar:'retro',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
